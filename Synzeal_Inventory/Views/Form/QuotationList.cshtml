@{
    ViewBag.Title = "QuotationList";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model List<Synzeal_Inventory.Models.SZ_QuotationModel>
@using Synzeal_Inventory.Models;
@{
    bool isminiadmin = SessionCookieManagement.IsMiniAdmin;
}

<section class="content-header">
    <h1>
        Quotation List

        @if (!isminiadmin && !SessionCookieManagement.IsInternational && !SessionCookieManagement.IsDomesticDispatch)
        {
            <div style="float: right;padding-right: 20px;font-size: 14px;padding-top: 10px;padding-left: 10px;">
                <b style="float:left">Import Excel File : </b><input type="file" name="importPreviousQuoteFile" id="importPreviousQuoteFile" onchange="Quote.importPreviousQuote()" style="float:left;width: 40%;padding-left:20px;" /><a href="~/Document/ImportPreviousQuoteFilesamplefile.xlsx" style="color:red" download>Download Sample File</a>
            </div>
        }
        @*<a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="MoveToInHouse()">Move to In-House</a>*@
        @if (!SessionCookieManagement.IsInternational)
        {
            <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="MoveToProject()">Move to Project</a>
            <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="MoveToClubQuote()">Move to Club Quote</a>
            <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="Quicksearch()">Quick Search</a>
            if (Synzeal_Inventory.Models.SessionCookieManagement.IsAdmin)
            {
                <a href="/Form/ExportAllProducts" style="float:right;margin-right:8px;" class="btn btn-primary">Export All Product</a>
            }
        }
    </h1>
</section>

<section class="content">
    <div class="row">
        <div class="col-xs-12">
            <div class="box box-primary">
                <ul class="nav nav-tabs" id="tabullist">
                    <li class="active"><a data-toggle="tab" href="#home" data-tabname="all">ALL @*(<span id="AllCount"><i class="fa fa-spinner"></i></span>)*@</a></li>
                    <li><a data-toggle="tab" href="#tabtobedistributor" onclick="Tobedistinutorquotetab()" data-tabname="tobedistinutor">PENDING QUOTATION</a></li>
                    @*<li><a data-toggle="tab" href="#tabtobe" onclick="Tobequotetab()" data-tabname="tobe">PENDING USER</a></li>
                        <li><a data-toggle="tab" href="#tabtobedistributor" onclick="Tobedistinutorquotetab()" data-tabname="tobedistinutor">PENDING DISTRIBUTOR</a></li>*@
                    @if (!SessionCookieManagement.IsInternational)
                    {
                        <li><a data-toggle="tab" href="#tabquoteinhouse" onclick="inhousequotetab()" data-tabname="inhouse">IN-HOUSE @*(<span id="InhouseCount"><i class="fa fa-spinner"></i></span>)*@</a></li>
                        <li><a data-toggle="tab" href="#tabquotefollowup" onclick="followuptab()" data-tabname="followup">FOLLOW UP @*(<span id="FollowupCount"><i class="fa fa-spinner"></i></span>)*@</a></li>
                    }
                    <li><a data-toggle="tab" href="#tabauction" onclick="auctiontab()" data-tabname="auction">AUCTION @*(<span id="AuctionCount"><i class="fa fa-spinner"></i></span>)*@</a></li>
                    <li><a data-toggle="tab" href="#tabapproved" onclick="quoteapprovedtab()" data-tabname="approved">APPROVED @*(<span id="ApprovedCount"><i class="fa fa-spinner"></i></span>)*@</a></li>
                    @if (!SessionCookieManagement.IsInternational)
                    {
                        <li><a data-toggle="tab" href="#tabrfq" onclick="rfqtab()" data-tabname="rfq">RFQ <span style="color: red"> (@ViewBag.RFQCount)</span> @*(<span id="RFQCount"><i class="fa fa-spinner"></i></span>)*@ </a></li>
                    }
                    <li><a data-toggle="tab" href="#tabrfqquote" onclick="rfqquotetab()" data-tabname="rfqquote">RFQ Quote</a></li>
                    <li><a data-toggle="tab" href="#tabpark" onclick="parktab()" data-tabname="park">PARK</a></li>
                    @if (!SessionCookieManagement.IsInternational)
                    {
                        <li><a data-toggle="tab" href="#tabmaster" onclick="mastertab()" data-tabname="master">MASTER</a></li>

                    }
                    <li>
                        <a data-toggle="tab" href="#tabproformainvoice" onclick="proformainvoicetab()" data-tabname="park">
                            PROFORMA INVOICE
                        </a>
                    </li>
                    <li>
                        <a data-toggle="tab" href="#tabsapdata" onclick="sapdatatab()" data-tabname="sapdata">
                            IMPORTED SAP
                        </a>
                    </li>
                </ul>
                <div class="tab-content">
                    <div id="home" class="tab-pane fade in active">
                        @if (!SessionCookieManagement.IsInternational)
                        {
                            <div style="float: right;margin-right: 8px;margin: 10px 28px 5px 0;">
                                <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="Copyrecords('example1')">Copy</a>
                                <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="MovetoPerformaInvoice('example1')">Performa Invoice</a>
                                <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="SaveData('example1')">Save</a>
                            </div>
                        }
                        <div style="margin: 8px 20px;box-shadow: 1px 1px 2px 2px #ececec;padding: 3px;">
                            <div class="form-group">
                                <div class="col-md-5" style="margin-top:6px">
                                    <div class="radio">
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios1" value="quoteid" checked="">
                                            Quote #
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="ponumber">
                                            PO #
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="company">
                                            Company
                                        </label>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="email">
                                            Email
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="productname">
                                            Product
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="cas">
                                            CAS #
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="cat">
                                            CAT #
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-4" style="margin-top:9px">
                                    <div>
                                        <input class="form-control" id="allsearchbox" type="text" placeholder="Enter search string" style="width: 180px; float: left">
                                        <select class="form-control" id="allddlexportdist" style="width:120px; float:left">
                                            <option value="">--Select--</option>
                                            <option value="Domestic">Domestic</option>
                                            <option value="Export">Export</option>
                                        </select>
                                        <a href="javascript:void(0)" style="float:left;margin-left:8px;" class="btn btn-primary" onclick="$('#example1').DataTable().draw()">Search</a>
                                    </div>
                                </div>
                                <div class="clearfix"></div> <br />
                                <div class="col-md-2" style="width: 11.5%">
                                    <input type="text" class="datepicker" id="flthomestartdate" placeholder="Start Date" style="width:85px;" />
                                    <input type="text" class="datepicker" id="flthomeenddate" placeholder="End Date" style="width: 85px;" />
                                </div>
                                <div class="col-md-2" style="width:8%">
                                    <select class="form-control" id="allddlimportant" style="float:left">
                                        <option value="">Important</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    @Html.DropDownList("GeographicalId", (IEnumerable<SelectListItem>)ViewBag.GeographicalLocationList, new { @class = "form-control", @style = "float:left;" })
                                </div>
                                <div class="col-md-2" style="width:8%">
                                    <select class="form-control" id="allddluserdist" style="float:left">
                                        <option value="">User/Dist</option>
                                        <option value="User">User</option>
                                        <option value="Distributor">Distributor</option>
                                    </select>
                                </div>
                                <div class="col-md-2" style="width:10%">
                                    <select class="form-control" id="allddlcontrolled" style="width:120px; float:left">
                                        <option value="">Controlled/Not Controlled</option>
                                        <option value="Controlled">Controlled</option>
                                        <option value="Not Controlled">Not Controlled</option>
                                    </select>
                                </div>
                                <div class="col-md-2" style="width:10%">
                                    <select class="form-control" id="allddlpoReceived" style="width:120px; float:left">
                                        <option value="">PO Received</option>
                                        <option value="Yes">Yes</option>
                                        <option value="No">No</option>
                                    </select>
                                </div>
                                <div class="col-md-2" style="width:10%">
                                    <select class="form-control" id="allddlcsinstock" style="width:120px; float:left">
                                        <option value="">CS/In-Stock</option>
                                        <option value="CS">CS</option>
                                        <option value="InStock">In-Stock</option>
                                    </select>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                        <!-- /.box-header -->
                        <div class="box-body divQuote" style="overflow:scroll;">
                            <div class="panel-group" @*id="accordion"*@ style="margin-top:20px;">
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <h4 class="panel-title">
                                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseAll"><span class="glyphicon glyphicon-menu-right"></span> Overview</a>
                                        </h4>
                                    </div>
                                    <div id="collapseAll" class="panel-collapse collapse">

                                    </div>
                                </div>
                            </div>
                            <table id="example1" class="table table-bordered table-striped" style="width:100%">
                                <thead>
                                    <tr>
                                        <th> <input type="checkbox" id="chkquotationallAll" /></th>
                                        <th> <input type="checkbox" id="chksecondallAll" /> </th>
                                        <th></th>
                                        <th></th>
                                        <th>Ref#</th>
                                        <th>Company Name</th>
                                        <th>PO No</th>
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th>Price/Qty</th>
                                        <th>Final Price</th>
                                        <th>Lead Time</th>
                                        <th>Batch No</th>
                                        <th>COA</th>
                                        <th>Activity Status</th>
                                        <th>Product Remark</th>
                                        <th>Add Test Remark</th>
                                        <th>Followup Remark</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="tabtobe" class="tab-pane fade in">
                        @if (!SessionCookieManagement.IsInternational)
                        {
                            <div style="float: right;margin-right: 8px;margin: 10px 28px 5px 0;">
                                <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="Copyrecords('tbltobe')">Copy</a>
                                <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="Movetoapproved('tbltobe')">Move to Approved</a>
                                <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="ParkAll('tbltobe')">Park All</a>
                            </div>
                        }
                        <div style="margin: 8px 20px;box-shadow: 1px 1px 2px 2px #ececec;padding: 3px;">
                            <div class="form-group">
                                <div class="col-md-5" style="margin-top:6px">
                                    <div class="radio">
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios1" value="quoteid" checked="">
                                            Quote #
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="ponumber">
                                            PO #
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="company">
                                            Company
                                        </label>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="email">
                                            Email
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="productname">
                                            Product
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="cas">
                                            CAS #
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="cat">
                                            CAT #
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-4" style="margin-top:9px">
                                    <div>
                                        <input class="form-control" id="allsearchbox" type="text" placeholder="Enter search string" style="width:300px; float:left">
                                        <a href="javascript:void(0)" style="float:left;margin-left:8px;" class="btn btn-primary" onclick="$('#tbltobe').DataTable().draw()">Search</a>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                        <div class="container row " style="padding-top:20px">
                            <div class="form-group">
                                <div class="col-md-1">
                                    <label style="padding-top: 6px;">Company:</label>
                                </div>
                                <div class="col-md-3">
                                    <select id="ddlpenuser" name="ddlpenuser" class="form-control">
                                        <option value="">--Select--</option>
                                    </select>
                                </div>
                                <div class="col-md-1">
                                    <label style="padding-top: 6px;">Date:</label>
                                </div>
                                <div class="col-md-2">
                                    <input type="text" id="penuserdate" name="penuserdate" style="width:100px" class="form-control" />
                                </div>
                                <div class="col-md-1">
                                    <label style="padding-top: 6px;">Type:</label>
                                </div>
                                <div class="col-md-2">
                                    <select id="ddlpenusertype" name="ddlpenusertype" class="form-control">
                                        <option value="">--Select--</option>
                                        <option value="Domestic">Domestic</option>
                                        <option value="Export">Export</option>
                                    </select>
                                </div>
                                <div class="col-md-1" style="    padding-top: 7px;">
                                    <a href="javascript:void(0)" onclick="$('#tbltobe').DataTable().draw()"><i class="fa fa-search"></i></a>
                                </div>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                        <!-- /.box-header -->
                        <div class="box-body divQuote" style="overflow:scroll;" id="divQuote">
                            <table id="tbltobe" class="table table-bordered table-striped" style="width:100%">
                                <thead>
                                    <tr>
                                        <th width="1.5%"><input type="checkbox" id="chktobeAll" /></th>
                                        <th width="1.5%"></th>
                                        <th width="1.5%"></th>
                                        <th width="1.5%"></th>
                                        <th>Ref#</th>
                                        <th>Company Name</th>
                                        <th>PO No</th>
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th>Price/Qty</th>

                                        <th>Lead Time</th>
                                        <th>Batch No</th>
                                        <th>Product Remark</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="tabtobedistributor" class="tab-pane fade in">
                        @if (!SessionCookieManagement.IsInternational)
                        {<div style="float: right;margin-right: 8px;margin: 10px 28px 5px 0;">
                                <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="Copyrecords('tbltobedistributor')">Copy</a>
                                <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="Movetoapproved('tbltobedistributor')">Move to Approved</a>
                                <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="ParkAll('tbltobedistributor')">Park All</a>
                            </div>
                        }
                        <div style="margin: 8px 20px;box-shadow: 1px 1px 2px 2px #ececec;padding: 3px;">
                            <div class="form-group">
                                <div class="col-md-5" style="margin-top:6px">
                                    <div class="radio">
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios1" value="quoteid" checked="">
                                            Quote #
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="ponumber">
                                            PO #
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="company">
                                            Company
                                        </label>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="email">
                                            Email
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="productname">
                                            Product
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="cas">
                                            CAS #
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="cat">
                                            CAT #
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-4" style="margin-top:9px">
                                    <div>
                                        <input class="form-control" id="allsearchbox" type="text" placeholder="Enter search string" style="width:300px; float:left">
                                        <a href="javascript:void(0)" style="float:left;margin-left:8px;" class="btn btn-primary" onclick="$('#tbltobedistributor').DataTable().draw()">Search</a>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                        <div class="container row " style="padding-top:20px">


                            <div class="form-group">
                                <div class="col-md-1">
                                    <label style="padding-top: 6px;">Company:</label>
                                </div>
                                <div class="col-md-3">
                                    <select id="ddlpendist" name="ddlpendist" class="form-control">
                                        <option value="">--Select--</option>
                                    </select>
                                </div>
                                <div class="col-md-1">
                                    <label style="padding-top: 6px;">Date:</label>
                                </div>
                                <div class="col-md-2">
                                    <input type="text" id="pendistdate" name="pendistdate" style="width:100px" class="form-control" />
                                </div>
                                <div class="col-md-1">
                                    <label style="padding-top: 6px;">Type:</label>
                                </div>
                                <div class="col-md-2">
                                    <select id="ddlpendisttype" name="ddlpendisttype" class="form-control">
                                        <option value="">--Select--</option>
                                        <option value="Domestic">Domestic</option>
                                        <option value="Export">Export</option>
                                    </select>
                                </div>
                                <div class="col-md-1" style="    padding-top: 7px;">
                                    <a href="javascript:void(0)" onclick="$('#tbltobedistributor').DataTable().draw()"><i class="fa fa-search"></i></a>
                                </div>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                        <!-- /.box-header -->
                        <div class="box-body divQuote" style="overflow:scroll;" id="divQuote">
                            <table id="tbltobedistributor" class="table table-bordered table-striped" style="width:100%">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="chktobeAll" /></th>
                                        <th></th>
                                        <th></th>
                                        <th></th>
                                        <th>Ref#</th>
                                        <th>Company Name</th>
                                        <th>PO No</th>
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th>Price/Qty</th>

                                        <th>Lead Time</th>
                                        <th>Batch No</th>
                                        <th>Product Remark</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="tabquoteinhouse" class="tab-pane fade in">

                        <!-- /.box-header -->
                        <div class="box-body divQuote" style="overflow:scroll;" id="divQuote">
                            <table id="tblinhouse" class="table table-bordered table-striped" width="100%">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="chkinhouseAll" /></th>
                                        <th></th>
                                        <th></th>
                                        <th></th>
                                        <th>Ref#</th>
                                        <th>Company Name</th>
                                        <th>PO No</th>
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th>Price/Qty</th>
                                        <th>Lead Time</th>
                                        <th>Batch No</th>
                                        <th>Product Remark</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="tabquotefollowup" class="tab-pane fade in">
                        <div style="    float: right;margin-right: 8px;margin: 10px 28px 5px 0;">
                            <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="Printrecords()">Copy</a>
                            <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="Exportfollowuprecords()">Export</a>
                        </div>
                        <div style="margin: 8px 20px;box-shadow: 1px 1px 2px 2px #ececec;padding: 3px;">
                            <div class="form-group">
                                <div class="col-md-12">
                                    <input type="text" class="form-control" id="followstartdate" style="width: 95px;float: left; " />
                                    <input type="text" class="form-control" id="followenddate" style="width: 95px; float: left; margin-left: 15px; " />

                                    @Html.DropDownList("CompanyId", (IEnumerable<SelectListItem>)ViewBag.CompanyList, new { @class = "form-control", @style = "width:20%; float:left;margin-left: 15px;" })
                                    <input type="email" class="form-control" id="Email" name="Email" placeholder="Email Address" autocomplete="Off" required style="width:15%; float: left; margin-left: 15px;">
                                    <input type="number" class="form-control" id="startNumber" name="startNumber" placeholder="Start Price" autocomplete="Off" style="width: 10%; float: left; margin-left: 15px; margin-right: 15px; ">
                                    <input type="number" class="form-control" id="endNumber" name="endNumber" placeholder="End Price" autocomplete="Off" style="width: 10%;  ">
                                    <a href="/Form/UpdateQuoteAndPOValue" target="_blank"><i class="fa fa-refresh"></i></a>
                                    <div class="clearfix"></div> <br />
                                    <div class="radio" style="float: left; ">
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="ponumber" checked>
                                            PO #
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios1" value="quoteid" checked="">
                                            Quote #
                                        </label> &nbsp;&nbsp;&nbsp;&nbsp;
                                    </div>
                                    <div>
                                        <input class="form-control" id="allsearchbox" type="text" placeholder="Enter search string" style="width: 250px; float: left">
                                        <select class="form-control" id="allddlexportdist" style="width: 105px; float: left; margin-right: 15px; margin-left: 15px; ">
                                            <option value="Domestic">Domestic</option>
                                            <option value="Export">Export</option>
                                        </select>
                                        @Html.DropDownList("GeographicalId", (IEnumerable<SelectListItem>)ViewBag.GeographicalLocationList, new { @class = "form-control", @style = "width:15%; float:left;" })
                                        <select class="form-control" id="allddlsymbol" style="width: 105px; float: left; margin-right: 15px; margin-left: 15px; ">
                                            <option value="No Action">No Action</option>
                                            <option value="">All</option>
                                            <option value="Interested">Interested</option>
                                            <option value="Mail">Mail</option>
                                            <option value="Call">Call</option>
                                            <option value="Won">Won</option>
                                            <option value="Freeze">Freeze</option>
                                            <option value="Lost">Lost</option>
                                            <option value="Meeting">Meeting</option>
                                            <option value="Less Value">Less Value</option>
                                            <option value="Negotiation">Negotiation</option>
                                            <option value="Important">Important</option>
                                        </select>

                                        <a href="javascript:void(0)" style="float:left;margin-left:8px;" class="btn btn-primary" onclick="$('#tblfollowup').DataTable().draw()">Search</a>

                                        <div style="color: #3c8dbc; padding-top: 7px;">
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <i class="fa fa-thumbs-up" aria-hidden="true" title="Interested" style="font-size: 18px;" onclick="CommonUpdateFollowupStatus('To be Followup')"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <i style="font-size: 18px;" class="fa fa-thumbs-down" aria-hidden="true" title="Removed" onclick="Commonremovefollowup()"> </i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <i class="fa fa-envelope" aria-hidden="true" title="Mail" style="font-size: 18px;" onclick="CommonUpdateFollowupStatus('Mail Sent')"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <i class="fa fa-phone" aria-hidden="true" title="Call" style="font-size: 18px;" onclick="CommonUpdateFollowupStatus('Call')"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <i class="fa fa-trophy" aria-hidden="true" title="Won" style="font-size: 18px;" onclick="CommonUpdateFollowupStatus('Won')"></i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <i class="fa fa-snowflake-o" aria-hidden="true" title="Freeze" style="font-size: 18px;" onclick="CommonFreezeQuote()"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <i class="fa fa-sign-out" aria-hidden="true" title="Lost" style="font-size: 18px;" onclick="CommonUpdateFollowupStatus('Lost')"></i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <i class="fa fa-handshake-o" aria-hidden="true" title="Meeting" style="font-size: 18px;" onclick="CommonUpdateFollowupStatus('Meeting')"></i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <i class="fa fa-arrow-down" aria-hidden="true" title="Less Value" style="font-size: 18px;" onclick="CommonUpdateFollowupStatus('Less Value')"></i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <i class="fa fa-inr" aria-hidden="true" title="Negotiation" style="font-size: 18px;" onclick="CommonUpdateFollowupStatus('Negotiation')"></i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <i class="fa fa-fighter-jet" aria-hidden="true" title="Important" style="font-size: 18px;" onclick="CommonUpdateFollowupStatus('Important')"></i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                        <!-- /.box-header -->
                        <div class="box-body divQuote" style="overflow:scroll;" id="divQuote">

                            <div class="panel-group" @*id="accordion"*@ style="margin-top:20px;">
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <h4 class="panel-title">
                                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne"><span class="glyphicon glyphicon-menu-right"></span> Overview</a>
                                        </h4>
                                    </div>
                                    <div id="collapseOne" class="panel-collapse collapse">
                                        @*<div class="form-group" style="padding-left: 10px;">
                                                <label>Filter : </label>
                                                <div class="radio">
                                                    <label>
                                                        <input type="radio" name="filteroptionsRadios" id="optionsRadios2" value="Domestic" checked>
                                                        Domestic
                                                    </label> &nbsp;&nbsp;
                                                    <label>
                                                        <input type="radio" name="filteroptionsRadios" id="optionsRadios1" value="Export">
                                                        Export
                                                    </label> &nbsp;&nbsp;
                                                    <label>
                                                        <input type="radio" name="filteroptionsRadios" id="optionsRadios1" value="all">
                                                        All
                                                    </label> &nbsp;&nbsp;
                                                </div>
                                            </div>
                                            <div class="clear"></div>
                                            <div class="panel-body" id="divfollowupoverview">
                                                <p><img src='/images/loading.gif' /></p>
                                            </div>*@
                                    </div>
                                </div>
                            </div>

                            <table id="tblfollowup" class="table table-bordered table-striped" style="width:100% !important;">
                                <thead>
                                    <tr>
                                        <th>
                                            <input type="checkbox" id="selectallchk" />
                                        </th>
                                        <th></th>
                                        <th></th>
                                        <th></th>
                                        <th>Ref#</th>
                                        <th>Company Name</th>
                                        <th>Email</th>
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th>Price/Qty</th>
                                        <th>Lead Time</th>
                                        <th>Batch No</th>
                                        <th>Final Price</th>
                                        <th>Discount</th>
                                        <th>Product Remark</th>
                                        <th>Followup Remark</th>
                                        <th>Contact Details</th>
                                        <th>Admin Followup Note</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="tabauction" class="tab-pane fade in">
                        <div class="clearfix"></div>
                        <!-- /.box-header -->
                        <div class="box-body divQuote" style="overflow:scroll;" id="divQuote">


                            <table id="tblauction" class="table table-bordered table-striped" style="width:100% !important;">
                                <thead>
                                    <tr>
                                        <th>
                                            <input type="checkbox" id="chkauctionAll" />
                                        </th>
                                        <th></th>
                                        <th></th>
                                        <th></th>
                                        <th>Ref#</th>
                                        <th>Company Name</th>
                                        <th>Email</th>
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th>Price/Qty</th>
                                        <th>Lead Time</th>
                                        <th>Product Remark</th>
                                        <th>Followup Remark</th>
                                        <th>Followup Remark</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="tabapproved" class="tab-pane fade in">
                        @if (!SessionCookieManagement.IsInternational)
                        {
                            <div style="float: right;margin-right: 8px;margin: 10px 28px 5px 0;">
                                <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="Copyrecords('tblapproved')">Copy</a>
                                <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="Movetounapproved('tblapproved')">Approved</a>

                            </div>
                        }
                        <div class="clearfix"></div>
                        <!-- /.box-header -->
                        <div class="box-body divQuote" style="overflow:scroll;" id="divQuote">
                            <table id="tblapproved" class="table table-bordered table-striped" width="100%">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="chkapprovedAll" /></th>
                                        <th></th>
                                        <th></th>
                                        <th></th>
                                        <th>COA</th>
                                        <th>Ref#</th>
                                        <th>Company Name</th>
                                        <th>PO No</th>
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th>Price/Qty</th>

                                        <th>Lead Time</th>
                                        <th>Batch No</th>
                                        <th>Product Remark</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>


                    <div id="tabrfq" class="tab-pane fade in">
                        <div style="float: right;margin-right: 8px;margin: 10px 28px 5px 0;">
                            @*<a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="Copyrecords('tblrfq')">Copy</a>*@
                            <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="deleteRFQ()">Delete</a>
                            <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="GenerateQuoteRFQ()">Generate Quote</a>
                        </div>
                        <div class="clearfix"></div>
                        <!-- /.box-header -->
                        <div class="box-body divQuote" style="overflow:scroll;" id="divQuote">
                            <table id="tblrfq" class="table table-bordered table-striped" style="width:100%">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="chkrfqAll" /></th>
                                        <th>Email</th>
                                        <th>Full Name</th>
                                        <th>Company Name</th>
                                        <th>RFQ Date</th>
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th>Qty</th>
                                        <th></th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="tabrfqquote" class="tab-pane fade in">
                        @*<div style="float: right;margin-right: 8px;margin: 10px 28px 5px 0;">
                                <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="Copyrecords('example1')">Copy</a>
                                <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="MovetoPerformaInvoice('example1')">Performa Invoice</a>
                                <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="SaveData('example1')">Save</a>
                            </div>*@
                        <div style="margin: 8px 20px;box-shadow: 1px 1px 2px 2px #ececec;padding: 3px;">
                            <div class="form-group">
                                <div class="col-md-5" style="margin-top:6px">
                                    <div class="radio">
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios1" value="quoteid" checked="">
                                            Quote #
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="ponumber">
                                            PO #
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="company">
                                            Company
                                        </label>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="email">
                                            Email
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="productname">
                                            Product
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="cas">
                                            CAS #
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="cat">
                                            CAT #
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-4" style="margin-top:9px">
                                    <div>
                                        <input class="form-control" id="allsearchbox" type="text" placeholder="Enter search string" style="width: 180px; float: left">
                                        <select class="form-control" id="allddlexportdist" style="width:120px; float:left">
                                            <option value="">--Select--</option>
                                            <option value="Domestic">Domestic</option>
                                            <option value="Export">Export</option>
                                        </select>
                                        <a href="javascript:void(0)" style="float:left;margin-left:8px;" class="btn btn-primary" onclick="$('#example1').DataTable().draw()">Search</a>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                        <!-- /.box-header -->
                        <div class="box-body divQuote" style="overflow:scroll;">

                            <table id="tblrfqquote" class="table table-bordered table-striped" style="width:100%">
                                <thead>
                                    <tr>
                                        <th> <input type="checkbox" id="chkquotationallAll" /></th>
                                        <th> <input type="checkbox" id="chksecondallAll" /> </th>
                                        <th></th>
                                        <th></th>
                                        <th>Ref#</th>
                                        <th>Company Name</th>
                                        <th>PO No</th>
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th>Price/Qty</th>
                                        <th>Final Price</th>
                                        <th>Lead Time</th>
                                        <th>Batch No</th>
                                        <th>COA</th>
                                        <th>Activity Status</th>
                                        <th>Product Remark</th>
                                        <th>Followup Remark</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="tabpark" class="tab-pane fade in">
                        <div style="    float: right;margin-right: 8px;margin: 10px 28px 5px 0;">
                            <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="Copyrecords('example1')">Copy</a>
                        </div>
                        <div class="clearfix"></div>
                        <!-- /.box-header -->
                        <div class="box-body divQuote" style="overflow:scroll;">
                            <table id="tblpark" class="table table-bordered table-striped" style="width:100%">
                                <thead>
                                    <tr>
                                        <th> <input type="checkbox" id="chkquotationallAll" /></th>
                                        <th> <input type="checkbox" id="chksecondallAll" /> </th>
                                        <th></th>
                                        <th></th>
                                        <th>Ref#</th>
                                        <th>Company Name</th>
                                        <th>PO No</th>
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th>Price/Qty</th>
                                        <th>Lead Time</th>
                                        <th>Batch No</th>
                                        <th>Product Remark</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="tabmaster" class="tab-pane fade in">
                        <div style="float: right;margin-right: 8px;margin: 10px 28px 5px 0;">
                            <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="Copyrecords('tblmaster')">Copy</a>
                            @*<a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="Movetoapproved('tblmaster')">Move to Approved</a>
                                <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="ParkAll('tblmaster')">Park All</a>*@
                        </div>
                        <div style="margin: 8px 20px;box-shadow: 1px 1px 2px 2px #ececec;padding: 3px;">
                            <div class="form-group">
                                <div class="col-md-5" style="margin-top:6px">
                                    <div class="radio">
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios1" value="quoteid" checked="">
                                            Quote #
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="ponumber">
                                            PO #
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="company">
                                            Company
                                        </label>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="email">
                                            Email
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="productname">
                                            Product
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="cas">
                                            CAS #
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="cat">
                                            CAT #
                                        </label>
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="api">
                                            API
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-4" style="margin-top:9px">
                                    <div>
                                        <input class="form-control" id="allsearchbox" type="text" placeholder="Enter search string" style="width:300px; float:left">
                                        <a href="javascript:void(0)" style="float:left;margin-left:8px;" class="btn btn-primary" onclick="$('#tblmaster').DataTable().draw()">Search</a>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                        @*<div class="container row " style="padding-top:20px">


                                <div class="form-group">
                                    <div class="col-md-1">
                                        <label style="padding-top: 6px;">Company:</label>
                                    </div>
                                    <div class="col-md-3">
                                        <select id="ddlpendist" name="ddlpendist" class="form-control">
                                            <option value="">--Select--</option>
                                        </select>
                                    </div>
                                    <div class="col-md-1">
                                        <label style="padding-top: 6px;">Date:</label>
                                    </div>
                                    <div class="col-md-2">
                                        <input type="text" id="pendistdate" name="pendistdate" style="width:100px" class="form-control" />
                                    </div>
                                    <div class="col-md-1">
                                        <label style="padding-top: 6px;">Type:</label>
                                    </div>
                                    <div class="col-md-2">
                                        <select id="ddlpendisttype" name="ddlpendisttype" class="form-control">
                                            <option value="">--Select--</option>
                                            <option value="Domestic">Domestic</option>
                                            <option value="Export">Export</option>
                                        </select>
                                    </div>
                                    <div class="col-md-1" style="    padding-top: 7px;">
                                        <a href="javascript:void(0)" onclick="$('#tblmaster').DataTable().draw()"><i class="fa fa-search"></i></a>
                                    </div>
                                </div>
                            </div>*@
                        <div class="clearfix"></div>
                        <!-- /.box-header -->
                        <div class="box-body divQuote" style="overflow:scroll;" id="divQuote">
                            <table id="tblmaster" class="table table-bordered table-striped" style="width:100%">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="chktobeAll" /></th>
                                        <th></th>
                                        <th></th>
                                        <th></th>
                                        <th>Ref#</th>
                                        <th>Company Name</th>
                                        <th>PO No</th>
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th>Price/Qty</th>

                                        <th>Lead Time</th>
                                        <th>Batch No</th>
                                        <th>Product Remark</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="tabproformainvoice" class="tab-pane fade in">
                        <div class="clearfix"></div>
                        <!-- /.box-header -->
                        <div class="box-body divQuote" style="overflow:scroll;">
                            <table id="tblpoforma" class="table table-bordered table-striped" style="width:100%">
                                <thead>
                                    <tr>
                                        <th>Invoice #</th>
                                        <th>Invoice Date</th>
                                        <th>Company Name</th>
                                        <th>Customer PO #</th>
                                        <th>Ship Country</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="tabsapdata" class="tab-pane fade in">

                        <div style="margin: 8px 20px;box-shadow: 1px 1px 2px 2px #ececec;padding: 3px;">
                            <div class="form-group">
                                <div class="col-md-5" style="margin-top:6px">
                                    <div class="radio">
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios1" value="quoteid" checked="">
                                            Quote #
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="ponumber">
                                            PO #
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="company">
                                            Company
                                        </label>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="email">
                                            Email
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="productname">
                                            Product
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="cas">
                                            CAS #
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="cat">
                                            CAT #
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-4" style="margin-top:9px">
                                    <div>
                                        <input class="form-control" id="allsearchbox" type="text" placeholder="Enter search string" style="width:300px; float:left">
                                        <a href="javascript:void(0)" style="float:left;margin-left:8px;" class="btn btn-primary" onclick="$('#tblsapdata').DataTable().draw()">Search</a>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </div>
                        <div class="clearfix"></div>

                        <!-- /.box-header -->
                        <div class="box-body divQuote" style="overflow:scroll;" id="divQuote">
                            <table id="tblsapdata" class="table table-bordered table-striped" style="width:100%">
                                <thead>
                                    <tr>
                                        <th>
                                            SAPSONo
                                        </th>
                                        @*<th>SAPSODocEntry</th>
                                            <th>SAPSOLId</th>*@
                                        <th>Ref#</th>
                                        <th>Company Name</th>
                                        <th>PO No</th>
                                        <th>PDF</th>
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th>Price/Qty</th>
                                        <th>Lead Time</th>
                                        <th>Batch No</th>
                                        <th>Product Remark</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<script>
    var settings = {
        "async": true,
        "crossDomain": true,
        "url": "https://api.chemicalize.com/v1/search/structure",
        "method": "POST",
        "headers": {
            "x-api-key": "sk_4cabaabe9afb479889e760162bb9e52f",
            "content-type": "application/json",
        },
        "processData": false,
        "data": "{\"searchType\": \"SUBSTRUCTURE\", \"query\": \"C1=CC=CC=C1\", \"target\": \"aspirin\"}"
    }

    $.ajax(settings).done(function (response) {
        console.log(response);
    });

    var xhr = new XMLHttpRequest();
    var params = 'smiles=CN1C(C2=CC(N=C(CCC)N3)=C3C(C)=C2)=NC4=C1C=CC=C4';
    xhr.open('POST', 'http://www.chemspider.com/InChI.asmx/SMILESToInChI', true);

    //Send the proper header information along with the request
    xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');

    xhr.onload = function () {//Call a function when the state changes.
        if (xhr.status == 200) {
            alert(this.responseText);
        }
    }
    xhr.send(params);
    //$.ajax({
    //    type: "POST",
    //    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
    //    url: "http://www.chemspider.com/InChI.asmx/SMILESToInChI",
    //    data: {
    //        smiles: "CN1C(C2=CC(N=C(CCC)N3)=C3C(C)=C2)=NC4=C1C=CC=C4"
    //    },
    //    success: function (results) {
    //        alert(results);
    //    }
    //});


    $(".divQuote").css('height', window.innerHeight - 200);
    $(document).ready(function () {

        $('input[name="filteroptionsRadios"]').on("click", function (e) {
            GetFollowupOverview($(this).val());
        });
        
        $('#flthomestartdate').datepicker({
            format: 'dd/mm/yyyy'
        });
        $('#flthomeenddate').datepicker({
            format: 'dd/mm/yyyy'
        });
        $('#penuserdate').datepicker({
            format: 'dd/mm/yyyy'
        });
        $('#followstartdate').datepicker({
            format: 'dd/mm/yyyy'
        });
        $('#followenddate').datepicker({
            format: 'dd/mm/yyyy'
        });
        var d = new Date();
        d.setDate(d.getDate() - 8);

        $("#followstartdate").datepicker("setDate", new Date('2023/06/21'));
        $("#followenddate").datepicker("setDate", new Date());


        $.ajax({
            url: '/Form/GetAllCompanydata',
            data: {},
            type: 'GET',
            traditional: true, // add this
            dataType: 'json',
            async: false,
            success: function (datass) {
                allCompanyList = datass;
            }
        });
        //console.log('inside the function');
        var alltbl = $('#example1').DataTable({
            //"fixedHeader": {
            //    header: true
            //},
            "searching": false,
            "ordering": false,
            "processing": true, // for show progress bar
            "serverSide": true, // for process server side
            "filter": true, // this is for disable filter (search box)
            "orderMulti": false, // for disable multiple column at once
            "pageLength": 25,
            //"lengthMenu": [[10, 25, 50, 100, 1000, -1], [10, 25, 50,100, 1000, "All"]],
            "language": { processing: '<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span> ' },
            "ajax": {
                "url": "../Form/LoadQuotationData?tabname=all",
                "type": "POST",
                "datatype": "json",
                "data": function (d) {
                    d.radiobuton = $("#home").find('input[name="filterAll"]:checked').val();
                    d.searchbox = $("#home").find("#allsearchbox").val();
                    d.ddlexportdist = $("#home").find("#allddlexportdist").val();
                    d.GeographicalId = $("#home").find("#GeographicalId").val();
                    d.ddlcontrolled = $("#home").find("#allddlcontrolled").val();
                    d.ddlpoReceived = $("#home").find("#allddlpoReceived").val();
                    d.ddlcsinstock = $("#home").find("#allddlcsinstock").val();
                    d.ddluserdist = $("#home").find("#allddluserdist").val(); 
                    d.ddlimportant = $("#home").find("#allddlimportant").val(); 
                    d.flthomestartdate = $("#home").find("#flthomestartdate").val(); 
                    d.flthomeenddate = $("#home").find("#flthomeenddate").val(); 
                      
                }
            },
            "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                if (aData.IsImportedQuote && aData.MoveToDispatch != true) {
                    $('td', nRow).css('background-color', 'rgb(217, 237, 249)');
                }
                if (aData.IsOnHold === true) {
                    $('td', nRow).css('background-color', 'rgb(255 255 146)');
                }

                if (aData.IsControlledSubstance) {
                    $('td', nRow).css('color', 'red');
                }
            },
            "fnDrawCallback": function (oSettings) {
                var txtallfollowAllcount = 0;
                var txtallfollowPOcount = 0;
                var txtallfollowHoldcount = 0;
                var txtallfollowDispatchCount = 0;
                if (oSettings.json.overviewdata !== null) {
                    var strfollowup = "<div class='col-md-2 tiles tilesall' data-value='' style='width:15.9%;min-height:100px;text-align:center; color: #fff;padding: 7px;margin:5px; background-color: rgb(60 141 188)'>All</br><div style='font-size: 18px;position: absolute;bottom: 10px;width: 100%;text-align: center;background: rgb(54 127 169);margin-left: -7px;margin-bottom: -10px;color:#fff' id='txtallfollowcount'></div></div>";
                    $(oSettings.json.overviewdata).each(function (i, v) {
                        strfollowup += "<div class='col-md-2 tiles tilesall' style='width:15.9%;min-height:100px;text-align:center; color: #fff;padding: 7px;margin:5px; background-color: rgb(60 141 188)' data-value='" + v.CompanyName + "'>" + v.CompanyName + "</br><div style='font-size: 18px;position: absolute;bottom: 10px;width: 100%;text-align: center;background: rgb(54 127 169);margin-left: -7px;margin-bottom: -10px;color:#fff'>T:" + v.Total + "/P:" + v.POCount + "/H:" + v.HoldCount + "/D:" + v.DispatchCount +"</div></div>";
                        txtallfollowAllcount += parseInt(v.Total);
                        txtallfollowPOcount += parseInt(v.POCount);
                        txtallfollowHoldcount += parseInt(v.HoldCount);
                        txtallfollowDispatchCount += parseInt(v.DispatchCount); 
                    });

                    $("#collapseAll").html(strfollowup + "<div class='clearfix'></div>"); $("#txtallfollowcount").html("T:" + txtallfollowAllcount + "/P:" + txtallfollowPOcount + "/H:" + txtallfollowHoldcount + "/D:" + txtallfollowDispatchCount);
                }
                $(document).on("click", ".tilesall", function () {
                    var value = $(this).attr("data-value");
                    if (value === '') {
                        $("#home").find("#allsearchbox").val("");
                        $('#example1').DataTable().draw();
                    }
                    else {
                        $("#home").find('input[name=filterAll]:nth(2)').prop("checked", "checked");

                        $("#home").find("#allsearchbox").val(value);
                        $('#example1').DataTable().draw();
                    }
                });
                $("#chkquotationallAll").click(function () {
                    if ($(this).is(":checked")) {
                        $("#example1").find('.clsclubQuote').each(function () {
                            $(this).prop("checked", true);
                        });
                    }
                    else {
                        $("#example1").find(".clsclubQuote").each(function () {
                            $(this).prop("checked", false);
                        });
                    }
                });

                $("#chksecondallAll").click(function () {
                    if ($(this).is(":checked")) {
                        $("#example1").find('.clsMoveProject').each(function () {
                            $(this).prop("checked", true);
                        });
                    }
                    else {
                        $("#example1").find(".clsMoveProject").each(function () {
                            $(this).prop("checked", false);
                        });
                    }
                });

                var api = this.api();
                var rows = api.rows({ page: 'current' }).nodes();
                var last = null;

                api.column(4, { page: 'current' }).data().each(function (group, i) {
                    if (last !== group) {
                        $(rows).eq(i).before(

                            '<td class="group" colspan="18" style="' + (rows[i].attributes["data-IsConversionReport"] != null && rows[i].attributes["data-IsConversionReport"].value == "true" ? "BACKGROUND-COLOR:#95647d" : "BACKGROUND-COLOR:#3c8dbc") + ';font-weight:700;color:#fff;padding:10px;"><a style="color: #fff; text-decoration: underline;" href="/Form/Quote/' + rows[i].attributes["data-QuoteId"].value + '">' + group + '</a>' + " | " + rows[i].attributes["data-company"].value + " | " + rows[i].attributes["data-email"].value + ' | <a style="color: #fff; text-decoration: underline;" href="javascript:void(0)" onclick="GetAuditLogForQuote(' + rows[i].attributes["data-QuoteId"].value + ')"> LOG </a> <div class="clsminiadmin" style="float:right"><a href="javascript:void(0)" style="color:#fff" onclick="Quote.deleteQuote(' + rows[i].attributes["data-QuoteId"].value + ')">Delete</a> | <a style="color:#fff" href="javascript:void(0)" onclick="Quote.Park(' + rows[i].attributes["data-QuoteId"].value + ')">Park</a></div></td>'
                        );
                        last = group;
                    }
                });

                setTimeout(function () {
                    alltbl.columns.adjust();
                }, 2000);

            },
            "columnDefs":
                [
                    { targets: 4, visible: false },
                    { targets: 5, visible: false }
                ],
            "createdRow": function (row, data, dataIndex) {
                // Set the data-status attribute, and add a class
                $(row).attr('id', 'tr_' + data.QuoteDetailsId);
                $(row).attr('data-email', data.EmailAddress);
                $(row).attr('data-company', data.CompanyName);
                $(row).attr('data-pono', data.PONumber);
                $(row).attr('data-QuoteId', data.QuoteId);
                $(row).attr('data-IsConversionReport', data.IsConversionReport);
            },
            "columns": [
                { "data": "ChkFirstRow", "autoWidth": true, "orderable": false },
                { "data": "MoveToProjectText", "autoWidth": true, "orderable": false },
                { "data": "DownloadSampleRow", "autoWidth": true, "orderable": false },
                { "data": "DownloadRow", "autoWidth": true, "orderable": false },
                { "data": "Ref", "name": "Ref", "width": "100px" },
                { "data": "CompanyName", "name": "CompanyName", "width": "200px" },
                { "data": "PONumberText", "name": "PONumber", "width": "100px" },
                { "data": "ProductNameText", "name": "ProductName", "width": "18%" },
                { "data": "CASNoText", "name": "CASNo", "width": "6%" },
                { "data": "CATNoText", "name": "CATNo", "width": "6%" },
                { "data": "PriceText", "name": "Price", "width": "250px" },
                { "data": "FinalPriceText", "name": "FinalPrice", "width": "250px" },
                { "data": "LeadTimeText", "name": "LeadTime", "autoWidth": true },
                { "data": "AdditionalBatchNoText", "name": "AdditionalBatchNoText" },
                { "data": "COAText", "name": "COAText" },
                { "data": "ActivityStatus", "name": "ActivityStatus" },
                { "data": "ProductRemark", "orderable": false, "width": "100px" },
                { "data": "AddTestCostRemark", "orderable": false, "width": "100px" },
                { "data": "FollowUpDescText", "orderable": false, "swidth": "300px" },
                { "data": "ActionRow", "orderable": false, "width": "130px" }
            ]
        });
    });
    setTimeout(function () {
        LoadDropdownOfPendingDistAndPendingUser();
    }, 500);


    function SAPSync(poNumber) {
        $.ajax({
            type: "GET",
            url: '/Form/SyncSAPData?poNumber=' + poNumber,
            data: {},
            async: true,
            success: function (data) {
                $('#tblsapdata').DataTable().ajax.reload(null, false);
            }
        });
    }

    function LoadDropdownOfPendingDistAndPendingUser() {
        $.ajax({
            type: "GET",
            url: '/Form/LoadCompanyNamefromQuotationtab?tabName=tobe',
            data: {},
            async: true,
            success: function (data) {
                var str = "<option value=''>--Select--</option>";
                $(data).each(function (i, v) {
                    str += "<option value='" + v + "'>" + v + "</option>";
                })
                $("#ddlpenuser").html(str);
            }
        });

        $.ajax({
            type: "GET",
            url: '/Form/LoadCompanyNamefromQuotationtab?tabName=tobedistributor',
            data: {},
            async: true,
            success: function (data) {
                var str = "<option value=''>--Select--</option>";
                $(data).each(function (i, v) {
                    str += "<option value='" + v + "'>" + v + "</option>";
                })
                $("#ddlpendist").html(str);
            }
        });
    }

    function EditProductDetails(id) {
        var menulink = '';
        $('.nav').find('li').each(function () {
            if ($(this).hasClass('active')) {
                menulink = $(this).find('a').attr('data-tabname');
            }
        });

        var tableId = '';
        if (menulink === 'all') {
            tableId = 'example1';
        }
        else if (menulink === 'tobe') {
            tableId = 'tbltobe';
        }
        else if (menulink === 'tobedistinutor') {
            tableId = 'tbltobedistributor';
        }
        else if (menulink === 'followup') {
            tableId = 'tblfollowup';
        }
        else if (menulink === 'auction') {
            tableId = 'tblauction';
        }
        else {
            tableId = 'tblinhouse';
        }

        if (tableId === "tblfollowup") {
            $('#' + tableId).find("#lblfollowUpRemark_" + id).hide();
            $('#' + tableId).find("#lblcontactdetail_" + id).hide();
            $('#' + tableId).find("#contactdetail_" + id).show();
            $('#' + tableId).find("#followUpRemark_" + id).show();
        }
        else {
            $('#' + tableId).find("#tr_" + id).find("label").hide();
            $('#' + tableId).find("#tr_" + id).find("input").show();
        }
        $('#' + tableId).find("#tr_" + id).find("#lblcatno").show();

        $('#' + tableId).find("#edit_" + id).hide();
        $('#' + tableId).find("#save_" + id).show();

        $('#productname_' + id).val(decodeURIComponent(JSON.parse('"' + $('#productname_' + id).val().replace(/\"/g, '\\"') + '"')));
    }

    function SaveProductDetails(id) {
        var menulink = '';
        $('.nav').find('li').each(function () {
            if ($(this).hasClass('active')) {
                menulink = $(this).find('a').attr('data-tabname');
            }
        });

        var tableId = '';
        if (menulink === 'all') {
            tableId = 'example1';
        }
        else if (menulink === 'tobe') {
            tableId = 'tbltobe';
        }
        else if (menulink === 'tobedistinutor') {
            tableId = 'tbltobedistributor';
        }
        else if (menulink === 'followup') {
            tableId = 'tblfollowup';
        }
        else {
            tableId = 'tblinhouse';
        }
        var ponumber = $('#' + tableId).find("#ponumber_" + id).val();
        var productname = $('#' + tableId).find("#productname_" + id).val();
        var price = $('#' + tableId).find("#price_" + id).val();
        var finalprice = $('#' + tableId).find("#finalprice_" + id).val();
        var casno = $('#' + tableId).find("#casno_" + id).val();
        var catno = $('#' + tableId).find("#catno_" + id).val();
        var leadtime = $('#' + tableId).find("#leadtime_" + id).val();
        var ProductRemark = $('#' + tableId).find("#ProductRemark_" + id).val();
        var followUpRemark = $('#' + tableId).find("#followUpRemark_" + id).val();
        var followUpRemarkSecond = $('#' + tableId).find("#followUpRemarkSecond_" + id).val();
        var contactdetail = $('#' + tableId).find("#contactdetail_" + id).val();

        var coa = $('#' + tableId).find("#coa_" + id).val();
        var activityStatus = $('#' + tableId).find("#activityStatus_" + id).val();
        $.ajax({
            //url: '/Form/UpdateProductInfo?ProductName=' + productname + '&casno=' + casno + '&catNo=' + catno + '&price=' + price + '&leadtime=' + leadtime + '&id=' + id + '&ponumber=' + ponumber + '&productremark=' + ProductRemark + '&followUpRemark=' + followUpRemark + '&followUpRemarkSecond=' + followUpRemarkSecond,
            url: '/Form/UpdateProductInfo',
            data: {
                ProductName: productname,
                casno: casno,
                catNo: catno,
                price: price,
                finalprice: finalprice,
                leadtime: leadtime,
                id: id,
                ponumber: ponumber,
                productremark: ProductRemark,
                followUpRemark: followUpRemark,
                followUpRemarkSecond: followUpRemarkSecond,
                contactdetail: contactdetail,
                actionname: menulink,
                coa: coa,
                ActivityStatus: activityStatus
            },
            type: 'POST',
            success: function (data) {
                if (data.success) {
                    $('#' + tableId).DataTable().ajax.reload(null, false);
                    /*window.location.href = "/Form/QuotationList";*/
                }
            }
        });
    }

    //Move to InHouse
    function MoveToInHouse() {
        var menulink = '';
        $('.nav').find('li').each(function () {
            if ($(this).hasClass('active')) {
                menulink = $(this).find('a').attr('data-tabname');
            }
        });

        var tableId = '';
        if (menulink === 'all') {
            tableId = 'example1';
        }
        else if (menulink === 'tobe') {
            tableId = 'tbltobe';
        }
        else if (menulink === 'tobedistinutor') {
            tableId = 'tbltobedistributor';
        }
        else if (menulink === 'followup') {
            tableId = 'tblfollowup';
        }
        else {
            tableId = 'tblinhouse';
        }
        var ids = [];

        $('#' + tableId).find('.clsMoveProject').each(function () {
            if ($(this).is(':checked')) {
                ids.push($(this).val());
            }
        });

        if (ids.length === 0) {
            toastr.error("Please select atleast one Product");
            return false;
        }

        $.ajax({
            url: '/Form/MoveToInHouse',
            data: { id: ids },
            type: 'POST',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                if (data.success) {
                    toastr.success("You have moved selected products into in-house list.");

                    window.location.reload(true);
                }
            }
        });
    }

    ///Move To Club Quote
    function MoveToClubQuote() {
        var ids = [];
        var menulink = '';
        $('.nav').find('li').each(function () {
            if ($(this).hasClass('active')) {
                menulink = $(this).find('a').attr('data-tabname');
            }
        });

        var tableId = '';
        if (menulink === 'all') {
            tableId = 'example1';
        }
        else if (menulink === 'tobe') {
            tableId = 'tbltobe';
        }
        else if (menulink === 'tobedistinutor') {
            tableId = 'tbltobedistributor';
        }
        else if (menulink === 'followup') {
            tableId = 'tblfollowup';
        }
        else {
            tableId = 'tblinhouse';
        }
        var ids = [];

        $('#' + tableId).find('.clsclubQuote').each(function () {
            if ($(this).is(':checked')) {
                ids.push($(this).val());
            }
        });

        if (ids.length === 0) {
            toastr.error("Please select atleast one Product");
            return false;
        }

        $.ajax({
            url: '/Form/MoveToClubQuote',
            data: { id: ids },
            type: 'POST',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                if (data.success) {
                    toastr.success("You have moved selected products into club quotation list.");
                    // window.location.href = "/Form/Quotation/0?isclubquote=True";

                    $('.clsclubQuote').each(function () {
                        if ($(this).is(':checked')) {
                            $(this).prop('checked', false);
                        }
                    });
                }
            }
        });
    }

    function MovetoPerformaInvoice(tableId) {
        var ids = [];
        $('#' + tableId).find('.clsclubQuote').each(function () {
            if ($(this).is(':checked')) {
                ids.push($(this).val());
            }
        });

        if (ids.length === 0) {
            toastr.error("Please select atleast one Product");
            return false;
        }

        $.ajax({
            url: '/Form/MoveToPI',
            data: { id: ids },
            type: 'POST',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                if (data.success) {
                    toastr.success(data.message);
                }
                else {
                    toastr.success(data.message);
                }
            }
        });
    }
    var allCompanyList = [];
    var compNameList = [];

    ///Movbe to project screen
    function MoveToProject() {
        var ids = [];
        compNameList = [];
        var countrytype = [];
        var menulink = '';
        $('.nav').find('li').each(function () {
            if ($(this).hasClass('active')) {
                menulink = $(this).find('a').attr('data-tabname');
            }
        });

        var tableId = '';
        if (menulink === 'all') {
            tableId = 'example1';
        }
        else if (menulink === 'tobe') {
            tableId = 'tbltobe';
        }
        else if (menulink === 'tobedistinutor') {
            tableId = 'tbltobedistributor';
        }
        else {
            tableId = 'tblinhouse';
        }

        $('#' + tableId).find('.clsMoveProject').each(function () {
            if ($(this).is(':checked')) {
                ids.push($(this).val());
                if ($(this).attr("data-export") !== "") {
                    countrytype.push($(this).val());
                }
            }
        });

        if (ids.length === 0) {
            toastr.error("Please select atleast one Product");
            return false;
        }
        if (ids.length !== countrytype.length) {
            toastr.error("Some quote has not selected export or domastic. Please select it.");
            return false;
        }
        var proorInvo = 'project';
        var POAvailable = [];
        var str = "";
        var branchName = $("#tr_" + ids[0] + " td:nth-child(2)").find('input').attr("data-branchname");
        if (branchName !== '' && branchName !== null && branchName !== undefined) {
            var spltbranch = branchName.split(',');
            var bstr = '';
            for (var i = 0; i < spltbranch.length; i++) {
                bstr += '<span><input type="checkbox" class="clsbranch" value="' + spltbranch[i] + '" />  ' + spltbranch[i] + '     </span>';
            }
            str += "<div><b>Location: </b> " + bstr + "</div> <br>";
        }


        $.ajax({
            url: '/Form/GetQuoteDetailsByQuoteDetailsId?quotedetailsid=' + ids[0],
            data: {},
            type: 'GET',
            success: function (data) {

                var comp = "<select id='popCompanyid'>";
                $(data.CompanyList).each(function (i, v) {
                    comp += "<option value='" + v.Value + "'>" + v.Text + "</option>";
                });
                comp += "</select>";

                var country = "";
                $(data.CountryList).each(function (i, v) {
                    country += "<option value='" + v.Value + "'>" + v.Text + "</option>";
                });
                country += "";

                var purtech = '<div class="col-md-6"><label>Purchase</label><br>';
                purtech += '<input type="text" id="popPurchaseName" name="PurchaseName" placeholder="Name" style="margin-bottom: 5px;padding: 2px;">';
                purtech += '<input type="text" id="popPurchaseEmail" name="PurchaseEmail" placeholder="Email" style="margin-bottom: 5px;padding: 2px;">';
                purtech += '<input type="text" id="popPurchaseContactNo" name="PurchaseContactNo" placeholder="Contact No" style="margin-bottom: 5px;padding: 2px;">';
                purtech += '<input type="text" id="popPurchaseAddress" name="PurchaseAddress" placeholder="Address" style="margin-bottom: 5px;padding: 2px;">';
                purtech += '<input type="text" id="popPurchaseCity" name="PurchaseCity" placeholder="City" style="margin-bottom: 5px;padding: 2px;">';
                purtech += '<select  id="popPurchaseCountry" style="width:39%;" name="PurchaseCountry"><option value="">--Select--</option>' + country + '</select>';
                purtech += '</div>';
                purtech += '<div class="col-md-6">';
                purtech += '<label>Technical</label><br>';
                purtech += '<input type="text" style="margin-bottom: 5px;padding: 2px;" id="popTechnicalName" name="TechnicalName" placeholder="Name">';
                purtech += '<input type="text" id="popTechnicalEmail" name="popTechnicalEmail" placeholder="Email" style="        margin-bottom: 5px;padding: 2px;">';
                purtech += '<input type="text" id="popTechnicalContactNo" name="TechnicalContactNo" placeholder="Contact No" style="        margin-bottom: 5px;padding: 2px;">';
                purtech += '<input type="text" id="popTechnicalAddress" name="TechnicalAddress" placeholder="Address" style="        margin-bottom: 5px;padding: 2px;">';
                purtech += '<input type="text" id="popTechnicalCity" name="TechnicalCity" placeholder="City" style="        margin-bottom: 5px;padding: 2px;">';
                purtech += '<select  id="popTechnicalCountry" name="TechnicalCountry" style="width:39%;" ><option value="">--Select--</option>' + country + '</select>';
                purtech += '</div>';
                var sstr = "<table>";
                sstr += "<tr> <td><b>PO Number</b></td><td> " + data.PONo + " </td> <td><b>PO Received</b></td><td><input type='text' id='popuppodate' value='" + data.POdate + "' />  </td>  <td><b>PO Link</b></td><td><input type='text' id='popuppourl' value='" + data.POLink + "' />  </td></tr>";
                sstr += "<tr> <td><b>Company Name</b></td><td  colspan='3'> " + comp + "  </td>";
                sstr += "<td><b>PO Copy</b></td><td><input id='filepocopy' type='file' /></td> </tr>";
                sstr += "<tr> <td><b>Purchase /Technical</b></td><td  colspan='6'> " + purtech + "</td> </tr>";
                sstr += "<tr> </tr>";
                sstr += "</table>";

                sstr += "<table><tr><th>Sr No</th><th>PO No</th><th>Company Name</th><th>Product Name</th><th>CAS No</th><th>CAT No</th> <th>On Hold</th></tr>";
                $(ids).each(function (i, v) {
                    var poNo = $("#tr_" + v + " td:nth-child(5)").text();
                    var compName = $("#tr_" + v).attr("data-company");
                    if (compNameList.indexOf(compName) === -1) {
                        compNameList.push(compName);
                    }
                    var productName = $("#tr_" + v + " td:nth-child(6)").text();
                    var casNo = $("#tr_" + v + " td:nth-child(7)").text();
                    var catNo = $("#tr_" + v + " td:nth-child(8)").text();
                    var isAlreadyInProject = $("#tr_" + v + " td:nth-child(2)").find('input').attr("data-alreadyinprojectscreen");
                    if (isAlreadyInProject === "True") {
                        var added = false;
                        $.map(POAvailable, function (elementOfArray, indexInArray) {
                            if (elementOfArray == poNo) {
                                added = true;
                            }
                        });
                        if (!added) {
                            POAvailable.push(poNo);
                        }
                    }
                    var isAlreadyInInvoice = $("#tr_" + v + " td:nth-child(2)").find('input').attr("data-alreadyInInvoiceScreen");
                    if (isAlreadyInInvoice === "True") {
                        proorInvo = 'invoice';
                    }

                    sstr += "<tr><td>" + (i + 1) + "</td><td>" + poNo + "</td><td>" + compName + "</td><td>" + productName + "</td><td>" + casNo + "</td><td>" + catNo + "</td><td><input type='checkbox' class='clsonholdmovetoproject' value='" + v + "' id='onhold_" + v + "' /> </td></tr>";
                });
                sstr += "</table>";

                if (compNameList.length > 1) {
                    str += '<div><b>Company Name:</b> <select style="width: 50%" id="ddlcompdata">';
                    $(allCompanyList).each(function (i, v) {
                        str += '<option value="' + v.Value + '">' + v.Text + '</option>';
                    });
                    str += '</select></div> <br><br>';
                }
                str += sstr;

                if (POAvailable.length > 0) {
                    str = "<p style='color:red;font-size: 15px;font-weight: bold;'>Note: " + POAvailable.join() + " PO Already available in project screen.</p>" + str;
                }

                swal({
                    /*title: "Are you sure want to move this quotation product to project screen?",*/
                    title: "",
                    text: str,
                    type: "warning",
                    showCancelButton: true,
                    html: true,
                    customClass: 'swalwide swalbig',
                    confirmButtonClass: "btn-danger",
                    confirmButtonText: "Yes, move it!",
                    cancelButtonText: "No, cancel!",
                    closeOnConfirm: true,
                    closeOnCancel: true
                },
                    function (isConfirm) {
                        if (isConfirm) {
                            var cID = 0;
                            if (compNameList.length > 1) {
                                cID = $('#ddlcompdata').val();
                            }
                            cID = $("#popCompanyid").val();
                            var PODate = $("#popuppodate").val();
                            var POUrl = $("#popuppourl").val();
                            var bName = '';
                            $(".clsbranch").each(function (i, v) {
                                if ($(this).is(":checked")) {
                                    bName += $(this).val();
                                }
                            });

                            var isOnHold = [];
                            $(".clsonholdmovetoproject").each(function () {
                                if ($(this).is(':checked')) {
                                    isOnHold.push($(this).val());
                                }
                            });
                            debugger;
                            var fileUpload = $("#filepocopy").get(0);
                            var files = fileUpload.files;

                            var formData = new FormData();

                            // Looping over all files and add it to FormData object
                            for (var i = 0; i < files.length; i++) {
                                formData.append('filepocopy', files[i]);
                            }
                            debugger;
                            var intIds = [];
                            $(ids).each(function (i, v) {
                                intIds.push(parseInt(v));
                            });
                            formData.append("qdids", intIds);
                            formData.append("bName", bName);
                            formData.append("compId", cID);
                            formData.append("isOnHold", isOnHold);
                            formData.append("popPurchaseName", $("#popPurchaseName").val());
                            formData.append("popPurchaseEmail", $("#popPurchaseEmail").val());
                            formData.append("popPurchaseContactNo", $("#popPurchaseContactNo").val());
                            formData.append("popPurchaseAddress", $("#popPurchaseAddress").val());
                            formData.append("popPurchaseCity", $("#popPurchaseCity").val());
                            formData.append("popPurchaseCountry", $("#popPurchaseCountry").val());
                            formData.append("popTechnicalEmail", $("#popTechnicalEmail").val());
                            formData.append("popTechnicalContactNo", $("#popTechnicalContactNo").val());
                            formData.append("popTechnicalAddress", $("#popTechnicalAddress").val());
                            formData.append("popTechnicalCity", $("#popTechnicalCity").val());
                            formData.append("popTechnicalCountry", $("#popTechnicalCountry").val());
                            formData.append("popuppodate", PODate);
                            formData.append("popuppourl", POUrl);

                            $.ajax({
                                url: '/Form/MoveToProject',
                                data: formData,
                                type: 'POST',
                                traditional: true, // add this
                                /*dataType: 'json',*/
                                processData: false,
                                contentType: false,
                                success: function (data) {
                                    if (data.success) {
                                        $('#' + tableId).DataTable().ajax.reload(null, false);
                                    } else {
                                        toastr.error(data.message);
                                        return false;
                                    }
                                }
                            });

                        }
                    });

                $("#popCompanyid").val(data.CompanyId);
                $('#popuppodate').datepicker({
                    format: 'dd/mm/yyyy',
                    onSelect: function (dateText, inst) {

                    },
                    endDate: '+0d'
                })
            }
        });



    }

    function DeleteRFQQuote(rfqid) {
        swal({
            title: "Are you sure want to delete this RFQ product?",
            text: "",
            type: "warning",
            showCancelButton: true,
            html: true,
            customClass: 'swalwide',
            confirmButtonClass: "btn-danger",
            confirmButtonText: "Yes, delete it!",
            cancelButtonText: "No, cancel!",
            closeOnConfirm: true,
            closeOnCancel: true
        },
            function (isConfirm) {
                if (isConfirm) {
                    $.ajax({
                        url: '/Form/DeleteRFQQuoteData',
                        data: { id: rfqid },
                        type: 'POST',
                        traditional: true, // add this
                        dataType: 'json',
                        success: function (data) {
                            if (data.success) {
                                window.location.href = "/Form/QuotationList";
                                // $('#tblrfq').ajax.reload();
                            }
                        }
                    });

                }
            });
    }


    var tobeload = false;
    var tobedistload = false;
    var inhousequoload = false;
    var followupload = false;
    var auctionupload = false;
    var approvedload = false;
    var rfqtabload = false;
    var parktabload = false;
    var proformainvoiceload = false;
    var rfqquoteload = false;
    var masterload = false;
    function proformainvoicetab() {
        if (proformainvoiceload === false) {

            var poformatbl = $('#tblpoforma').DataTable({
                "ordering": false,
                "processing": true,
                "serverSide": true,
                "filter": true,
                "orderMulti": false,
                "pageLength": 25,
                "language": { processing: '<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span> ' },
                "ajax": {
                    "url": "../Form/LoadPoformaInvoiceData",
                    "type": "POST",
                    "datatype": "json"
                },
                "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                    if (aData.IsImportedQuote && aData.MoveToDispatch != true) {
                        $('td', nRow).css('background-color', 'rgb(217, 237, 249)');
                    }
                    if (aData.IsControlledSubstance) {
                        $('td', nRow).css('color', 'red');
                    }
                },
                "fnDrawCallback": function (oSettings) {
                    proformainvoiceload = true;

                    $("#chktobeAll").click(function () {
                        if ($(this).is(":checked")) {
                            $("#tblpark").find('.clsclubQuote').each(function () {
                                $(this).prop("checked", true);
                            });
                        }
                        else {
                            $("#tblpark").find(".clsclubQuote").each(function () {
                                $(this).prop("checked", false);
                            });
                        }
                    });
                    //var api = this.api();
                    //var rows = api.rows({ page: 'current' }).nodes();
                    //var last = null;

                    //api.column(4, { page: 'current' }).data().each(function (group, i) {
                    //    if (last !== group) {
                    //        $(rows).eq(i).before(
                    //            '<td class="group" colspan="13" style="BACKGROUND-COLOR:#3c8dbc;font-weight:700;color:#fff;padding:10px;"><a style="color: #fff; text-decoration: underline;" href="/Form/Quote/' + rows[i].attributes["data-QuoteId"].value + '">' + group + '</a>' + " | " + rows[i].attributes["data-company"].value + " | " + rows[i].attributes["data-email"].value + '  <div style="float:right" class="clsminiadmin"><a href="javascript:void(0)" style="color:#fff" onclick="Quote.deleteQuote(' + rows[i].attributes["data-QuoteId"].value + ')">Delete</a> | <a style="color:#fff" href="javascript:void(0)" onclick="Quote.unPark(' + rows[i].attributes["data-QuoteId"].value + ')">Resume</a></div></td>'
                    //        );
                    //        last = group;
                    //    }
                    //});

                    setTimeout(function () {
                        poformatbl.columns.adjust();
                    }, 2000);
                },
                "columnDefs":
                    [
                        //{ targets: 4, visible: false },
                        //{ targets: 5, visible: false }
                    ],
                "createdRow": function (row, data, dataIndex) {
                    // Set the data-status attribute, and add a class
                    $(row).attr('id', 'tr_' + data.QuoteDetailsId);
                    $(row).attr('data-company', data.CompanyName);
                    $(row).attr('data-QuoteId', data.QuoteId);
                    $(row).attr('data-email', data.EmailAddress);
                },
                "columns": [
                    { "data": "PerformaInvoiceNo", "autoWidth": true, "orderable": false },
                    { "data": "Courier", "autoWidth": true, "orderable": false },
                    { "data": "BillCompanyName", "autoWidth": true, "orderable": false },
                    { "data": "CustomerPoNo", "autoWidth": true, "orderable": false },
                    { "data": "ShipCountry", "name": "Ref", "width": "100px" },
                    { "data": "TrackingNo", "name": "CompanyName", "width": "200px" }
                ]

            });
        }
    }

    function parktab() {
        if (parktabload === false) {

            var parktabl = $('#tblpark').DataTable({
                //"fixedHeader": {
                //    header: true
                //},
                "ordering": false,
                "processing": true, // for show progress bar
                "serverSide": true, // for process server side
                "filter": true, // this is for disable filter (search box)
                "orderMulti": false, // for disable multiple column at once
                "pageLength": 25,
                "language": { processing: '<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span> ' },

                "ajax": {
                    "url": "../Form/LoadQuotationData?tabname=park",
                    "type": "POST",
                    "datatype": "json"
                },
                "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                    if (aData.IsImportedQuote && aData.MoveToDispatch != true) {
                        $('td', nRow).css('background-color', 'rgb(217, 237, 249)');
                    }
                    if (aData.IsControlledSubstance) {
                        $('td', nRow).css('color', 'red');
                    }
                },
                "fnDrawCallback": function (oSettings) {
                    parktabload = true;

                    $("#chktobeAll").click(function () {
                        if ($(this).is(":checked")) {
                            $("#tblpark").find('.clsclubQuote').each(function () {
                                $(this).prop("checked", true);
                            });
                        }
                        else {
                            $("#tblpark").find(".clsclubQuote").each(function () {
                                $(this).prop("checked", false);
                            });
                        }
                    });
                    var api = this.api();
                    var rows = api.rows({ page: 'current' }).nodes();
                    var last = null;

                    api.column(4, { page: 'current' }).data().each(function (group, i) {
                        if (last !== group) {
                            $(rows).eq(i).before(
                                '<td class="group" colspan="13" style="' + (rows[i].attributes["data-IsConversionReport"] != null && rows[i].attributes["data-IsConversionReport"].value == "true" ? "BACKGROUND-COLOR:#95647d" : "BACKGROUND-COLOR:#3c8dbc") + ';font-weight:700;color:#fff;padding:10px;"><a style="color: #fff; text-decoration: underline;" href="/Form/Quote/' + rows[i].attributes["data-QuoteId"].value + '">' + group + '</a>' + " | " + rows[i].attributes["data-company"].value + " | " + rows[i].attributes["data-email"].value + '  <div style="float:right" class="clsminiadmin"><a href="javascript:void(0)" style="color:#fff" onclick="Quote.deleteQuote(' + rows[i].attributes["data-QuoteId"].value + ')">Delete</a> | <a style="color:#fff" href="javascript:void(0)" onclick="Quote.unPark(' + rows[i].attributes["data-QuoteId"].value + ')">Resume</a></div></td>'
                            );
                            last = group;
                        }
                    });

                    setTimeout(function () {
                        parktabl.columns.adjust();
                    }, 2000);
                },
                "columnDefs":
                    [
                        { targets: 4, visible: false },
                        { targets: 5, visible: false }
                    ],
                "createdRow": function (row, data, dataIndex) {
                    // Set the data-status attribute, and add a class
                    $(row).attr('id', 'tr_' + data.QuoteDetailsId);
                    $(row).attr('data-company', data.CompanyName);
                    $(row).attr('data-QuoteId', data.QuoteId);
                    $(row).attr('data-email', data.EmailAddress);
                    $(row).attr('data-IsConversionReport', data.IsConversionReport);
                },
                "columns": [
                    { "data": "ChkFirstRow", "autoWidth": true, "orderable": false },
                    { "data": "MoveToProjectText", "autoWidth": true, "orderable": false },
                    { "data": "DownloadSampleRow", "autoWidth": true, "orderable": false },
                    { "data": "DownloadRow", "autoWidth": true, "orderable": false },
                    { "data": "Ref", "name": "Ref", "width": "100px" },
                    { "data": "CompanyName", "name": "CompanyName", "width": "200px" },
                    { "data": "PONumberText", "name": "PONumber", "width": "100px" },
                    { "data": "ProductNameText", "name": "ProductName", "width": "18%" },
                    { "data": "CASNoText", "name": "CASNo", "width": "6%" },
                    { "data": "CATNoText", "name": "CATNo", "width": "6%" },
                    { "data": "PriceText", "name": "Price", "width": "250px" },
                    { "data": "LeadTimeText", "name": "LeadTime", "autoWidth": true },
                    { "data": "AdditionalBatchNoText", "name": "AdditionalBatchNoText" },
                    { "data": "ProductRemark", "orderable": false, "width": "100px" },
                    { "data": "ActionRow", "orderable": false, "width": "130px" }
                ]

            });
        }
    }

    function rfqquotetab() {
        if (rfqquoteload === false) {
            var rfqquotetbl = $('#tblrfqquote').DataTable({
                //"fixedHeader": {
                //    header: true
                //},
                "searching": false,
                "ordering": false,
                "processing": true, // for show progress bar
                "serverSide": true, // for process server side
                "filter": true, // this is for disable filter (search box)
                "orderMulti": false, // for disable multiple column at once
                "pageLength": 25,
                "language": { processing: '<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span> ' },
                "ajax": {
                    "url": "../Form/LoadQuotationData?tabname=rfqquote",
                    "type": "POST",
                    "datatype": "json",
                    "data": function (d) {
                        d.company_search = $("#ddlpenuser").val();
                        d.date_search = $("#penuserdate").val();
                        d.countrytype_search = $("#ddlpenusertype").val();
                        d.radiobuton = $("#tabtobe").find('input[name="filterAll"]:checked').val();
                        d.searchbox = $("#tabtobe").find("#allsearchbox").val();
                    }
                },
                "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                    if (aData.IsImportedQuote && aData.MoveToDispatch != true) {
                        $('td', nRow).css('background-color', 'rgb(217, 237, 249)');
                    }
                    if (aData.IsControlledSubstance) {
                        $('td', nRow).css('color', 'red');
                    }
                },
                "fnDrawCallback": function (oSettings) {
                    rfqquoteload = true;

                    $("#chktobeAll").click(function () {
                        if ($(this).is(":checked")) {
                            $("#tbltobe").find('.clsclubQuote').each(function () {
                                $(this).prop("checked", true);
                            });
                        }
                        else {
                            $("#tbltobe").find(".clsclubQuote").each(function () {
                                $(this).prop("checked", false);
                            });
                        }
                    });
                    var api = this.api();
                    var rows = api.rows({ page: 'current' }).nodes();
                    var last = null;

                    api.column(4, { page: 'current' }).data().each(function (group, i) {
                        if (last !== group) {
                            $(rows).eq(i).before(
                                //'<td class="group" colspan="15" style="BACKGROUND-COLOR:#3c8dbc;font-weight:700;color:#fff;padding:10px;">' + group + " | " + rows[i].attributes["data-company"].value + '  (<a href="javascript:void(0)" style="color:#fff" onclick="Quote.deleteQuote(' + rows[i].attributes["data-QuoteId"].value + ')">Delete</a>)</td>'
                                '<td class="group" colspan="17" style="' + (rows[i].attributes["data-IsConversionReport"] != null && rows[i].attributes["data-IsConversionReport"].value == "true" ? "BACKGROUND-COLOR:#95647d" : "BACKGROUND-COLOR:#3c8dbc") + ';font-weight:700;color:#fff;padding:10px;"><input type="checkbox" class="clspark" value="' + rows[i].attributes["data-quoteid"].value + '"/> <a style="color: #fff; text-decoration: underline;" href="/Form/Quote/' + rows[i].attributes["data-QuoteId"].value + '">' + group + '</a>' + " | " + rows[i].attributes["data-company"].value + " | " + rows[i].attributes["data-email"].value + '  <div style="float:right" class="clsminiadmin"><a href="javascript:void(0)" style="color:#fff" onclick="Quote.deleteQuote(' + rows[i].attributes["data-QuoteId"].value + ')">Delete</a> | <a style="color:#fff" href="javascript:void(0)" onclick="Quote.Park(' + rows[i].attributes["data-QuoteId"].value + ')">Park</a></div></td>'

                            );
                            last = group;
                        }
                    });

                    setTimeout(function () {
                        rfqquotetbl.columns.adjust();
                    }, 2000);
                },
                "columnDefs":
                    [
                        { targets: 4, visible: false },
                        { targets: 5, visible: false }
                    ],
                "createdRow": function (row, data, dataIndex) {
                    // Set the data-status attribute, and add a class
                    $(row).attr('id', 'tr_' + data.QuoteDetailsId);
                    $(row).attr('data-company', data.CompanyName);
                    $(row).attr('data-QuoteId', data.QuoteId);
                    $(row).attr('data-email', data.EmailAddress);
                    $(row).attr('data-IsConversionReport', data.IsConversionReport);
                },
                "columns": [
                    { "data": "ChkFirstRow", "autoWidth": true, "orderable": false },
                    { "data": "MoveToProjectText", "autoWidth": true, "orderable": false },
                    { "data": "DownloadSampleRow", "autoWidth": true, "orderable": false },
                    { "data": "DownloadRow", "autoWidth": true, "orderable": false },
                    { "data": "Ref", "name": "Ref", "width": "100px" },
                    { "data": "CompanyName", "name": "CompanyName", "width": "200px" },
                    { "data": "PONumberText", "name": "PONumber", "width": "100px" },
                    { "data": "ProductNameText", "name": "ProductName", "width": "18%" },
                    { "data": "CASNoText", "name": "CASNo", "width": "6%" },
                    { "data": "CATNoText", "name": "CATNo", "width": "6%" },
                    { "data": "PriceText", "name": "Price", "width": "250px" },
                    { "data": "FinalPriceText", "name": "FinalPrice", "width": "250px" },
                    { "data": "LeadTimeText", "name": "LeadTime", "autoWidth": true },
                    { "data": "AdditionalBatchNoText", "name": "AdditionalBatchNoText" },
                    { "data": "COAText", "name": "COAText" },
                    { "data": "ActivityStatus", "name": "ActivityStatus" },
                    { "data": "ProductRemark", "orderable": false, "width": "100px" },
                    { "data": "FollowUpDescText", "orderable": false, "swidth": "300px" },
                    { "data": "ActionRow", "orderable": false, "width": "130px" }
                ]

            });
        }
    }

    function Tobequotetab() {
        if (tobeload === false) {
            var tobetbl = $('#tbltobe').DataTable({
                //"fixedHeader": {
                //    header: true
                //},
                "searching": false,
                "ordering": false,
                "processing": true, // for show progress bar
                "serverSide": true, // for process server side
                "filter": true, // this is for disable filter (search box)
                "orderMulti": false, // for disable multiple column at once
                "pageLength": 25,
                "language": { processing: '<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span> ' },
                "ajax": {
                    "url": "../Form/LoadQuotationData?tabname=tobe",
                    "type": "POST",
                    "datatype": "json",
                    "data": function (d) {
                        d.company_search = $("#ddlpenuser").val();
                        d.date_search = $("#penuserdate").val();
                        d.countrytype_search = $("#ddlpenusertype").val();
                        d.radiobuton = $("#tabtobe").find('input[name="filterAll"]:checked').val();
                        d.searchbox = $("#tabtobe").find("#allsearchbox").val();
                    }
                },
                "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                    if (aData.IsImportedQuote && aData.MoveToDispatch != true) {
                        $('td', nRow).css('background-color', 'rgb(217, 237, 249)');
                    }
                    if (aData.IsControlledSubstance) {
                        $('td', nRow).css('color', 'red');
                    }
                },
                "fnDrawCallback": function (oSettings) {
                    tobeload = true;

                    $("#chktobeAll").click(function () {
                        if ($(this).is(":checked")) {
                            $("#tbltobe").find('.clsclubQuote').each(function () {
                                $(this).prop("checked", true);
                            });
                        }
                        else {
                            $("#tbltobe").find(".clsclubQuote").each(function () {
                                $(this).prop("checked", false);
                            });
                        }
                    });
                    var api = this.api();
                    var rows = api.rows({ page: 'current' }).nodes();
                    var last = null;

                    api.column(4, { page: 'current' }).data().each(function (group, i) {
                        if (last !== group) {
                            $(rows).eq(i).before(
                                //'<td class="group" colspan="15" style="BACKGROUND-COLOR:#3c8dbc;font-weight:700;color:#fff;padding:10px;">' + group + " | " + rows[i].attributes["data-company"].value + '  (<a href="javascript:void(0)" style="color:#fff" onclick="Quote.deleteQuote(' + rows[i].attributes["data-QuoteId"].value + ')">Delete</a>)</td>'
                                '<td class="group" colspan="15" style="' + (rows[i].attributes["data-IsConversionReport"] != null && rows[i].attributes["data-IsConversionReport"].value == "true" ? "BACKGROUND-COLOR:#95647d" : "BACKGROUND-COLOR:#3c8dbc") + ';font-weight:700;color:#fff;padding:10px;"><input type="checkbox" class="clspark" value="' + rows[i].attributes["data-quoteid"].value + '"/> <a style="color: #fff; text-decoration: underline;" href="/Form/Quote/' + rows[i].attributes["data-QuoteId"].value + '">' + group + '</a>' + " | " + rows[i].attributes["data-company"].value + " | " + rows[i].attributes["data-email"].value + '  <div style="float:right" class="clsminiadmin"><a href="javascript:void(0)" style="color:#fff" onclick="Quote.deleteQuote(' + rows[i].attributes["data-QuoteId"].value + ')">Delete</a> | <a style="color:#fff" href="javascript:void(0)" onclick="Quote.Park(' + rows[i].attributes["data-QuoteId"].value + ')">Park</a></div></td>'

                            );
                            last = group;
                        }
                    });

                    setTimeout(function () {
                        tobetbl.columns.adjust();
                    }, 2000);
                },
                "columnDefs":
                    [
                        { targets: 4, visible: false },
                        { targets: 5, visible: false }
                    ],
                "createdRow": function (row, data, dataIndex) {
                    // Set the data-status attribute, and add a class
                    $(row).attr('id', 'tr_' + data.QuoteDetailsId);
                    $(row).attr('data-company', data.CompanyName);
                    $(row).attr('data-QuoteId', data.QuoteId);
                    $(row).attr('data-email', data.EmailAddress);
                    $(row).attr('data-IsConversionReport', data.IsConversionReport);
                },
                "columns": [
                    { "data": "ChkFirstRow", "orderable": false },
                    { "data": "MoveToProjectText", "orderable": false },
                    { "data": "DownloadSampleRow", "orderable": false },
                    { "data": "DownloadRow", "orderable": false },
                    { "data": "Ref", "name": "Ref", "width": "100px" },
                    { "data": "CompanyName", "name": "CompanyName", "width": "200px" },
                    { "data": "PONumberText", "name": "PONumber", "width": "200px" },
                    { "data": "ProductNameText", "name": "ProductName", "width": "18%" },
                    { "data": "CASNoText", "name": "CASNo", "width": "6%" },
                    { "data": "CATNoText", "name": "CATNo", "width": "6%" },
                    { "data": "PriceText", "name": "Price", "width": "250px" },
                    { "data": "LeadTimeText", "name": "LeadTime", "autoWidth": true },
                    { "data": "AdditionalBatchNoText", "name": "AdditionalBatchNoText" },
                    { "data": "ProductRemark", "orderable": false, "width": "100px" },
                    { "data": "ActionRow", "orderable": false, "width": "130px" }
                ]

            });
        }
    }

    var sapdataload = false;
    function sapdatatab() {
        if (sapdataload === false) {
            var tobetbl = $('#tblsapdata').DataTable({
                //"fixedHeader": {
                //    header: true
                //},
                "searching": false,
                "ordering": false,
                "processing": true, // for show progress bar
                "serverSide": true, // for process server side
                "filter": true, // this is for disable filter (search box)
                "orderMulti": false, // for disable multiple column at once
                "pageLength": 100,
                "language": { processing: '<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span> ' },

                "ajax": {
                    "url": "../Form/LoadQuotationSAPData",
                    "type": "POST",
                    "datatype": "json",
                    "data": function (d) {
                        d.company_search = $("#tabsapdata").find("#ddlpendist").val();
                        d.date_search = $("#tabsapdata").find("#pendistdate").val();
                        d.countrytype_search = $("#tabsapdata").find("#ddlpendisttype").val();
                        d.radiobuton = $("#tabsapdata").find('input[name="filterAll"]:checked').val();
                        d.searchbox = $("#tabsapdata").find("#allsearchbox").val();
                    }
                },
                "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                    if (aData.IsSuccessSAP === true) {
                        $('td', nRow).css('background-color', 'rgb(179 237 191)');
                    }
                    else {
                        $('td', nRow).css('background-color', 'rgb(255 213 213)');
                    }
                    if (aData.IsControlledSubstance) {
                        $('td', nRow).css('color', 'red');
                    }
                },
                "fnDrawCallback": function (oSettings) {
                    sapdataload = true;

                    var api = this.api();
                    var rows = api.rows({ page: 'current' }).nodes();
                    var last = null;

                    api.column(1, { page: 'current' }).data().each(function (group, i) {
                        if (last !== group) {
                            $(rows).eq(i).before(
                                //'<td class="group" colspan="15" style="BACKGROUND-COLOR:#3c8dbc;font-weight:700;color:#fff;padding:10px;">' + group + " | " + rows[i].attributes["data-company"].value + '  (<a href="javascript:void(0)" style="color:#fff" onclick="Quote.deleteQuote(' + rows[i].attributes["data-QuoteId"].value + ')">Delete</a>)</td>'
                                '<td class="group" colspan="15" style="' + (rows[i].attributes["data-IsConversionReport"] != null && rows[i].attributes["data-IsConversionReport"].value == "true" ? "BACKGROUND-COLOR:#95647d" : "BACKGROUND-COLOR:#3c8dbc") + ';font-weight:700;color:#fff;padding:10px;"> <a style="color: #fff; text-decoration: underline;" href="/Form/Quote/' + rows[i].attributes["data-QuoteId"].value + '">' + group + '</a>' + " | " + rows[i].attributes["data-company"].value + " | " + rows[i].attributes["data-email"].value + ' | <a href="javascript:void(0)" style="color:white; float:right" onclick="SAPSync(&#39;' + rows[i].attributes["data-PONumber"].value + '&#39;)">Sync</a> </td>'

                            );
                            last = group;
                        }
                    });

                    setTimeout(function () {
                        tobetbl.columns.adjust();
                    }, 2000);
                },
                "columnDefs":
                    [
                        { targets: 1, visible: false },
                        { targets: 2, visible: false }
                    ],
                "createdRow": function (row, data, dataIndex) {
                    // Set the data-status attribute, and add a class
                    $(row).attr('id', 'tr_' + data.QuoteDetailsId);
                    $(row).attr('data-company', data.CompanyName);
                    $(row).attr('data-QuoteId', data.QuoteId);
                    $(row).attr('data-email', data.EmailAddress);
                    $(row).attr('data-IsConversionReport', data.IsConversionReport);
                    $(row).attr('data-PONumber', data.PONumber);
                },
                "columns": [
                    { "data": "SAPSONo", "autoWidth": true, "orderable": false },
                    //{ "data": "SAPSODocEntry", "autoWidth": true, "orderable": false },
                    //{ "data": "SAPSOLId", "autoWidth": true, "orderable": false },
                    { "data": "Ref", "name": "Ref", "width": "100px" },
                    { "data": "CompanyName", "name": "CompanyName", "width": "200px" },
                    { "data": "PONumberText", "name": "PONumber", "width": "100px" },
                    { "data": "POCopy", "name": "POCopy", "width": "100px" },
                    { "data": "ProductNameText", "name": "ProductName", "width": "18%" },
                    { "data": "CASNoText", "name": "CASNo", "width": "6%" },
                    { "data": "CATNoText", "name": "CATNo", "width": "6%" },
                    { "data": "PriceText", "name": "Price", "width": "250px" },
                    { "data": "LeadTimeText", "name": "LeadTime", "autoWidth": true },
                    { "data": "AdditionalBatchNoText", "name": "AdditionalBatchNoText" },
                    { "data": "ProductRemark", "orderable": false, "width": "100px" }
                ]

            });
        }
    }

    function Tobedistinutorquotetab() {
        if (tobedistload === false) {
            var tobetbl = $('#tbltobedistributor').DataTable({
                //"fixedHeader": {
                //    header: true
                //},
                "searching": false,
                "ordering": false,
                "processing": true, // for show progress bar
                "serverSide": true, // for process server side
                "filter": true, // this is for disable filter (search box)
                "orderMulti": false, // for disable multiple column at once
                "pageLength": 25,
                "language": { processing: '<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span> ' },

                "ajax": {
                    /*"url": "../Form/LoadQuotationData?tabname=tobedistributor",*/
                    "url": "../Form/LoadQuotationData?tabname=tobequotation",
                    "type": "POST",
                    "datatype": "json",
                    "data": function (d) {
                        d.company_search = $("#ddlpendist").val();
                        d.date_search = $("#pendistdate").val();
                        d.countrytype_search = $("#ddlpendisttype").val();
                        d.radiobuton = $("#tabtobedistributor").find('input[name="filterAll"]:checked').val();
                        d.searchbox = $("#tabtobedistributor").find("#allsearchbox").val();
                    }
                },
                "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                    if (aData.IsImportedQuote && aData.MoveToDispatch != true) {
                        $('td', nRow).css('background-color', 'rgb(217, 237, 249)');
                    }
                    if (aData.IsControlledSubstance) {
                        $('td', nRow).css('color', 'red');
                    }
                },
                "fnDrawCallback": function (oSettings) {
                    tobedistload = true;

                    $("#chktobeAll").click(function () {
                        if ($(this).is(":checked")) {
                            $("#tbltobedistributor").find('.clsclubQuote').each(function () {
                                $(this).prop("checked", true);
                            });
                        }
                        else {
                            $("#tbltobedistributor").find(".clsclubQuote").each(function () {
                                $(this).prop("checked", false);
                            });
                        }
                    });
                    var api = this.api();
                    var rows = api.rows({ page: 'current' }).nodes();
                    var last = null;

                    api.column(4, { page: 'current' }).data().each(function (group, i) {
                        if (last !== group) {
                            $(rows).eq(i).before(
                                //'<td class="group" colspan="15" style="BACKGROUND-COLOR:#3c8dbc;font-weight:700;color:#fff;padding:10px;">' + group + " | " + rows[i].attributes["data-company"].value + '  (<a href="javascript:void(0)" style="color:#fff" onclick="Quote.deleteQuote(' + rows[i].attributes["data-QuoteId"].value + ')">Delete</a>)</td>'
                                '<td class="group" colspan="15" style="' + (rows[i].attributes["data-IsConversionReport"] != null && rows[i].attributes["data-IsConversionReport"].value == "true" ? "BACKGROUND-COLOR:#95647d" : "BACKGROUND-COLOR:#3c8dbc") + ';font-weight:700;color:#fff;padding:10px;"><input type="checkbox" class="clspark" value="' + rows[i].attributes["data-quoteid"].value + '"/> <a style="color: #fff; text-decoration: underline;" href="/Form/Quote/' + rows[i].attributes["data-QuoteId"].value + '">' + group + '</a>' + " | " + rows[i].attributes["data-company"].value + " | " + rows[i].attributes["data-email"].value + ' <div style="float:right" class="clsminiadmin"><a href="javascript:void(0)" style="color:#fff" onclick="Quote.deleteQuote(' + rows[i].attributes["data-QuoteId"].value + ')">Delete</a> | <a style="color:#fff" href="javascript:void(0)" onclick="Quote.Park(' + rows[i].attributes["data-QuoteId"].value + ')">Park</a></div></td>'

                            );
                            last = group;
                        }
                    });

                    setTimeout(function () {
                        tobetbl.columns.adjust();
                    }, 2000);
                },
                "columnDefs":
                    [
                        { targets: 4, visible: false },
                        { targets: 5, visible: false }
                    ],
                "createdRow": function (row, data, dataIndex) {
                    // Set the data-status attribute, and add a class
                    $(row).attr('id', 'tr_' + data.QuoteDetailsId);
                    $(row).attr('data-company', data.CompanyName);
                    $(row).attr('data-QuoteId', data.QuoteId);
                    $(row).attr('data-email', data.EmailAddress);
                    $(row).attr('data-IsConversionReport', data.IsConversionReport);
                },
                "columns": [
                    { "data": "ChkFirstRow", "autoWidth": true, "orderable": false },
                    { "data": "MoveToProjectText", "autoWidth": true, "orderable": false },
                    { "data": "DownloadSampleRow", "autoWidth": true, "orderable": false },
                    { "data": "DownloadRow", "autoWidth": true, "orderable": false },
                    { "data": "Ref", "name": "Ref", "width": "100px" },
                    { "data": "CompanyName", "name": "CompanyName", "width": "200px" },
                    { "data": "PONumberText", "name": "PONumber", "width": "100px" },
                    { "data": "ProductNameText", "name": "ProductName", "width": "18%" },
                    { "data": "CASNoText", "name": "CASNo", "width": "6%" },
                    { "data": "CATNoText", "name": "CATNo", "width": "6%" },
                    { "data": "PriceText", "name": "Price", "width": "250px" },
                    { "data": "LeadTimeText", "name": "LeadTime", "autoWidth": true },
                    { "data": "AdditionalBatchNoText", "name": "AdditionalBatchNoText" },
                    { "data": "ProductRemark", "orderable": false, "width": "100px" },
                    { "data": "ActionRow", "orderable": false, "width": "130px" }
                ]

            });
        }
    }

    function mastertab() {
        if (masterload === false) {
            var mastertbl = $('#tblmaster').DataTable({
                //"fixedHeader": {
                //    header: true
                //},
                "searching": false,
                "ordering": false,
                "processing": true, // for show progress bar
                "serverSide": true, // for process server side
                "filter": true, // this is for disable filter (search box)
                "orderMulti": false, // for disable multiple column at once
                "pageLength": 25,
                "language": { processing: '<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span> ' },

                "ajax": {
                    /*"url": "../Form/LoadQuotationData?tabname=tobedistributor",*/
                    "url": "../Form/LoadQuotationData?tabname=masterquotation",
                    "type": "POST",
                    "datatype": "json",
                    "data": function (d) {
                        //d.company_search = $("#tabmaster").find("#ddlpendist").val();
                        //d.date_search = $("#tabmaster").find("#pendistdate").val();
                        //d.countrytype_search = $("#tabmaster").find("#ddlpendisttype").val();
                        d.radiobuton = $("#tabmaster").find('input[name="filterAll"]:checked').val();
                        d.searchbox = $("#tabmaster").find("#allsearchbox").val();
                    }
                },
                "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                    if (aData.IsImportedQuote && aData.MoveToDispatch != true) {
                        $('td', nRow).css('background-color', 'rgb(217, 237, 249)');
                    }
                    if (aData.IsControlledSubstance) {
                        $('td', nRow).css('color', 'red');
                    }
                },
                "fnDrawCallback": function (oSettings) {
                    masterload = true;

                    $("#chktobeAll").click(function () {
                        if ($(this).is(":checked")) {
                            $("#tblmaster").find('.clsclubQuote').each(function () {
                                $(this).prop("checked", true);
                            });
                        }
                        else {
                            $("#tblmaster").find(".clsclubQuote").each(function () {
                                $(this).prop("checked", false);
                            });
                        }
                    });
                    var api = this.api();
                    var rows = api.rows({ page: 'current' }).nodes();
                    var last = null;

                    api.column(4, { page: 'current' }).data().each(function (group, i) {
                        if (last !== group) {
                            $(rows).eq(i).before(
                                //'<td class="group" colspan="15" style="BACKGROUND-COLOR:#3c8dbc;font-weight:700;color:#fff;padding:10px;">' + group + " | " + rows[i].attributes["data-company"].value + '  (<a href="javascript:void(0)" style="color:#fff" onclick="Quote.deleteQuote(' + rows[i].attributes["data-QuoteId"].value + ')">Delete</a>)</td>'
                                '<td class="group" colspan="15" style="' + (rows[i].attributes["data-IsConversionReport"] != null && rows[i].attributes["data-IsConversionReport"].value == "true" ? "BACKGROUND-COLOR:#95647d" : "BACKGROUND-COLOR:#3c8dbc") + ';font-weight:700;color:#fff;padding:10px;"><input type="checkbox" class="clspark" value="' + rows[i].attributes["data-quoteid"].value + '"/> <a style="color: #fff; text-decoration: underline;" href="/Form/Quote/' + rows[i].attributes["data-QuoteId"].value + '">' + group + '</a>' + " | " + rows[i].attributes["data-company"].value + " | " + rows[i].attributes["data-email"].value + ' <div style="float:right" class="clsminiadmin"><a href="javascript:void(0)" style="color:#fff" onclick="Quote.deleteQuote(' + rows[i].attributes["data-QuoteId"].value + ')">Delete</a> | <a style="color:#fff" href="javascript:void(0)" onclick="Quote.Park(' + rows[i].attributes["data-QuoteId"].value + ')">Park</a></div></td>'

                            );
                            last = group;
                        }
                    });

                    setTimeout(function () {
                        mastertbl.columns.adjust();
                    }, 2000);
                },
                "columnDefs":
                    [
                        { targets: 4, visible: false },
                        { targets: 5, visible: false }
                    ],
                "createdRow": function (row, data, dataIndex) {
                    // Set the data-status attribute, and add a class
                    $(row).attr('id', 'tr_' + data.QuoteDetailsId);
                    $(row).attr('data-company', data.CompanyName);
                    $(row).attr('data-QuoteId', data.QuoteId);
                    $(row).attr('data-email', data.EmailAddress);
                    $(row).attr('data-IsConversionReport', data.IsConversionReport);
                },
                "columns": [
                    { "data": "ChkFirstRow", "autoWidth": true, "orderable": false },
                    { "data": "MoveToProjectText", "autoWidth": true, "orderable": false },
                    { "data": "DownloadSampleRow", "autoWidth": true, "orderable": false },
                    { "data": "DownloadRow", "autoWidth": true, "orderable": false },
                    { "data": "Ref", "name": "Ref", "width": "100px" },
                    { "data": "CompanyName", "name": "CompanyName", "width": "200px" },
                    { "data": "PONumberText", "name": "PONumber", "width": "100px" },
                    { "data": "ProductNameText", "name": "ProductName", "width": "18%" },
                    { "data": "CASNoText", "name": "CASNo", "width": "6%" },
                    { "data": "CATNoText", "name": "CATNo", "width": "6%" },
                    { "data": "PriceText", "name": "Price", "width": "250px" },
                    { "data": "LeadTimeText", "name": "LeadTime", "autoWidth": true },
                    { "data": "AdditionalBatchNoText", "name": "AdditionalBatchNoText" },
                    { "data": "ProductRemark", "orderable": false, "width": "100px" },
                    { "data": "ActionRow", "orderable": false, "width": "130px" }
                ]

            });
        }
    }

    function quoteapprovedtab() {
        if (approvedload === false) {
            var approvedtbl = $('#tblapproved').DataTable({
                //"fixedHeader": {
                //    header: true
                //},
                "ordering": false,
                "processing": true, // for show progress bar
                "serverSide": true, // for process server side
                "filter": true, // this is for disable filter (search box)
                "orderMulti": false, // for disable multiple column at once
                "pageLength": 25,
                "language": { processing: '<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span> ' },

                "ajax": {
                    "url": "../Form/LoadQuotationData?tabname=approved",
                    "type": "POST",
                    "datatype": "json"
                },
                "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                    if (aData.IsImportedQuote && aData.MoveToDispatch != true) {
                        $('td', nRow).css('background-color', 'rgb(217, 237, 249)');
                    }
                    if (aData.IsControlledSubstance) {
                        $('td', nRow).css('color', 'red');
                    }
                },
                "fnDrawCallback": function (oSettings) {
                    approvedload = true;

                    $("#chkapprovedAll").click(function () {
                        if ($(this).is(":checked")) {
                            $("#tblapproved").find('.clsclubQuote').each(function () {
                                $(this).prop("checked", true);
                            });
                        }
                        else {
                            $("#tblapproved").find(".clsclubQuote").each(function () {
                                $(this).prop("checked", false);
                            });
                        }
                    });
                    var api = this.api();
                    var rows = api.rows({ page: 'current' }).nodes();
                    var last = null;

                    api.column(5, { page: 'current' }).data().each(function (group, i) {
                        if (last !== group) {
                            $(rows).eq(i).before(
                                //'<td class="group" colspan="15" style="BACKGROUND-COLOR:#3c8dbc;font-weight:700;color:#fff;padding:10px;">' + group + " | " + rows[i].attributes["data-company"].value + '  (<a href="javascript:void(0)" style="color:#fff" onclick="Quote.deleteQuote(' + rows[i].attributes["data-QuoteId"].value + ')">Delete</a>)</td>'
                                '<td class="group" colspan="15" style="' + (rows[i].attributes["data-IsConversionReport"] != null && rows[i].attributes["data-IsConversionReport"].value == "true" ? "BACKGROUND-COLOR:#95647d" : "BACKGROUND-COLOR:#3c8dbc") + ';font-weight:700;color:#fff;padding:10px;"><a style="color: #fff; text-decoration: underline;" href="/Form/Quote/' + rows[i].attributes["data-QuoteId"].value + '">' + group + '</a>' + " | " + rows[i].attributes["data-company"].value + " | " + rows[i].attributes["data-email"].value + ' <div class="clsminiadmin" style="float:right"><a href="javascript:void(0)" style="color:#fff" onclick="Quote.deleteQuote(' + rows[i].attributes["data-QuoteId"].value + ')">Delete</a> | <a style="color:#fff" href="javascript:void(0)" onclick="Quote.Park(' + rows[i].attributes["data-QuoteId"].value + ')">Park</a></div></td>'

                            );
                            last = group;
                        }
                    });

                    setTimeout(function () {
                        approvedtbl.columns.adjust();
                    }, 2000);
                },
                "columnDefs":
                    [
                        { targets: 5, visible: false },
                        { targets: 6, visible: false }
                    ],
                "createdRow": function (row, data, dataIndex) {
                    // Set the data-status attribute, and add a class
                    $(row).attr('id', 'tr_' + data.QuoteDetailsId);
                    $(row).attr('data-company', data.CompanyName);
                    $(row).attr('data-QuoteId', data.QuoteId);
                    $(row).attr('data-email', data.EmailAddress);
                    $(row).attr('data-IsConversionReport', data.IsConversionReport);
                },
                "columns": [
                    { "data": "ChkFirstRow", "autoWidth": true, "orderable": false },
                    { "data": "MoveToProjectText", "autoWidth": true, "orderable": false },
                    { "data": "DownloadSampleRow", "autoWidth": true, "orderable": false },
                    { "data": "DownloadRow", "autoWidth": true, "orderable": false },
                    { "data": "DownloadCOAText", "autoWidth": true, "orderable": false },
                    { "data": "Ref", "name": "Ref", "width": "100px" },
                    { "data": "CompanyName", "name": "CompanyName", "width": "200px" },
                    { "data": "PONumberText", "name": "PONumber", "width": "100px" },
                    { "data": "ProductNameText", "name": "ProductName", "width": "18%" },
                    { "data": "CASNoText", "name": "CASNo", "width": "6%" },
                    { "data": "CATNoText", "name": "CATNo", "width": "6%" },
                    { "data": "PriceText", "name": "Price", "width": "250px" },
                    { "data": "LeadTimeText", "name": "LeadTime", "autoWidth": true },
                    { "data": "AdditionalBatchNoText", "name": "AdditionalBatchNoText" },
                    { "data": "ProductRemark", "orderable": false, "width": "100px" },
                    { "data": "ActionRow", "orderable": false, "width": "130px" }
                ]

            });
        }
    }

    function rfqtab() {

        if (rfqtabload === false) {
            var rfqtbl = $('#tblrfq').DataTable({
                "ordering": false,
                "processing": true, // for show progress bar
                "serverSide": true, // for process server side
                "filter": true, // this is for disable filter (search box)
                "orderMulti": false, // for disable multiple column at once
                "pageLength": 25,
                "language": { processing: '<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span> ' },
                "ajax": {
                    "url": "../Form/LoadRFQQuotationData",
                    "type": "POST",
                    "datatype": "json"
                },
                "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                    if (aData.IsImportedQuote && aData.MoveToDispatch != true) {
                        $('td', nRow).css('background-color', 'rgb(217, 237, 249)');
                    }
                    if (aData.IsControlledSubstance) {
                        $('td', nRow).css('color', 'red');
                    }
                },
                "fnDrawCallback": function (oSettings) {
                    rfqtabload = true;

                    $("#chkrfqAll").click(function () {
                        if ($(this).is(":checked")) {
                            $("#tblrfq").find('.clsRFQQuote').each(function () {
                                $(this).prop("checked", true);
                            });
                        }
                        else {
                            $("#tblrfq").find(".clsRFQQuote").each(function () {
                                $(this).prop("checked", false);
                            });
                        }
                    });

                    var api = this.api();
                    var rows = api.rows({ page: 'current' }).nodes();
                    var last = null;

                    api.column(1, { page: 'current' }).data().each(function (group, i) {
                        if (last !== group) {
                            /*| <a style='color:white' href='javascript:void(0)' onclick='deleteRFQ(" + rows[i].attributes["data-Id"].value + ")'>Delete</a>*/
                            $(rows).eq(i).before(
                                '<td class="group" colspan="10" style="BACKGROUND-COLOR:#3c8dbc;font-weight:700;color:#fff;padding:10px;">' + group + " | " + rows[i].attributes["data-FullName"].value + " </td>"
                            );
                            last = group;
                        }
                    });

                    rfqtbl.columns.adjust()
                },
                "columnDefs":
                    [
                        { targets: 1, visible: false },
                        { targets: 2, visible: false }
                    ],
                "createdRow": function (row, data, dataIndex) {
                    // Set the data-status attribute, and add a class
                    $(row).attr('id', 'tr_' + data.QuoteDetailsId);
                    $(row).attr('data-email', data.Email);
                    $(row).attr('data-company', data.CompanyName);
                    $(row).attr('data-FullName', data.FullName);
                    $(row).attr('data-Id', data.Id);
                },
                "columns": [
                    { "data": "ChkFirstRow", "autoWidth": true, "orderable": false },
                    { "data": "Email", "autoWidth": true, "orderable": false },
                    { "data": "FullName", "autoWidth": true, "orderable": false },
                    { "data": "CompanyName", "autoWidth": true, "orderable": false },
                    { "data": "RFQDateText", "autoWidth": true, "orderable": false },
                    { "data": "ProductName", "name": "ProductName" },
                    { "data": "CASNo", "name": "CASNo", "width": "200px" },
                    { "data": "CATNo", "name": "CATNo", "width": "100px" },
                    { "data": "RequiredQty", "name": "RequiredQty", "width": "18%" },
                    { "data": "Action", "name": "RequiredQty", "width": "18%" },
                ]
            });
        }
    }

    function deleteRFQ() {
        swal({
            title: "Are you sure want to delete this RFQ product?",
            text: "",
            type: "warning",
            showCancelButton: true,
            html: true,
            customClass: 'swalwide',
            confirmButtonClass: "btn-danger",
            confirmButtonText: "Yes, delete it!",
            cancelButtonText: "No, cancel!",
            closeOnConfirm: true,
            closeOnCancel: true
        },
            function (isConfirm) {
                if (isConfirm) {
                    var rfqIds = [];
                    $("#tblrfq").find(".clsRFQQuote").each(function () {
                        if ($(this).is(":checked")) {
                            rfqIds.push($(this).val());
                        }
                    });

                    $.ajax({
                        url: '/Form/DeleteRFQ',
                        data: { id: rfqIds },
                        type: 'POST',
                        traditional: true, // add this
                        dataType: 'json',
                        success: function (data) {
                            $('#tblrfq').DataTable().ajax.reload(null, false);
                        }
                    });

                }
            });
    }

    function getfollowupsearch(ref) {
        $('#tblfollowup').DataTable().search(ref).draw();
    }

    function GetFollowupOverview(filterValue) {
        $('#divfollowupoverview').html("<img src='/images/loading.gif' />");
        $.ajax({
            type: "GET",
            url: "/Form/GetFollowUpOverview?value=" + filterValue,
            data: {},
            async: true,
            dataType: "json",
            success: function (response) {
                $('#divfollowupoverview').html("<img src='/images/loading.gif' />");
                if (response.length > 0) {
                    var str = "<table class='table table-bordered table-striped dataTable no-footer' width='100%'><thead><tr><th></th><th>Quote ID</th><th>Company</th><th>Products</th><th>Quote Total</th><th>Comment</th></tr></thead>";
                    str += "<tbody>";
                    $(response).each(function (i, v) {
                        if (v.ProductCount !== null) {
                            var name = v.ProductCount.substr(0, v.ProductCount.trim().indexOf(" "));
                            if (name !== "") {
                                v.ProductCount = name;
                            }
                            str += "<tr><td><input type='checkbox' value='" + v.Id + "' class='clsFollowOverview' /></td><td><a href='javascript:void(0)' onclick='getfollowupsearch(\"" + v.Ref + "\")'>" + v.Ref + "</a></td><td>" + v.Company + "</td><td>" + v.ProductCount + "</td><td><input type='text' id='quotetotal_" + v.Id + "' value='" + v.QuoteTotal + "' /></td><td><input type='text' id='followupcomment_" + v.Id + "' value='" + v.FollowUpComment + "' /></td></tr>";
                        }
                    });
                    str += "</tbody></table>";

                    $('#divfollowupoverview').html(str);

                    $('#divfollowupoverview table').DataTable({
                        "pageLength": 25,
                        "scrollY": "200px",
                        "scrollCollapse": true,
                    });

                }
                else {
                    $('#divfollowupoverview').html("Data Not Found");
                }

            },
            error: function (response) {
                alert("Error:" + response);
            }
        });
    }

    function follwupStr(rows, i, group, readonselect) {
        var str = '<td class="group" colspan="18" style="' + (rows[i].attributes["data-FreezeQuote"] != null && rows[i].attributes["data-FreezeQuote"].value == "true" ? "BACKGROUND-COLOR:#b95959" : "BACKGROUND-COLOR:#3c8dbc") + ';font-weight:700;color:#fff;padding:10px;"><a style="color: #fff; text-decoration: underline;" href="/Form/Quote/' + rows[i].attributes["data-QuoteId"].value + '">' + group + "</a> | " + rows[i].attributes["data-company"].value + " | " + rows[i].attributes["data-email"].value + '<span class="clsminiadmin"> ';

        if (rows[i].attributes["data-IsFollowupInterested"].value === "true") {
            str += '<i class="fa fa-thumbs-up" aria-hidden="true" title="Interested" style="font-size: 18px; color: lightgreen" onclick="UpdateFollowupStatus(&quot;To be Followup&quot;,' + rows[i].attributes["data-quoteid"].value + ')"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
        }
        else {
            str += '<i class="fa fa-thumbs-up" aria-hidden="true" title="Interested" style="font-size: 18px;" onclick="UpdateFollowupStatus(&quot;To be Followup&quot;,' + rows[i].attributes["data-quoteid"].value + ')"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
        }
        str += '<i style="font-size: 18px;" class="fa fa-thumbs-down" aria-hidden="true" title="Removed" onclick="removefollowup(' + rows[i].attributes["data-quoteid"].value + ')" > </i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';

        if (rows[i].attributes["data-IsFollowupMail"].value === "true") {
            str += '<i class="fa fa-envelope" aria-hidden="true" title="Mail" style="font-size: 18px;color: lightgreen"  onclick="UpdateFollowupStatus(&quot;Mail Sent&quot;,' + rows[i].attributes["data-quoteid"].value + ')"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
        }
        else {
            str += '<i class="fa fa-envelope" aria-hidden="true" title="Mail" style="font-size: 18px;"  onclick="UpdateFollowupStatus(&quot;Mail Sent&quot;,' + rows[i].attributes["data-quoteid"].value + ')"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
        }

        if (rows[i].attributes["data-IsFollowupCall"].value === "true") {
            str += '<i class="fa fa-phone" aria-hidden="true" title="Call" style="font-size: 18px;color: lightgreen"  onclick="UpdateFollowupStatus(&quot;Call&quot;,' + rows[i].attributes["data-quoteid"].value + ')"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ';
        }
        else {
            str += ' <i class="fa fa-phone" aria-hidden="true" title="Call" style="font-size: 18px;"  onclick="UpdateFollowupStatus(&quot;Call&quot;,' + rows[i].attributes["data-quoteid"].value + ')"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
        }

        if (rows[i].attributes["data-IsFollowupWon"].value === "true") {
            str += '<i class="fa fa-trophy" aria-hidden="true" title="Won" style="font-size: 18px;color: lightgreen"  onclick="UpdateFollowupStatus(&quot;Won&quot;,' + rows[i].attributes["data-quoteid"].value + ')"></i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
        }
        else {
            str += '<i class="fa fa-trophy" aria-hidden="true" title="Won" style="font-size: 18px;"  onclick="UpdateFollowupStatus(&quot;Won&quot;,' + rows[i].attributes["data-quoteid"].value + ')"></i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
        }

        if (rows[i].attributes["data-FreezeQuote"].value === "true") {
            str += '<i class="fa fa-snowflake-o" aria-hidden="true" title="Freeze" style="font-size: 18px;color: lightgreen"  onclick="FreezeQuote(' + rows[i].attributes["data-quoteid"].value + ')"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   ';
        }
        else {
            str += '<i class="fa fa-snowflake-o" aria-hidden="true" title="Freeze" style="font-size: 18px;"  onclick="FreezeQuote(' + rows[i].attributes["data-quoteid"].value + ')"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   ';
        }

        if (rows[i].attributes["data-IsFollowupLost"].value === "true") {
            str += '<i class="fa fa-sign-out" aria-hidden="true" title="Lost" style="font-size: 18px;color: lightgreen"  onclick="UpdateFollowupStatus(&quot;Lost&quot;,' + rows[i].attributes["data-quoteid"].value + ')"></i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
        }
        else {
            str += '<i class="fa fa-sign-out" aria-hidden="true" title="Lost" style="font-size: 18px;"  onclick="UpdateFollowupStatus(&quot;Lost&quot;,' + rows[i].attributes["data-quoteid"].value + ')"></i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
        }

        if (rows[i].attributes["data-IsFollowupMeeting"].value === "true") {
            str += '<i class="fa fa-handshake-o" aria-hidden="true" title="Meeting" style="font-size: 18px;color: lightgreen"  onclick="UpdateFollowupStatus(&quot;Meeting&quot;,' + rows[i].attributes["data-quoteid"].value + ')"></i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
        }
        else {
            str += '<i class="fa fa-handshake-o" aria-hidden="true" title="Meeting" style="font-size: 18px;"  onclick="UpdateFollowupStatus(&quot;Meeting&quot;,' + rows[i].attributes["data-quoteid"].value + ')"></i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
        }

        if (rows[i].attributes["data-IsFollowupLessValue"].value === "true") {
            str += '<i class="fa fa-arrow-down" aria-hidden="true" title="Less Value" style="font-size: 18px;color: lightgreen"  onclick="UpdateFollowupStatus(&quot;Less Value&quot;,' + rows[i].attributes["data-quoteid"].value + ')"></i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
        }
        else {
            str += '<i class="fa fa-arrow-down" aria-hidden="true" title="Less Value" style="font-size: 18px;"  onclick="UpdateFollowupStatus(&quot;Less Value&quot;,' + rows[i].attributes["data-quoteid"].value + ')"></i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
        }

        if (rows[i].attributes["data-IsFollowupNegotiation"].value === "true") {
            str += '<i class="fa fa-inr" aria-hidden="true" title="Negotiation" style="font-size: 18px;color: lightgreen"  onclick="UpdateFollowupStatus(&quot;Negotiation&quot;,' + rows[i].attributes["data-quoteid"].value + ')"></i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
        }
        else {
            str += '<i class="fa fa-inr" aria-hidden="true" title="Negotiation" style="font-size: 18px;"  onclick="UpdateFollowupStatus(&quot;Negotiation&quot;,' + rows[i].attributes["data-quoteid"].value + ')"></i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
        }


        if (rows[i].attributes["data-IsFollowupImportant"].value === "true") {
            str += '<i class="fa fa-fighter-jet" aria-hidden="true" title="Important" style="font-size: 18px;color: lightgreen"  onclick="UpdateFollowupStatus(&quot;Important&quot;,' + rows[i].attributes["data-quoteid"].value + ')"></i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
        }
        else {
            str += '<i class="fa fa-fighter-jet" aria-hidden="true" title="Important" style="font-size: 18px;"  onclick="UpdateFollowupStatus(&quot;Important&quot;,' + rows[i].attributes["data-quoteid"].value + ')"></i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
        }


        if (rows[i].attributes["data-FollowupAdminRemark"] !== null && rows[i].attributes["data-FollowupAdminRemark"] !== undefined) {
            str += '<input class="clsfollowupadminremark" data-quoteid="' + rows[i].attributes["data-quoteid"].value + '" type="text" style="color: #000" value="' + rows[i].attributes["data-FollowupAdminRemark"].value + '" /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
        }
        else {
            str += '<input class="clsfollowupadminremark"  data-quoteid="' + rows[i].attributes["data-quoteid"].value + '" type="text" style="color: #000" value="" /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
        }

        str += rows[i].attributes["data-FollowupStatus"].value + '  Value: ' + rows[i].attributes["data-QuoteValue"].value + '</span>  <div style="float:right"><select style="color: #000" class="fltfollowreason" id="clsfltfollowreson_' + rows[i].attributes["data-quoteid"].value + '" onchange="UpdateFollowupReason(' + rows[i].attributes["data-quoteid"].value + ')" data-value="' + rows[i].attributes["data-FollowupReason"].value + '">' + readonselect + '  </div> </td>';

        return str;
    }



    function Exportfollowuprecords() {
        var radiobuton = $("#tabquotefollowup").find('input[name="filterAll"]:checked').val();
        var searchbox = $("#tabquotefollowup").find("#allsearchbox").val();
        var startdate_search = $("#tabquotefollowup").find("#followstartdate").val();
        var enddate_search = $("#tabquotefollowup").find("#followenddate").val();
        var ddlexportdist = $("#tabquotefollowup").find("#allddlexportdist").val();
        var ddlcompanyid = $("#tabquotefollowup").find("#CompanyId").val();
        var ddlemailaddress = $("#tabquotefollowup").find("#Email").val();
        var startNumber = $("#tabquotefollowup").find("#startNumber").val();
        var endNumber = $("#tabquotefollowup").find("#endNumber").val();
        var GeographicalId = $("#tabquotefollowup").find("#GeographicalId").val();
        var ddlsymbol = $("#tabquotefollowup").find("#allddlsymbol").val();

        window.location.href = "/Form/ExportQuoteFollowupData?radio=" + radiobuton + "&searchbox=" + searchbox +
            "&searchbox=" + searchbox +
            "&startdate_search=" + startdate_search +
            "&enddate_search=" + enddate_search +
            "&ddlexportdist=" + ddlexportdist +
            "&ddlcompanyid=" + ddlcompanyid +
            "&ddlemailaddress=" + ddlemailaddress +
            "&startNumber=" + startNumber +
            "&endNumber=" + endNumber +
            "&GeographicalId=" + GeographicalId +
            "&ddlsymbol=" + ddlsymbol;
    }



    function followuptab() {
        if (followupload === false) {
            /*GetFollowupOverview("all");*/

            var testtbl = $('#tblfollowup').DataTable({
                //"fixedHeader": {
                //    header: true
                //},
                "ordering": false,
                "processing": true, // for show progress bar
                "serverSide": true, // for process server side
                "filter": true, // this is for disable filter (search box)
                "orderMulti": false, // for disable multiple column at once
                "pageLength": 100,
                "language": { processing: '<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span> ' },
                "aaSorting": [],
                "ajax": {
                    "url": "../Form/LoadQuotationData?tabname=followup",
                    "type": "POST",
                    "datatype": "json",
                    "data": function (d) {
                        d.tablename = "followup";
                        d.radiobuton = $("#tabquotefollowup").find('input[name="filterAll"]:checked').val();
                        d.searchbox = $("#tabquotefollowup").find("#allsearchbox").val();
                        d.startdate_search = $("#tabquotefollowup").find("#followstartdate").val();
                        d.enddate_search = $("#tabquotefollowup").find("#followenddate").val();
                        d.ddlexportdist = $("#tabquotefollowup").find("#allddlexportdist").val();
                        d.ddlcompanyid = $("#tabquotefollowup").find("#CompanyId").val();
                        d.ddlemailaddress = $("#tabquotefollowup").find("#Email").val();
                        d.startNumber = $("#tabquotefollowup").find("#startNumber").val();
                        d.endNumber = $("#tabquotefollowup").find("#endNumber").val();
                        d.GeographicalId = $("#tabquotefollowup").find("#GeographicalId").val();
                        d.ddlsymbol = $("#tabquotefollowup").find("#allddlsymbol").val();
                    }
                },
                "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                    if (aData.PONumber != '' && aData.PONumber != null && aData.PONumber != undefined) {
                        $('td', nRow).css('background-color', 'rgb(217, 237, 249)');
                    }
                    if (aData.IsControlledSubstance) {
                        $('td', nRow).css('color', 'red');
                    }
                },
                "fnDrawCallback": function (oSettings) {
                    var txtallfollowcount = 0;
                    if (oSettings.json.followupdata !== null) {
                        var strfollowup = "<div class='col-md-1 tiles tilesfollow' data-value='' style='min-height:100px;text-align:center; color: #fff;padding: 7px;margin:5px; background-color: rgb(60 141 188)'>All</br><div style='font-size: 18px;position: absolute;bottom: 10px;width: 100%;text-align: center;background: rgb(54 127 169);margin-left: -7px;margin-bottom: -10px;color:#fff' id='txtallfollowcount'></div></div>";
                        $(oSettings.json.followupdata).each(function (i, v) {
                            //var colorR = Math.floor((Math.random() * 256));
                            //var colorG = Math.floor((Math.random() * 256));
                            //var colorB = Math.floor((Math.random() * 256));
                            // strfollowup += "<div class='col-md-1 tiles' style='min-height:100px;text-align:center; color: #fff;padding: 7px;background-color: rgb(" + colorR + "," + colorG + "," + colorB + ")'>" + v.CompanyName + "</br><div style='    font-size: 18px;position: absolute;bottom: 10px;width: 100%;text-align: center;background: #3e4730;margin-left: -7px;margin-bottom: -10px;'>" + v.Product +"</div></div>";
                            strfollowup += "<div class='col-md-1 tiles tilesfollow' style='min-height:100px;text-align:center; color: #fff;padding: 7px;margin:5px; background-color: rgb(60 141 188)' data-value='" + v.CompanyName + "'>" + v.CompanyName + "</br><div style='font-size: 18px;position: absolute;bottom: 10px;width: 100%;text-align: center;background: rgb(54 127 169);margin-left: -7px;margin-bottom: -10px;color:#fff'>" + v.Product + "</div></div>";
                            txtallfollowcount += parseInt(v.Product);
                        });

                        $("#collapseOne").html(strfollowup + "<div class='clearfix'></div>"); $("#txtallfollowcount").html(txtallfollowcount);
                    }

                    var maxHeight = Math.max.apply(null, $(".tiles").map(function () {
                        return $(this).height();
                    }).get());
                    $(".tiles").css('height', maxHeight);

                    followupload = true;

                    var api = this.api();
                    var rows = api.rows({ page: 'current' }).nodes();
                    var last = null;

                    var readonselect = "";
                    readonselect += "<option value='Select'>--Select--</option>";
                    readonselect += "<option value='Price Variation'>Price Variation</option>";
                    readonselect += "<option value='Budgetary'>Budgetary</option>";
                    readonselect += "<option value='Urgency - Lead Time'>Urgency - Lead Time</option>";
                    readonselect += "<option value='All Not Available'>All Not Available</option>";
                    readonselect += "<option value='EP/USP'>EP/USP</option>";
                    readonselect += "<option value='Other Vendor'>Other Vendor</option>";
                    readonselect += "<option value='Late Quotation'>Late Quotation</option>";
                    readonselect += "<option value='Project On Hold'>Project On Hold</option>";
                    readonselect += "<option value='Discount Not Sufficient'>Discount Not Sufficient</option>";
                    readonselect += "<option value='Negotiation'>Negotiation</option>";
                    readonselect += "<option value='Followup Not Required'>Followup Not Required</option>";
                    readonselect += "</select>";


                    api.column(4, { page: 'current' }).data().each(function (group, i) {
                        if (last !== group) {
                            $(rows).eq(i).before(follwupStr(rows, i, group, readonselect)
                                /*'<td class="group" colspan="16" style="' + (rows[i].attributes["data-FreezeQuote"] != null && rows[i].attributes["data-FreezeQuote"].value == "true" ? "BACKGROUND-COLOR:#b95959" : "BACKGROUND-COLOR:#3c8dbc") + ';font-weight:700;color:#fff;padding:10px;">' + group + " | " + rows[i].attributes["data-company"].value + " | " + rows[i].attributes["data-email"].value + ' <span class="clsminiadmin"> <i class="fa fa-thumbs-up" aria-hidden="true" title="Interested" style="font-size: 18px;" onclick="UpdateFollowupStatus(&quot;To be Followup&quot;,' + rows[i].attributes["data-quoteid"].value + ')"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i style="font-size: 18px;" class="fa fa-thumbs-down" aria-hidden="true" title="Removed" onclick="removefollowup(' + rows[i].attributes["data-quoteid"].value + ')" > </i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa fa-envelope" aria-hidden="true" title="Mail" style="font-size: 18px;"  onclick="UpdateFollowupStatus(&quot;Mail Sent&quot;,' + rows[i].attributes["data-quoteid"].value + ')"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa fa-phone" aria-hidden="true" title="Call" style="font-size: 18px;"  onclick="UpdateFollowupStatus(&quot;Call&quot;,' + rows[i].attributes["data-quoteid"].value + ')"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa fa-trophy" aria-hidden="true" title="Won" style="font-size: 18px;"  onclick="UpdateFollowupStatus(&quot;Won&quot;,' + rows[i].attributes["data-quoteid"].value + ')"></i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa fa-snowflake-o" aria-hidden="true" title="Freeze" style="font-size: 18px;"  onclick="FreezeQuote(' + rows[i].attributes["data-quoteid"].value + ')"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   <i class="fa fa-sign-out" aria-hidden="true" title="Lost" style="font-size: 18px;"  onclick="UpdateFollowupStatus(&quot;Lost&quot;,' + rows[i].attributes["data-quoteid"].value + ')"></i>   Value: ' + rows[i].attributes["data-QuoteValue"].value + '</span>  <div style="float:right"><select style="color: #000" class="fltfollowreason" id="clsfltfollowreson_' + rows[i].attributes["data-quoteid"].value + '" onchange="UpdateFollowupReason(' + rows[i].attributes["data-quoteid"].value + ')" data-value="' + rows[i].attributes["data-FollowupReason"].value + '">' + readonselect + ' ' + rows[i].attributes["data-FollowupStatus"].value + ' </div> </td>'*/
                            );
                            last = group;
                        }
                    });

                    $(".fltfollowreason").each(function () {
                        $(this).val($(this).attr('data-value'));
                    });
                    $('.clsfollowupadminremark').donetyping(function () {
                        var quoteid = $(this).attr('data-quoteid');
                        var value = $(this).val();


                        $.ajax({
                            url: '/Form/UpdateFollowupAdminRemark',
                            data: { id: quoteid, followupadminremark: value },
                            type: 'POST',
                            traditional: true, // add this
                            dataType: 'json',
                            success: function (data) {
                                $('#tblfollowup').DataTable().ajax.reload(null, false);
                                toastr.success("You have updated followup status.");
                            }
                        });

                    });
                    testtbl.columns.adjust()
                    $(document).on("click", ".tilesfollow", function () {
                        var value = $(this).attr("data-value");
                        debugger;
                        if (value === '') {
                            $("#tabquotefollowup").find("#CompanyId").val("");
                            $('#tblfollowup').DataTable().draw();
                        }
                        else {
                            $("#tabquotefollowup").find("#CompanyId option").each(function () {
                                if ($(this).text() == value) {
                                    $(this).attr('selected', 'selected');
                                    $('#tblfollowup').DataTable().draw();
                                }
                            });
                        }
                    });

                },
                "columnDefs":
                    [
                        { targets: 4, visible: false },
                        { targets: 5, visible: false },
                        { targets: 6, visible: false }
                    ],
                "createdRow": function (row, data, dataIndex) {
                    // Set the data-status attribute, and add a class
                    $(row).attr('id', 'tr_' + data.QuoteDetailsId);
                    $(row).attr('data-email', data.EmailAddress);
                    $(row).attr('data-company', data.CompanyName);
                    $(row).attr('data-quoteid', data.QuoteId);
                    $(row).attr('data-IsConversionReport', data.IsConversionReport);
                    $(row).attr('data-FollowupReason', (data.FollowupReason === undefined || data.FollowupReason === null) ? "Select" : data.FollowupReason);
                    $(row).attr('data-FollowupStatus', (data.FollowupStatus === 'undefined' || data.FollowupStatus === null) ? "No Action" : data.FollowupStatus);
                    $(row).attr('data-QuoteValue', data.POValue);
                    $(row).attr('data-FreezeQuote', data.FreezeQuote);
                    $(row).attr('data-IsFollowupLost', data.IsFollowupLost);
                    $(row).attr('data-IsFollowupCall', data.IsFollowupCall);
                    $(row).attr('data-IsFollowupWon', data.IsFollowupWon);
                    $(row).attr('data-IsFollowupInterested', data.IsFollowupInterested);
                    $(row).attr('data-IsFollowupMail', data.IsFollowupMail);

                    $(row).attr('data-FollowupAdminRemark', data.FollowupAdminRemark);
                    $(row).attr('data-IsFollowupMeeting', data.IsFollowupMeeting);
                    $(row).attr('data-IsFollowupLessValue', data.IsFollowupLessValue);
                    $(row).attr('data-IsFollowupNegotiation', data.IsFollowupNegotiation);
                    $(row).attr('data-IsFollowupImportant', data.IsFollowupImportant);
                },
                "columns": [
                    { "data": "ChkFirstRow", "orderable": false },
                    { "data": "MoveToProjectText", "orderable": false },
                    { "data": "DownloadSampleRow", "orderable": false },
                    { "data": "DownloadRow", "autoWidth": true, "orderable": false },
                    { "data": "Ref", "name": "Ref", "width": "100px" },
                    { "data": "CompanyName", "name": "CompanyName", "width": "00px" },
                    { "data": "EmailAddress", "name": "EmailAddress", "width": "00px" },
                    { "data": "ProductNameText", "name": "ProductName", "width": "250px" },
                    { "data": "CASNoText", "name": "CASNo" },
                    { "data": "CATNoText", "name": "CATNo" },
                    { "data": "PriceText", "name": "Price" },
                    { "data": "LeadTimeText", "name": "LeadTime", "autoWidth": true },
                    { "data": "AdditionalBatchNoText", "name": "LeadTime", "autoWidth": true },
                    { "data": "FinalPrice", "orderable": false, "swidth": "100px" },
                    { "data": "ItemDiscount", "orderable": false, "swidth": "100px" },
                    { "data": "ProductRemark", "orderable": false, "swidth": "100px" },
                    { "data": "FollowUpDescText", "orderable": false, "swidth": "300px" },
                    { "data": "ContactDetail", "orderable": false, "swidth": "300px" },
                    { "data": "FollowUpRemark", "orderable": false, "swidth": "300px" },
                    { "data": "ActionRow", "orderable": false }
                ]
            });
        }
    }



    function auctiontab() {
        if (auctionupload === false) {

            var testtbl = $('#tblauction').DataTable({
                //"fixedHeader": {
                //    header: true
                //},
                "ordering": false,
                "processing": true, // for show progress bar
                "serverSide": true, // for process server side
                "filter": true, // this is for disable filter (search box)
                "orderMulti": false, // for disable multiple column at once
                "pageLength": 25,
                "language": { processing: '<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span> ' },

                "ajax": {
                    "url": "../Form/LoadQuotationData?tabname=auction",
                    "type": "POST",
                    "datatype": "json"
                },
                "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                    if (aData.IsImportedQuote && aData.MoveToDispatch != true) {
                        $('td', nRow).css('background-color', 'rgb(217, 237, 249)');
                    }
                    if (aData.IsControlledSubstance) {
                        $('td', nRow).css('color', 'red');
                    }
                },
                "fnDrawCallback": function (oSettings) {
                    auctionupload = true;
                    $("#chkauctionAll").click(function () {
                        if ($(this).is(":checked")) {
                            $("#tblauction").find('.clsclubQuote').each(function () {
                                $(this).prop("checked", true);
                            });
                        }
                        else {
                            $("#tblauction").find(".clsclubQuote").each(function () {
                                $(this).prop("checked", false);
                            });
                        }
                    });
                    var api = this.api();
                    var rows = api.rows({ page: 'current' }).nodes();
                    var last = null;

                    api.column(4, { page: 'current' }).data().each(function (group, i) {
                        if (last !== group) {
                            $(rows).eq(i).before(
                                //'<td class="group" colspan="16" style="BACKGROUND-COLOR:#3c8dbc;font-weight:700;color:#fff;padding:10px;">' + group + " | " + rows[i].attributes["data-company"].value + " | " + rows[i].attributes["data-email"].value + '  (<a href="javascript:void(0)" style="color:#fff" onclick="Quote.deleteQuote(' + rows[i].attributes["data-QuoteId"].value + ')">Delete</a>)</td>'
                                '<td class="group" colspan="15" style="' + (rows[i].attributes["data-IsConversionReport"] != null && rows[i].attributes["data-IsConversionReport"].value == "true" ? "BACKGROUND-COLOR:#95647d" : "BACKGROUND-COLOR:#3c8dbc") + ';font-weight:700;color:#fff;padding:10px;"><a style="color: #fff; text-decoration: underline;" href="/Form/Quote/' + rows[i].attributes["data-QuoteId"].value + '">' + group + '</a>' + " | " + rows[i].attributes["data-company"].value + " | " + rows[i].attributes["data-email"].value + ' <div style="float:right" class="clsminiadmin"><a href="javascript:void(0)" style="color:#fff" onclick="Quote.deleteQuote(' + rows[i].attributes["data-QuoteId"].value + ')">Delete</a> | <a style="color:#fff" href="javascript:void(0)" onclick="Quote.Park(' + rows[i].attributes["data-QuoteId"].value + ')">Park</a></div></td>'
                            );
                            last = group;
                        }
                    });

                    testtbl.columns.adjust()
                },
                "columnDefs":
                    [
                        { targets: 4, visible: false },
                        { targets: 5, visible: false },
                        { targets: 6, visible: false }
                    ],
                "createdRow": function (row, data, dataIndex) {
                    // Set the data-status attribute, and add a class
                    $(row).attr('id', 'tr_' + data.QuoteDetailsId);
                    $(row).attr('data-email', data.EmailAddress);
                    $(row).attr('data-company', data.CompanyName);
                    $(row).attr('data-QuoteId', data.QuoteId);
                    $(row).attr('data-IsConversionReport', data.IsConversionReport);
                },
                "columns": [
                    { "data": "ChkFirstRow", "orderable": false },
                    { "data": "MoveToProjectText", "orderable": false },
                    { "data": "DownloadSampleRow", "orderable": false },
                    { "data": "DownloadRow", "autoWidth": true, "orderable": false },
                    { "data": "Ref", "name": "Ref", "width": "100px" },
                    { "data": "CompanyName", "name": "CompanyName", "width": "00px" },
                    { "data": "EmailAddress", "name": "EmailAddress", "width": "00px" },
                    { "data": "ProductNameText", "name": "ProductName", "width": "250px" },
                    { "data": "CASNoText", "name": "CASNo" },
                    { "data": "CATNoText", "name": "CATNo" },
                    { "data": "PriceText", "name": "Price" },
                    { "data": "LeadTimeText", "name": "LeadTime", "autoWidth": true },
                    { "data": "ProductRemark", "orderable": false, "swidth": "100px" },
                    { "data": "FollowUpRemark", "orderable": false, "swidth": "300px" },
                    { "data": "FollowUpRemarkSecond", "orderable": false, "swidth": "300px" },
                    { "data": "ActionRow", "orderable": false }
                ]

            });
        }
    }




    function inhousequotetab() {
        if (inhousequoload === false) {
            var inhousetbl = $('#tblinhouse').DataTable({
                //"fixedHeader": {
                //    header: true
                //},
                "ordering": false,
                "processing": true, // for show progress bar
                "serverSide": true, // for process server side
                "filter": true, // this is for disable filter (search box)
                "orderMulti": false, // for disable multiple column at once
                "pageLength": 25,
                "language": { processing: '<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span> ' },

                "ajax": {
                    "url": "../Form/LoadQuotationData?tabname=inhouse",
                    "type": "POST",
                    "datatype": "json"
                },
                "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                    if (aData.IsImportedQuote && aData.MoveToDispatch != true) {
                        $('td', nRow).css('background-color', 'rgb(217, 237, 249)');
                    }
                    if (aData.IsControlledSubstance) {
                        $('td', nRow).css('color', 'red');
                    }
                },
                "fnDrawCallback": function (oSettings) {
                    inhousequoload = true;

                    $("#chkinhouseAll").click(function () {
                        if ($(this).is(":checked")) {
                            $("#tblinhouse").find('.clsclubQuote').each(function () {
                                $(this).prop("checked", true);
                            });
                        }
                        else {
                            $("#tblinhouse").find(".clsclubQuote").each(function () {
                                $(this).prop("checked", false);
                            });
                        }
                    });
                    var api = this.api();
                    var rows = api.rows({ page: 'current' }).nodes();
                    var last = null;

                    api.column(4, { page: 'current' }).data().each(function (group, i) {
                        if (last !== group) {
                            $(rows).eq(i).before(
                                //'<td class="group" colspan="16" style="BACKGROUND-COLOR:#3c8dbc;font-weight:700;color:#fff;padding:10px;">' + group + " | " + rows[i].attributes["data-company"].value + " | " + rows[i].attributes["data-email"].value + '  (<a href="javascript:void(0)" style="color:#fff" onclick="Quote.deleteQuote(' + rows[i].attributes["data-QuoteId"].value + ')">Delete</a>)</td>'
                                '<td class="group" colspan="15" style="' + (rows[i].attributes["data-IsConversionReport"] != null && rows[i].attributes["data-IsConversionReport"].value == "true" ? "BACKGROUND-COLOR:#95647d" : "BACKGROUND-COLOR:#3c8dbc") + ';font-weight:700;color:#fff;padding:10px;"><a style="color: #fff; text-decoration: underline;" href="/Form/Quote/' + rows[i].attributes["data-QuoteId"].value + '">' + group + '</a>' + " | " + rows[i].attributes["data-company"].value + " | " + rows[i].attributes["data-email"].value + '  <div style="float:right" class="clsminiadmin"><a href="javascript:void(0)" style="color:#fff" onclick="Quote.deleteQuote(' + rows[i].attributes["data-QuoteId"].value + ')">Delete</a> | <a style="color:#fff" href="javascript:void(0)" onclick="Quote.Park(' + rows[i].attributes["data-QuoteId"].value + ')">Park</a></div></td>'

                            );
                            last = group;
                        }
                    });

                    inhousetbl.columns.adjust()
                },
                "columnDefs":
                    [
                        { targets: 4, visible: false },
                        { targets: 5, visible: false }
                    ],
                "createdRow": function (row, data, dataIndex) {
                    // Set the data-status attribute, and add a class
                    $(row).attr('id', 'tr_' + data.QuoteDetailsId);
                    $(row).attr('data-email', data.EmailAddress);
                    $(row).attr('data-company', data.CompanyName);
                    $(row).attr('data-QuoteId', data.QuoteId);
                    $(row).attr('data-IsConversionReport', data.IsConversionReport);
                },
                "columns": [
                    { "data": "ChkFirstRow", "autoWidth": true, "orderable": false },
                    { "data": "MoveToProjectText", "autoWidth": true, "orderable": false },
                    { "data": "DownloadSampleRow", "autoWidth": true, "orderable": false },
                    { "data": "DownloadRow", "autoWidth": true, "orderable": false },
                    { "data": "Ref", "name": "Ref", "width": "100px" },
                    { "data": "CompanyName", "name": "CompanyName", "width": "200px" },
                    { "data": "PONumberText", "name": "PONumber", "width": "100px" },
                    { "data": "ProductNameText", "name": "ProductName", "width": "18%" },
                    { "data": "CASNoText", "name": "CASNo", "width": "6%" },
                    { "data": "CATNoText", "name": "CATNo", "width": "6%" },
                    { "data": "PriceText", "name": "Price", "width": "250px" },
                    { "data": "LeadTimeText", "name": "LeadTime", "autoWidth": true },
                    { "data": "AdditionalBatchNoText", "name": "AdditionalBatchNoText" },
                    { "data": "ProductRemark", "orderable": false, "width": "100px" },
                    { "data": "ActionRow", "orderable": false, "width": "130px" }
                ]

            });
        }
    }

    function Movetoapproved(tablename) {
        var ids = []; var refNoarr = [];
        $("#" + tablename).find('.clsclubQuote').each(function () {
            if ($(this).is(':checked')) {
                ids.push($(this).val());
            }
        });

        if (ids.length === 0) {
            toastr.error("Please select atleast one Product");
            return false;
        }

        $.ajax({
            url: '/Form/MoveQuoteTOApproved',
            data: { id: ids },
            type: 'POST',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                if (data.success) {
                    $('#' + tablename).DataTable().ajax.reload(null, false);
                    toastr.success(data.message);
                }
                else {
                    toastr.error(data.message);
                }
            }
        });
    }

    function ParkAll(tablename) {
        var ids = []; var refNoarr = [];
        $("#" + tablename).find('.clspark').each(function () {
            if ($(this).is(':checked')) {
                ids.push($(this).val());
            }
        });

        if (ids.length === 0) {
            toastr.error("Please select atleast one Product");
            return false;
        }

        // var str = "<div class='row'><div class='col-md-12'><p>Please enter park reason:<p> <textarea id='txtparkreason' style='width:100%'></textarea></div></div>";
        swal({
            title: "Are you sure want to park it?",
            //text: str,
            //html: true,
            //text: "You have already created quotation for this company.",
            type: "warning", customClass: 'swalwide',
            showCancelButton: true,
            confirmButtonClass: "btn-danger",
            confirmButtonText: "Yes, Added it!",
            cancelButtonText: "No, cancel!",
            closeOnConfirm: false,
            closeOnCancel: true
        },
            function (isConfirm) {
                if (isConfirm) {
                    //var parkreason = $('#txtparkreason').val();
                    //if (parkreason != '' && parkreason.trim() !== '') {
                    $.ajax({
                        url: '/Form/ParkAllQuote?parkreason=' + parkreason,
                        data: { id: ids },
                        type: 'POST',
                        traditional: true, // add this
                        dataType: 'json',
                        success: function (data) {
                            if (data.success) {
                                $('#' + tablename).DataTable().ajax.reload(null, false);
                                // $('#' + tablename).DataTable().ajax.reload();
                                toastr.success(data.message);
                            }
                            else {
                                toastr.error(data.message);
                            }
                        }
                    });
                    //}
                    //else {
                    //    toastr.error("Please enter park reason.");
                    //    return false;
                    //}
                } else {
                    toastr.error("Your added quotation is safe :)");
                }
            });
    }

    function Movetounapproved(tablename) {
        var ids = []; var refNoarr = [];
        $("#" + tablename).find('.clsclubQuote').each(function () {
            if ($(this).is(':checked')) {
                ids.push($(this).val());
            }
        });

        if (ids.length === 0) {
            toastr.error("Please select atleast one Product");
            return false;
        }

        $.ajax({
            url: '/Form/MoveQuoteTOAllFromApproved',
            data: { id: ids },
            type: 'POST',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                if (data.success) {
                    $('#' + tablename).DataTable().ajax.reload(null, false);
                    toastr.success(data.message);
                }
                else {
                    toastr.error(data.message);
                }
            }
        });
    }




    function Copyrecords(tablename) {
        var ids = []; var refNoarr = [];
        $("#" + tablename).find('.clsclubQuote').each(function () {
            if ($(this).is(':checked')) {
                ids.push($(this).val());

            }
        });

        if (ids.length === 0) {
            toastr.error("Please select atleast one Product");
            return false;
        }

        $.ajax({
            url: '/Form/PrintQuotationListAllRecord',
            data: { id: ids },
            type: 'POST',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $('.modal-body').html(data.html);
                $('#myModal').modal({ show: true });
                $(".modal-dialog").css("width", "1080px");

                $('#myModal').find(".modal-footer").hide();
            }
        });
    }

    function GetAllAdditionaltest(additionaltest) {
        var str = "<b>Default Test: </b>COA, HPLC, IR, MASS, 1H-NMR, TGA </br>";
        str += "<b>Additional Test: </b>" + additionaltest;
        $('.modal-body').html(str);
        $('#myModal').modal({ show: true });
    }

    function removefollowup(id) {

        //var followupReason = $("#clsfltfollowreson_" + id).val();
        //if (followupReason === 'Select') {
        //    toastr.error('Please select reason');
        //    return false;
        //}

        $.ajax({
            url: '/Form/RemoveFollowup',
            data: { id: id, followupReason: followupReason },
            type: 'POST',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $('#tblfollowup').DataTable().ajax.reload(null, false);
                toastr.success("You have removed selected products from followup list.");
            }
        });
    }

    function FreezeQuote(id) {
        $.ajax({
            url: '/Form/FreezeQuote',
            data: { id: id },
            type: 'POST',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $('#tblfollowup').DataTable().ajax.reload(null, false);
                toastr.success("You have removed selected products from followup list.");
            }
        });
    }

    function Commonremovefollowup() {
        var id = [];
        $("#tblfollowup").find(".clsclubQuote").each(function () {
            if ($(this).is(":checked")) {
                id.push($(this).val());
            }
        });
        $.ajax({
            url: '/Form/Commonremovefollowup',
            data: { ids: id },
            type: 'POST',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $('#tblfollowup').DataTable().ajax.reload(null, false);
                toastr.success("You have removed selected products from followup list.");
            }
        });
    }

    function CommonFreezeQuote() {
        var id = [];
        $("#tblfollowup").find(".clsclubQuote").each(function () {
            if ($(this).is(":checked")) {
                id.push($(this).val());
            }
        });
        $.ajax({
            url: '/Form/CommonFreezeQuote',
            data: { ids: id },
            type: 'POST',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $('#tblfollowup').DataTable().ajax.reload(null, false);
                toastr.success("You have removed selected products from followup list.");
            }
        });
    }

    function CommonUpdateFollowupStatus(followupstatus) {

        var id = [];
        $("#tblfollowup").find(".clsclubQuote").each(function () {
            if ($(this).is(":checked")) {
                id.push($(this).val());
            }
        });


        $.ajax({
            url: '/Form/CommonUpdateFollowupStatus',
            data: { ids: id, followupStatus: followupstatus },
            type: 'POST',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $('#tblfollowup').DataTable().ajax.reload(null, false);
                toastr.success("You have updated followup status.");
            }
        });
    }

    function UpdateFollowupStatus(followupstatus, id) {
        $.ajax({
            url: '/Form/UpdateFollowupStatus',
            data: { id: id, followupStatus: followupstatus },
            type: 'POST',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $('#tblfollowup').DataTable().ajax.reload(null, false);
                toastr.success("You have updated followup status.");
            }
        });
    }

    function UpdateFollowupReason(id) {
        var followupReason = $("#clsfltfollowreson_" + id).val();
        $.ajax({
            url: '/Form/UpdateFollowupReason',
            data: { id: id, followupReason: followupReason },
            type: 'POST',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $('#tblfollowup').DataTable().ajax.reload(null, false);
                toastr.success("You have updated followup reason.");
            }
        });
    }

    function Printrecords() {
        var ids = []; var refNoarr = [];
        $("#tblfollowup").find('.clsclubQuote').each(function () {
            if ($(this).is(':checked')) {
                ids.push($(this).val());

                var ref = $(this).attr('data-refno');
                var added = false;
                $.map(refNoarr, function (elementOfArray, indexInArray) {
                    if (elementOfArray == ref) {
                        added = true;
                    }
                });
                if (!added) {
                    refNoarr.push(ref);
                }
            }
        });

        if (ids.length === 0) {
            toastr.error("Please select atleast one Product");
            return false;
        }
        if (refNoarr.length > 1) {
            toastr.error("Please select only one ref no quote.");
            return false;
        }

        $.ajax({
            url: '/Form/PrintFollowupRecord',
            data: { id: ids },
            type: 'POST',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $('.modal-body').html(data.html);
                $('#myModal').modal({ show: true });
                $(".modal-dialog").css("width", "1080px");

                $('#myModal').find(".modal-footer").show();
                $('#myModal').find(".modal-footer").attr('onclick', 'setFollowUpRemark("' + ids + '")');
            }
        });
    }

    function setFollowUpRemark(ids) {
        $.ajax({
            url: '/Form/SetFollowupRecord',
            data: { id: ids },
            type: 'POST',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $('#tblfollowup').DataTable().ajax.reload(null, false);
            }
        });
    }

    $("#tblfollowup").find('#selectallchk').change(function () {

        if ($(this).is(':checked')) {
            $("#tblfollowup").find('.clsclubQuote').each(function () {
                $(this).prop('checked', true);
            });
        }
        else {
            $("#tblfollowup").find('.clsclubQuote').each(function () {
                $(this).prop('checked', false);
            });
        }
    });

    function AllQuotePrice(id) {
        $.ajax({
            url: '/Form/AllQuotePrice?id=' + id,
            data: {},
            type: 'GET',
            traditional: true,
            dataType: 'json',
            success: function (data) {
                $('#invoiceQueryModal .modal-body').html(data.html);
                $('#invoiceQueryModal').modal({ show: true });
            }
        });
    }

    function GetAuditLogForQuote(id) {
        $.ajax({
            url: '/Form/GetAuditLogForQuote?id=' + id,
            data: {},
            type: 'GET',
            traditional: true,
            dataType: 'json',
            success: function (data) {
                $('#invoiceQueryModal .modal-body').html(data.html);
                $('#invoiceQueryModal').modal({ show: true });
            }
        });
    }

    function GenerateQuoteRFQ() {
        var ids = []; var refNoarr = [];
        $("#tblrfq").find('.clsRFQQuote').each(function () {
            if ($(this).is(':checked')) {
                ids.push($(this).val());

                var ref = $(this).attr('data-companyName');
                var added = false;
                $.map(refNoarr, function (elementOfArray, indexInArray) {
                    if (elementOfArray == ref) {
                        added = true;
                    }
                });
                if (!added) {
                    refNoarr.push(ref);
                }
            }
        });

        if (ids.length === 0) {
            toastr.error("Please select atleast one Product");
            return false;
        }
        if (refNoarr.length > 1) {
            toastr.error("Please select only one company name for quote.");
            return false;
        }

        $.ajax({
            url: '/Form/CompanySelectionPopup',
            data: { id: ids, companyName: refNoarr[0] },
            type: 'POST',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $('#myModal').find('.modal-body').html(data.html);
                $('#myModal').modal({ show: true });
                $('#myModal').find(".modal-dialog").css("width", "1080px");
                $('#myModal').find('.modal-body').find(".box-body").css('overflow', 'scroll').css('height', '400px');
                $("#tblrfqcompselection").DataTable();
            }
        });
    }
    function followupdescgenerate(id) {
        $.ajax({
            url: '/Form/AddFollowpDescription?id=' + id,
            data: {},
            type: 'GET',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $('#invoiceQueryModal .modal-body').html(data.html);
                $('#invoiceQueryModal').modal({ show: true });
                // $("#invoiceQueryModal .modal-content").css("width", "1080px");
            }
        });
    }


    $('input[name^="filterAll"]').each(function () {
        //code
        if ($(this).val() === "quoteid") {
            $(this).prop('checked', true);
        }
    });


    function SaveData(tblName) {
        var cnt = 0;
        var proidscount = 0;
        $("#example1").find(".clsclubQuote").each(function () {
            if ($(this).is(":checked")) {
                proidscount += 1;
            }
        });
        $("#example1").find(".clsclubQuote").each(function () {
            if ($(this).is(":checked")) {
                var id = $(this).val();
                var batchid = $("#example1").find("#additionalBatch_" + id).val();
                var coa = $("#example1").find("#coa_" + id).val();
                var activityStatus = $("#example1").find("#activityStatus_" + id).val();
                if (id !== '') {
                    $.ajax({
                        type: "GET",
                        url: "/Form/UpdateQuoteDetailsFromQuoteList?id=" + id + "&batchid=" + batchid + "&coa=" + coa + "&activityStatus=" + activityStatus,
                        dataType: "json",
                        async: false,
                        data: {},
                        success: function (result) {
                        },
                        complete: function (data) {
                            cnt += 1;
                            successalertproremark(cnt, proidscount);
                        }
                    });
                }
                else {
                    cnt += 1;
                    successalertproremark(cnt, proidscount);
                }
            }
        });
    }

    $("#CompanyId").change(function () {
        GetAllEmailByCompanyId($(this).val());
    });

    function GetAllEmailByCompanyId(compId) {
        $.ajax({
            url: "/Form/GetAllEmailByCompanyId",
            dataType: "json",
            data: {
                compId: compId
            },
            success: function (data) {
                autocomplete(document.getElementById("Email"), data);
            }
        });
    }

    function autocomplete(inp, arr) {
        /*the autocomplete function takes two arguments,
        the text field element and an array of possible autocompleted values:*/
        var currentFocus;
        /*execute a function when someone writes in the text field:*/
        inp.addEventListener("input", function (e) {
            var a, b, i, val = this.value;
            /*close any already open lists of autocompleted values*/
            closeAllLists();
            if (!val) { return false; }
            currentFocus = -1;
            /*create a DIV element that will contain the items (values):*/
            a = document.createElement("DIV");
            a.setAttribute("id", this.id + "autocomplete-list");
            a.setAttribute("class", "autocomplete-items");
            /*append the DIV element as a child of the autocomplete container:*/
            this.parentNode.appendChild(a);
            /*for each item in the array...*/
            for (i = 0; i < arr.length; i++) {
                /*check if the item starts with the same letters as the text field value:*/
                if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
                    /*create a DIV element for each matching element:*/
                    b = document.createElement("DIV");
                    /*make the matching letters bold:*/
                    b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
                    b.innerHTML += arr[i].substr(val.length);
                    /*insert a input field that will hold the current array item's value:*/
                    b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
                    /*execute a function when someone clicks on the item value (DIV element):*/
                    b.addEventListener("click", function (e) {

                        /*insert the value for the autocomplete text field:*/
                        inp.value = this.getElementsByTagName("input")[0].value;

                        /*GetCompanyDetailsFromEmail(inp.value);*/

                        /*close the list of autocompleted values,
                        (or any other open lists of autocompleted values:*/
                        closeAllLists();
                    });
                    a.appendChild(b);
                }
            }
        });
        /*execute a function presses a key on the keyboard:*/
        inp.addEventListener("keydown", function (e) {
            var x = document.getElementById(this.id + "autocomplete-list");
            if (x) x = x.getElementsByTagName("div");
            if (e.keyCode == 40) {
                /*If the arrow DOWN key is pressed,
                increase the currentFocus variable:*/
                currentFocus++;
                /*and and make the current item more visible:*/
                addActive(x);
            } else if (e.keyCode == 38) { //up
                /*If the arrow UP key is pressed,
                decrease the currentFocus variable:*/
                currentFocus--;
                /*and and make the current item more visible:*/
                addActive(x);
            } else if (e.keyCode == 13) {
                /*If the ENTER key is pressed, prevent the form from being submitted,*/
                e.preventDefault();
                if (currentFocus > -1) {
                    /*and simulate a click on the "active" item:*/
                    if (x) x[currentFocus].click();
                }
            }
        });
        inp.addEventListener("focus", function (e) {
            var a, b, i, val = this.value;
            /*close any already open lists of autocompleted values*/
            closeAllLists();
            //if (!val) { return false; }
            currentFocus = -1;
            /*create a DIV element that will contain the items (values):*/
            a = document.createElement("DIV");
            a.setAttribute("id", this.id + "autocomplete-list");
            a.setAttribute("class", "autocomplete-items");
            /*append the DIV element as a child of the autocomplete container:*/
            this.parentNode.appendChild(a);
            /*for each item in the array...*/
            for (i = 0; i < arr.length; i++) {
                /*check if the item starts with the same letters as the text field value:*/
                if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
                    /*create a DIV element for each matching element:*/
                    b = document.createElement("DIV");
                    /*make the matching letters bold:*/
                    b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
                    b.innerHTML += arr[i].substr(val.length);
                    /*insert a input field that will hold the current array item's value:*/
                    b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
                    /*execute a function when someone clicks on the item value (DIV element):*/
                    b.addEventListener("click", function (e) {

                        /*insert the value for the autocomplete text field:*/
                        inp.value = this.getElementsByTagName("input")[0].value;
                        /*close the list of autocompleted values,
                        (or any other open lists of autocompleted values:*/
                        closeAllLists();
                    });
                    a.appendChild(b);
                }
            }
        });
        function addActive(x) {
            /*a function to classify an item as "active":*/
            if (!x) return false;
            /*start by removing the "active" class on all items:*/
            removeActive(x);
            if (currentFocus >= x.length) currentFocus = 0;
            if (currentFocus < 0) currentFocus = (x.length - 1);
            /*add class "autocomplete-active":*/
            x[currentFocus].classList.add("autocomplete-active");
        }
        function removeActive(x) {
            /*a function to remove the "active" class from all autocomplete items:*/
            for (var i = 0; i < x.length; i++) {
                x[i].classList.remove("autocomplete-active");
            }
        }
        function closeAllLists(elmnt) {
            /*close all autocomplete lists in the document,
            except the one passed as an argument:*/
            var x = document.getElementsByClassName("autocomplete-items");
            for (var i = 0; i < x.length; i++) {
                if (elmnt != x[i] && elmnt != inp) {
                    x[i].parentNode.removeChild(x[i]);
                }
            }
        }

        document.addEventListener("click", function (e) {
            closeAllLists(e.target);
        });


    }
</script>
<style type="text/css">
    #example1_processing {
        top: 2%;
    }

    .dataTables_wrapper .col-sm-5, .dataTables_info {
        float: right;
    }

    .pagination {
        float: left;
    }

    .showSweetAlert {
        margin-top: -20% !important;
        overflow-y: auto;
        max-height: 80%;
    }

    .swalbig {
        width: 75% !important;
        left: 30% !important;
    }

    .autocomplete {
        /*the container must be positioned relative:*/
        position: relative;
        display: inline-block;
    }

    .autocomplete-items {
        position: relative;
        border: 1px solid #d4d4d4;
        border-bottom: none;
        border-top: none;
        z-index: 99;
        /*position the autocomplete items to be the same width as the container:*/
        top: 100%;
        left: 0;
        right: 0;
    }

        .autocomplete-items div {
            padding: 10px;
            cursor: pointer;
            background-color: #fff;
            border-bottom: 1px solid #d4d4d4;
        }

    /*.autocomplete-items div:hover {*/
    /*when hovering an item:*/
    /*background-color: #e9e9e9;
            }*/

    .autocomplete-active {
        /*when navigating through the items using the arrow keys:*/
        background-color: DodgerBlue !important;
        color: #ffffff;
    }

    #Emailautocomplete-list {
        position: absolute !important;
    }

    .datepicker {
        z-index: 99999 !important;
    }
</style>

@if (Synzeal_Inventory.Models.SessionCookieManagement.IsMiniAdmin)
{
    <script>
        $(".btn").hide();
        $(".clstooltip").hide();
    </script>
    <text>
        <style>
            .clsminiadmin {
                display: none;
            }
        </style>
    </text>
}
@if (Synzeal_Inventory.Models.SessionCookieManagement.IsDomesticDispatch)
{
    <script>
        $(".btn").hide();
        $(".clstooltip").hide();
    </script>
    <text>
        <style>
            .clsminiadmin {
                display: none;
            }
        </style>
    </text>
}