@{
    ViewBag.Title = "Terms";
    Layout = null;
}

<!-- left column -->
<div class="col-md-12">
    <!-- general form elements -->
    <div class="box box-primary">
        <div class="box-header with-border">
            <h3 class="box-title">Add Missive</h3>
        </div>
        <!-- /.box-header -->
        <!-- form start -->
        <form role="form">
            <div class="box-body">
                <div class="form-group">
                    <label for="exampleInputEmail1">Term Name</label>
                    <input type="text" class="form-control" id="term" name="term" placeholder="Term Name" required>
                </div>
                @*<div class="form-group">
                    <label for="inputEmail3" class="col-sm-2 control-label">Value</label>
                    <div class="col-sm-10">
                        <textarea id="editor1" name="editor1" rows="10" cols="80"></textarea>
                    </div>
                </div>*@
                <div class="form-group" style="text-align:right">
                    <button type="button" onclick="Quote.addMissiveData()" class="btn btn-primary">Save</button>
                </div>
            </div>
        </form>
    </div>
</div>
<script src="@Url.Content("~/Content/bower_components/ckeditor/ckeditor.js")"></script>
<script>
$("#alertsuccess").hide();
$(function () {
        CKEDITOR.replace('editor1');
});

$("#Id").change(function () {
        if ($("#Id").val() === "" || $("#Id").val() === undefined) {
            CKEDITOR.instances['editor1'].setData('');
            return false;
        }
        $.ajax({
            type: "GET",
            url: "/Form/GetMissiveResponseById?id=" + $("#Id").val(),
            success: function (results) {
                CKEDITOR.instances['editor1'].setData(results.data.Description);
            }
        });
});

function SaveData() {
        $(".error-msg").hide();
        var body = CKEDITOR.instances['editor1'].getData();
        var id = $("#Id").val();
        if ($("#Id").val() === "" || $("#Id").val() === undefined) {
            return false;
        }
        var passData = {
            'Id': id,
            'Message': body,
        };
        $.ajax({
            type: "POST",
            url: "/Form/SaveMissiveResponseData",
            data: passData,
            success: function (results) {
                $("#alertsuccess").show();
                setTimeout(function () {
                    $("#alertsuccess").fadeOut();
                }, 3000);
            }
        });
}
</script>