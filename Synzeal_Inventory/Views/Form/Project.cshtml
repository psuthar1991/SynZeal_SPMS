@{
    ViewBag.Title = "Project";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@model List<SZ_QuotationModel>
@using Synzeal_Inventory.Models

<script src="https://cdn.datatables.net/plug-ins/1.10.22/pagination/select.js"></script>
<style type="text/css">
    #example1 input {
        border: 0px;
    }
</style>
<section class="content-header">
    <h1>
        <div style="float:left">Project List</div>

        <div style="background: rgb(202, 251, 217);    font-size: 16px; height: 16px; width: 25px;float: left;    margin: 6px 10px 0 50px;"></div><div style="float: left;    font-size: 16px;margin-top: 5px;"> In-Stock</div>
        <div style="background: #ffe6b3;    font-size: 16px; height: 16px; width: 25px;float: left;    margin: 6px 10px 0 10px;"></div><div style="float: left;    font-size: 16px;margin-top: 5px;"> Unpacked</div>
        <div style="background:rgb(250, 209, 255); font-size: 16px; height: 16px; width: 25px;float: left;    margin: 6px 10px 0 10px;"></div><div style="float: left;    font-size: 16px;margin-top: 5px;"> Packed</div>
        <div style="background: #ff9999;    font-size: 16px; height: 16px; width: 25px;float: left;    margin: 6px 10px 0 10px;"></div><div style="float: left;    font-size: 16px;margin-top: 5px;"> Invoice</div>

        @if (SessionCookieManagement.IsControlledSubstance)
        {
            <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="SaveAll()">Save All</a>
            <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="Printrecords()">Copy</a>
            <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="Printrecords('copymail')">Copy Mail</a>
            <a href="javascript:void(0)" style="float: right;margin-right: 8px;" class="btn btn-primary" onclick="ExportAllTab()">Export</a>

        }
        else if (SessionCookieManagement.IsGLP)
        {
            <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="SaveAll()">Save All</a>
        }
        else
        {
            <a href="javascript:void(0)" style="float:right;" class="btn btn-primary" onclick="HoldAll()">Hold All</a>
            <a href="javascript:void(0)" style="float: right;margin-right: 8px;" class="btn btn-primary" onclick="ExportAllTab()">Export</a>
            @*<a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="DataApprovedrecords()">Data Approved</a>*@
            <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="Printrecords()">Copy</a>
            <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="Printrecords('copymail')">Copy Mail</a>
            <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="SaveAll()">Save All</a>
            if (SessionCookieManagement.IsProjectLogin || SessionCookieManagement.IsDispatch)
            {
                <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="MoveToDispatchList()">Move to Dispatch</a>
            }
            if (SessionCookieManagement.IsProjectLogin || SessionCookieManagement.IsAdmin)
            {
                <a href="/Form/Purchase" style="float:right;margin-right:8px;" class="btn btn-primary">Purchase Login</a>
                <a href="/Form/ResQty" style="float:right;margin-right:8px;" class="btn btn-primary">Res. QTY</a>
            }
            if (SessionCookieManagement.UserEmail == "parthsuthar2010@gmail.com")
            {
                <a href="/Form/SyncSAPData" style="float:right;margin-right:8px;" class="btn btn-primary">Sync</a>
            }
        }
    </h1>
    <div class="clearfix"></div>
</section>
<section class="content">
    <div class="row">
        <div class="col-xs-12">
            <div class="box box-primary">
                <ul class="nav nav-tabs">

                    @if (SessionCookieManagement.IsControlledSubstance)
                    {
                        <li class="active"><a data-toggle="tab" href="#tabcontrolledsubstance" onclick="controlledsubstancetab()" data-tabname="controlledsubstance">CONTROLLED SUBSTANCE</a></li>
                        <li><a data-toggle="tab" href="#tabcompletedcontrolledsubstance" onclick="completedcontrolledsubstancetab()" data-tabname="completedcontrolledsubstance">COMPLETED CONTROLLED SUBSTANCE</a></li>
                    }
                    else if (SessionCookieManagement.IsGLP)
                    {
                        <li class="active"><a data-toggle="tab" href="#tabglp" onclick="glptab()" data-tabname="glp">GLP</a></li>
                    }
                    else
                    {
                        <li><a data-toggle="tab" href="#tabnioaction" onclick="noactiontab()" data-tabname="noaction">NO ACTION (@ViewBag.NoActionCount)</a></li>
                        <li class="active"><a data-toggle="tab" href="#home" data-tabname="all">ALL (@ViewBag.AllCount)</a></li>
                        <li><a data-toggle="tab" href="#watchlist" onclick="watchlisttab()"  data-tabname="watchlist">WATCH LIST (@ViewBag.WatchListCount)</a></li>
                        @*<li><a data-toggle="tab" href="#newhome" data-tabname="newall">NEW ALL (@ViewBag.AllCount)</a></li>*@
                        if (!SessionCookieManagement.IsInternational)
                        {
                            <li><a data-toggle="tab" href="#tabassigned" onclick="assignedtab()" data-tabname="assigned">ASSIGNED</a></li>
                        }
                        <li><a data-toggle="tab" href="#tabsynthesis" onclick="synthesistab()" data-tabname="synthesis">SYNTHESIS (@ViewBag.SynthesisCount)</a></li>
                        <li><a data-toggle="tab" href="#menu3" onclick="inhousetab()" data-tabname="inhouse">IN-HOUSE</a></li>
                        if (!SessionCookieManagement.IsInternational)
                        {
                            <li><a data-toggle="tab" href="#tabdomestic" onclick="domestictab()" data-tabname="domestic">DOMESTIC PO – IN-STOCK (@ViewBag.DomesticCount)</a></li>
                            <li><a data-toggle="tab" href="#tabexport" onclick="exporttab()" data-tabname="export">EXPORT (@ViewBag.ExportCount)</a></li>
                        }
                        <li><a data-toggle="tab" href="#tabinstock" onclick="instocktab()" data-tabname="instock">IN-STOCK (@ViewBag.InStockCount)</a></li>
                        <li><a data-toggle="tab" href="#tabpurchase" onclick="purchasetab()" data-tabname="purchase">PURCHASE (@ViewBag.PurchaseCount)</a></li>
                        if (!SessionCookieManagement.IsInternational)
                        {
                            <li><a data-toggle="tab" href="#tabpurchaserfq" onclick="purchaserfqtab()" data-tabname="purchaserfq">PURCHASE RFQ</a></li>
                        }
                        <li><a data-toggle="tab" href="#menu1" data-tabname="hold" onclick="holdtab()">HOLD (@ViewBag.HoldCount)</a></li>
                        @*<li><a data-toggle="tab" href="#tabquery" onclick="querytab()" data-tabname="query">QUERY (@ViewBag.QueryCount)</a></li>*@
                        @*@if (!SessionCookieManagement.IsInternational)
            {
                <li><a data-toggle="tab" href="#tabsynthesislog" onclick="synthesislogtab()" data-tabname="synthesislog">SYN. LOG (@ViewBag.SynthesisLogCount)</a></li>
            }*@
                        <li><a data-toggle="tab" href="#tabcancelledproduct" onclick="cancelledproducttab()" data-tabname="cancelledproduct">CAN. INHOUSE</a></li>
                        <li><a data-toggle="tab" href="#tabcontrolledsubstance" onclick="controlledsubstancetab()" data-tabname="controlledsubstance">CONTROLLED SUBSTANCE</a></li>
                        <li><a data-toggle="tab" href="#tabcompletedcontrolledsubstance" onclick="completedcontrolledsubstancetab()" data-tabname="completedcontrolledsubstance">COMPLETED CONTROLLED SUBSTANCE</a></li>
                    }

                    @if (SessionCookieManagement.UserEmail == "parthsuthar2010@gmail.com")
                    {
                        <li><a data-toggle="tab" href="#tabglp" onclick="glptab()" data-tabname="glp">GLP</a></li>
                    }
                </ul>
                <div class="tab-content">
                    <div id="home" class="tab-pane fade in">
                        <!-- /.box-header -->
                        <div class="box-body " id="divProj">
                            <div style="margin: 8px 20px;box-shadow: 1px 1px 2px 2px #ececec;padding: 3px;">
                                <div class="form-group" style="margin-bottom:0">
                                    <div class="col-md-4" style="margin-top:6px">
                                        <div class="radio">
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="ponumber">
                                                PO #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="company">
                                                Company
                                            </label>&nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="productname">
                                                Product
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="cas">
                                                CAS #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="cat">
                                                CAT #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="batchno">
                                                Batch #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="other">
                                                Data Remark / Reason
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-8" style="margin-top:9px">
                                        <div>
                                            <input class="form-control" id="allsearchbox" type="text" placeholder="Enter search string" style="width:300px; float:left">
                                            <a href="javascript:void(0)" style="float:left;margin-left:8px;" class="btn btn-primary" onclick="$('#example1').DataTable().draw()">Search</a>
                                            @if (!SessionCookieManagement.IsProjectLogin)
                                            {
                                                <a href="javascript:void(0)" style="float:right" class="btn btn-primary" onclick="companyRecordsWithCount()">Company Record</a>
                                            }
                                            <a href="javascript:void(0)" style="float:right;margin-right:15px" class="btn btn-primary" onclick="CancelledProduct()">Cancel Product</a>
                                            @*@if (!SessionCookieManagement.IsProjectLogin)
                                {*@
                                            <a href="javascript:void(0)" style="float:right;margin-right:15px" class="btn btn-primary" onclick="sendorderemail()">OC</a>
                                            <a href="javascript:void(0)" style="float:right;margin-right:15px" class="btn btn-primary" onclick="projectreport()">Report</a>
                                            @*//}*@
                                            <a href="javascript:void(0)" style="float:right;margin-right:15px" class="btn btn-primary" onclick="GetAuditLogForProject()">Log</a>
                                            <label style="margin-left:15px; margin-top:5px;">
                                                <input type="checkbox" id="chkallpriority" name="chkpriority" onchange="$('#example1').DataTable().draw()" /> Priority?
                                            </label>
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Sci. Name : </label>
                                        @Html.DropDownList("ScientistListItem", (IEnumerable<SelectListItem>)ViewBag.ScientistListItem, new { @class = "form-control", @onchange = "$('#example1').DataTable().draw()" })
                                    </div>
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Sub Sci. Name : </label>
                                        @Html.DropDownList("SubScientistListItem", (IEnumerable<SelectListItem>)ViewBag.SubScientistListItem, new { @class = "form-control", @onchange = "$('#example1').DataTable().draw()" })
                                    </div>
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Activity : </label>
                                        <select class="form-control" id="fltactivity" onchange="$('#example1').DataTable().draw()">
                                            <option value=''>--Select--</option>
                                            <option value='Approval First'>Approval First</option>
                                            <option value='Repeat Order'>Repeat Order</option>
                                            <option value='Repeat Order - Dispatch'>Repeat Order - Dispatch</option>
                                            <option value='Repeat Order - Approval First'>Repeat Order - Approval First</option>
                                            <option value='Short Qty Dispatch'>Short Qty Dispatch</option>
                                            <option value='Short Qty Dispatched'>Short Qty Dispatched</option>
                                            <option value='Sample Request'>Sample Request</option>
                                            <option value='Sample Sent'>Sample Sent</option>
                                            <option value='Sample Approved'>Sample Approved</option>
                                            @*<option value='Insufficient QTY'>Insufficient QTY</option>*@
                                            <option value='Quote - Data Sent'>Quote - Data Sent</option>
                                            <option value='Quote - Data Approved'>Quote - Data Approved</option>
                                        </select>
                                    </div>
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Status : </label>
                                        @Html.DropDownList("fltprostatusItem", (IEnumerable<SelectListItem>)ViewBag.fltprostatusItem, new { @class = "form-control", @onchange = "$('#example1').DataTable().draw()" })
                                    </div>
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Type : </label>
                                        @Html.DropDownList("fltprotypeItem", (IEnumerable<SelectListItem>)ViewBag.fltprotypeItem, new { @class = "form-control", @onchange = "$('#example1').DataTable().draw()" })
                                    </div>

                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Geographical : </label>
                                        @Html.DropDownList("fltgeographicallocation", (IEnumerable<SelectListItem>)ViewBag.GeographicalLocationList, null, new { @class = "form-control", @onchange = "$('#example1').DataTable().draw()" })
                                    </div>


                                    <div class="col-md-2" style=" margin-top: 6px; ">
                                        <label>Est. Date : </label>
                                        <input type="text" id="fltestdate" class="datepicker" value="" />
                                        <i class="fa fa-recycle" onclick="datesearch('example1')"></i>
                                    </div>
                                    <div class="col-md-2" style=" margin-top: 6px; ">
                                        <label>GLP : </label>
                                        <select id="fltglp" class="form-control" onchange="$('#example1').DataTable().draw()">
                                            <option value="">--Select--</option>
                                            <option value="Yes">Yes</option>
                                            <option value="No">No</option>
                                        </select>
                                        <i class="fa fa-recycle" onclick="datesearch('example1')"></i>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                            <br />
                            <table id="example1" class="table table-condensed table-striped table-bordered  table-hover" cellspacing="0">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="selectAllclsSaverow" /></th>
                                        <th><input type="checkbox" id="selectAllclsMoveDispatch" /></th>
                                        <th>App.</th>
                                        <th>#</th>
                                        <th>PO Date</th>
                                        <th><span title="Priority">Pty</span></th>
                                        <th>Diff</th>
                                        <th>PO No</th>
                                        <th>Company Name</th>
                                        <th>Project Type</th>
                                        <th>Scientist</th>
                                        <th>Sub-Scientist</th>
                                        <th></th>
                                        <th>Lead Time</th>
                                        <th>Sci. Assg.</th>
                                        <th>Syn. Start Date</th>
                                        <th></th>
                                        <th>Raw Material</th>
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th></th>
                                        <th>Qty (mg)</th>
                                        <th>Batch No</th>
                                        <th>COA</th>
                                        <th></th>
                                        <th></th>
                                        <th>Activity</th>
                                        <th>Status</th>
                                        <th>Est. Date</th>
                                        <th>Count</th>
                                        @*<th>Scientist Status</th>*@
                                        <th>Sec. Exp.</th>
                                        <th></th>
                                        <th>Data Remark</th>
                                        <th>Reason</th>
                                        <th>Technical Contact</th>
                                        <th>Pack Size</th>
                                        <th>GLP</th>
                                        <th>GLP Remark</th>
                                        <th>GLP Status</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="watchlist" class="tab-pane fade in">
                        <!-- /.box-header -->
                        <div class="box-body " id="divProj">
                            <div style="margin: 8px 20px;box-shadow: 1px 1px 2px 2px #ececec;padding: 3px;">
                                <div class="form-group" style="margin-bottom:0">
                                    <div class="col-md-4" style="margin-top:6px">
                                        <div class="radio">
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="ponumber">
                                                PO #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="company">
                                                Company
                                            </label>&nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="productname">
                                                Product
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="cas">
                                                CAS #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="cat">
                                                CAT #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="batchno">
                                                Batch #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="other">
                                                Data Remark / Reason
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-8" style="margin-top:9px">
                                        <div>
                                            <input class="form-control" id="allsearchbox" type="text" placeholder="Enter search string" style="width:300px; float:left">
                                            <a href="javascript:void(0)" style="float:left;margin-left:8px;" class="btn btn-primary" onclick="$('#tblwatchList').DataTable().draw()">Search</a>
                                            @*@if (!SessionCookieManagement.IsProjectLogin)
                                            {
                                                <a href="javascript:void(0)" style="float:right" class="btn btn-primary" onclick="companyRecordsWithCount()">Company Record</a>
                                            }
                                            <a href="javascript:void(0)" style="float:right;margin-right:15px" class="btn btn-primary" onclick="CancelledProduct()">Cancel Product</a>
                                           
                                            <a href="javascript:void(0)" style="float:right;margin-right:15px" class="btn btn-primary" onclick="sendorderemail()">OC</a>
                                            <a href="javascript:void(0)" style="float:right;margin-right:15px" class="btn btn-primary" onclick="projectreport()">Report</a>
                                            <a href="javascript:void(0)" style="float:right;margin-right:15px" class="btn btn-primary" onclick="GetAuditLogForProject()">Log</a>*@
                                            <label style="margin-left:15px; margin-top:5px;">
                                                <input type="checkbox" id="chkallpriority" name="chkpriority" onchange="$('#tblwatchList').DataTable().draw()" /> Priority?
                                            </label>
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Sci. Name : </label>
                                        @Html.DropDownList("ScientistListItem", (IEnumerable<SelectListItem>)ViewBag.ScientistListItem, new { @class = "form-control", @onchange = "$('#tblwatchList').DataTable().draw()" })
                                    </div>
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Sub Sci. Name : </label>
                                        @Html.DropDownList("SubScientistListItem", (IEnumerable<SelectListItem>)ViewBag.SubScientistListItem, new { @class = "form-control", @onchange = "$('#tblwatchList').DataTable().draw()" })
                                    </div>
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Activity : </label>
                                        <select class="form-control" id="fltactivity" onchange="$('#tblwatchList').DataTable().draw()">
                                            <option value=''>--Select--</option>
                                            <option value='Approval First'>Approval First</option>
                                            <option value='Repeat Order'>Repeat Order</option>
                                            <option value='Repeat Order - Dispatch'>Repeat Order - Dispatch</option>
                                            <option value='Repeat Order - Approval First'>Repeat Order - Approval First</option>
                                            <option value='Short Qty Dispatch'>Short Qty Dispatch</option>
                                            <option value='Short Qty Dispatched'>Short Qty Dispatched</option>
                                            <option value='Sample Request'>Sample Request</option>
                                            <option value='Sample Sent'>Sample Sent</option>
                                            <option value='Sample Approved'>Sample Approved</option>
                                            @*<option value='Insufficient QTY'>Insufficient QTY</option>*@
                                            <option value='Quote - Data Sent'>Quote - Data Sent</option>
                                            <option value='Quote - Data Approved'>Quote - Data Approved</option>
                                        </select>
                                    </div>
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Status : </label>
                                        @Html.DropDownList("fltprostatusItem", (IEnumerable<SelectListItem>)ViewBag.fltprostatusItem, new { @class = "form-control", @onchange = "$('#tblwatchList').DataTable().draw()" })
                                    </div>
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Type : </label>
                                        @Html.DropDownList("fltprotypeItem", (IEnumerable<SelectListItem>)ViewBag.fltprotypeItem, new { @class = "form-control", @onchange = "$('#tblwatchList').DataTable().draw()" })
                                    </div>

                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Geographical : </label>
                                        @Html.DropDownList("fltgeographicallocation", (IEnumerable<SelectListItem>)ViewBag.GeographicalLocationList, null, new { @class = "form-control", @onchange = "$('#tblwatchList').DataTable().draw()" })
                                    </div>


                                    <div class="col-md-2" style=" margin-top: 6px; ">
                                        <label>Est. Date : </label>
                                        <input type="text" id="fltestdate" class="datepicker" value="" />
                                        <i class="fa fa-recycle" onclick="datesearch('tblwatchList')"></i>
                                    </div>
                                    <div class="col-md-2" style=" margin-top: 6px; ">
                                        <label>GLP : </label>
                                        <select id="fltglp" class="form-control" onchange="$('#tblwatchList').DataTable().draw()">
                                            <option value="">--Select--</option>
                                            <option value="Yes">Yes</option>
                                            <option value="No">No</option>
                                        </select>
                                        <i class="fa fa-recycle" onclick="datesearch('tblwatchList')"></i>
                                    </div>
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Project : </label>
                                        @Html.DropDownList("ProjectTeam", (IEnumerable<SelectListItem>)ViewBag.projectList, new { @class = "form-control", @onchange = "$('#tblwatchList').DataTable().draw()" })
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                            <br />
                            <table id="tblwatchList" class="table table-condensed table-striped table-bordered  table-hover" cellspacing="0">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="selectWatchclsSaverow" /></th>
                                        <th><input type="checkbox" id="selectWatchclsMoveDispatch" /></th>
                                        <th>App.</th>
                                        <th>#</th>
                                        <th>PO Date</th>
                                        <th><span title="Priority">Pty</span></th>
                                        <th>Diff</th>
                                        <th>PO No</th>
                                        <th>Company Name</th>
                                        <th>Project Type</th>
                                        <th>Scientist</th>
                                        <th>Sub-Scientist</th>
                                        <th></th>
                                        <th>Lead Time</th>
                                        <th>Sci. Assg.</th>
                                        <th>Syn. Start Date</th>
                                        <th></th>
                                        <th>Raw Material</th>
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th></th>
                                        <th>Qty (mg)</th>
                                        <th>Batch No</th>
                                        <th>COA</th>
                                        <th></th>
                                        <th></th>
                                        <th>Activity</th>
                                        <th>Status</th>
                                        <th>Est. Date</th>
                                        <th>Count</th>
                                        @*<th>Scientist Status</th>*@
                                        <th>Sec. Exp.</th>
                                        <th></th>
                                        <th>Data Remark</th>
                                        <th>Reason</th>
                                        <th>Technical Contact</th>
                                        <th>Pack Size</th>
                                        <th>GLP</th>
                                        <th>GLP Remark</th>
                                        <th>GLP Status</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="tabassigned" class="tab-pane fade in">
                        <!-- /.box-header -->
                        <div class="box-body " id="divProj">
                            <div style="margin: 8px 20px;box-shadow: 1px 1px 2px 2px #ececec;padding: 3px;">
                                <div class="form-group" style="margin-bottom:0">
                                    <div class="col-md-4" style="margin-top:6px">
                                        <div class="radio">
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="ponumber">
                                                PO #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="company">
                                                Company
                                            </label>&nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="productname">
                                                Product
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="cas">
                                                CAS #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="cat">
                                                CAT #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="batchno">
                                                Batch #
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-8" style="margin-top:9px">
                                        <div>
                                            <input class="form-control" id="allsearchbox" type="text" placeholder="Enter search string" style="width:300px; float:left">
                                            <a href="javascript:void(0)" style="float:left;margin-left:8px;" class="btn btn-primary" onclick="$('#tblassigned').DataTable().draw()">Search</a>
                                            <a href="javascript:void(0)" style="float:right" class="btn btn-primary" onclick="companyRecordsWithCount()">Company Record</a>
                                            <a href="javascript:void(0)" style="float:right;margin-right:15px" class="btn btn-primary" onclick="CancelledProduct()">Cancel Product</a>
                                            <a href="javascript:void(0)" style="float:right;margin-right:15px" class="btn btn-primary" onclick="sendorderemail()">OC</a>
                                            <a href="javascript:void(0)" style="float:right;margin-right:15px" class="btn btn-primary" onclick="projectreport()">Report</a>

                                        </div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Sci. Name : </label>
                                        @Html.DropDownList("ScientistListItem", (IEnumerable<SelectListItem>)ViewBag.ScientistListItem, new { @class = "form-control", @onchange = "$('#tblassigned').DataTable().draw()" })
                                    </div>
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Sub Sci. Name : </label>
                                        @Html.DropDownList("SubScientistListItem", (IEnumerable<SelectListItem>)ViewBag.SubScientistListItem, new { @class = "form-control", @onchange = "$('#tblassigned').DataTable().draw()" })
                                    </div>
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Activity : </label>
                                        <select class="form-control" id="fltactivity" onchange="$('#tblassigned').DataTable().draw()">
                                            <option value=''>--Select--</option>
                                            <option value='Approval First'>Approval First</option>
                                            <option value='Repeat Order'>Repeat Order</option>
                                            <option value='Repeat Order - Dispatch'>Repeat Order - Dispatch</option>
                                            <option value='Repeat Order - Approval First'>Repeat Order - Approval First</option>
                                            <option value='Short Qty Dispatch'>Short Qty Dispatch</option>
                                            <option value='Short Qty Dispatched'>Short Qty Dispatched</option>
                                            <option value='Sample Request'>Sample Request</option>
                                            <option value='Sample Sent'>Sample Sent</option>
                                            <option value='Sample Approved'>Sample Approved</option>
                                            @*<option value='Insufficient QTY'>Insufficient QTY</option>*@
                                            <option value='Quote - Data Sent'>Quote - Data Sent</option>
                                            <option value='Quote - Data Approved'>Quote - Data Approved</option>
                                        </select>
                                    </div>
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Status : </label>
                                        @Html.DropDownList("fltprostatusItem", (IEnumerable<SelectListItem>)ViewBag.fltprostatusItem, new { @class = "form-control", @onchange = "$('#tblassigned').DataTable().draw()" })
                                    </div>
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Type : </label>
                                        @Html.DropDownList("fltprotypeItem", (IEnumerable<SelectListItem>)ViewBag.fltprotypeItem, new { @class = "form-control", @onchange = "$('#tblassigned').DataTable().draw()" })
                                    </div>
                                    <div class="col-md-2" style=" margin-top: 6px; ">
                                        <label>Est. Date : </label>
                                        <input type="text" id="fltestdate" class="datepicker" value="" />
                                        <i class="fa fa-recycle" onclick="datesearch('tblassigned')"></i>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                            <br />
                            <table id="tblassigned" class="table table-condensed table-striped table-bordered  table-hover" cellspacing="0">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="selectAllclsSaverow" /></th>
                                        <th><input type="checkbox" id="selectAllclsMoveDispatch" /></th>
                                        <th>App.</th>
                                        <th>#</th>
                                        <th>PO Date</th>
                                        <th><span title="Priority">Pty</span></th>
                                        <th>Diff</th>
                                        <th>PO No</th>
                                        <th>Company Name</th>
                                        <th>Project Type</th>
                                        <th>Scientist</th>
                                        <th>Sub-Scientist</th>
                                        <th></th>
                                        <th>Lead Time</th>
                                        <th>Sci. Assg.</th>
                                        <th></th>
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th></th>
                                        <th>Qty (mg)</th>
                                        <th>Batch No</th>
                                        <th>COA</th>
                                        <th></th>
                                        <th>Activity</th>
                                        <th>Status</th>
                                        <th>Est. Date</th>
                                        <th>Count</th>
                                        @*<th>Scientist Status</th>*@
                                        <th>Sec. Exp.</th>
                                        <th></th>
                                        <th>Data Remark</th>
                                        <th>Reason</th>
                                        <th>Pack Size</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="tabnioaction" class="tab-pane fade in">
                        <!-- /.box-header -->
                        <div class="box-body" id="divProj">
                            <table id="tblnoaction" class="table table-condensed table-striped table-bordered  table-hover">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="selectAllclsSaverow" class="clsSaverownoaction" /></th>
                                        <th><input type="checkbox" id="selectAllclsMoveDispatch" /></th>
                                        @*<th>Action</th>*@
                                        <th>#</th>
                                        <th>PO Date</th>
                                        <th>Lead Time</th>
                                        <th><span title="Priority">Pty</span></th>
                                        <th>Diff</th>
                                        <th>PO No</th>
                                        <th>Company Name</th>
                                        <th>Project Type</th>
                                        <th>Scientist</th>
                                        <th>Sub-Scientist</th>
                                        <th>Sci. Assg.</th>
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th>Qty (mg)</th>
                                        <th>Est. Date</th>
                                        <th>Batch No</th>
                                        @*<th>Scientist Status</th>*@
                                        <th>Data Remark</th>
                                        <th>Reason</th>
                                        <th>Pack Size</th>
                                        <th>Explanation</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="tabdomestic" class="tab-pane fade in">
                        <!-- /.box-header -->
                        <div class="box-body resizediv" style="overflow:scroll;" id="divProj">
                            <div style="margin: 8px 20px;box-shadow: 1px 1px 2px 2px #ececec;padding: 3px;">
                                <div class="form-group">
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Activity : </label>
                                        <select class="form-control" id="fltactivity" onchange="$('#tbldomestic').DataTable().draw()">
                                            <option value=''>--Select--</option>
                                            <option value='Approval First'>Approval First</option>
                                            <option value='Repeat Order'>Repeat Order</option>
                                            <option value='Repeat Order - Dispatch'>Repeat Order - Dispatch</option>
                                            <option value='Repeat Order - Approval First'>Repeat Order - Approval First</option>
                                            <option value='Short Qty Dispatch'>Short Qty Dispatch</option>
                                            <option value='Short Qty Dispatched'>Short Qty Dispatched</option>
                                            <option value='Sample Request'>Sample Request</option>
                                            <option value='Sample Sent'>Sample Sent</option>
                                            <option value='Sample Approved'>Sample Approved</option>
                                            @*<option value='Insufficient QTY'>Insufficient QTY</option>*@
                                            <option value='Quote - Data Sent'>Quote - Data Sent</option>
                                            <option value='Quote - Data Approved'>Quote - Data Approved</option>
                                        </select>
                                    </div>
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Status : </label>
                                        @Html.DropDownList("fltdomesticprostatusItem", (IEnumerable<SelectListItem>)ViewBag.fltprostatusItem, new { @class = "form-control", @onchange = "$('#tbldomestic').DataTable().draw()" })
                                    </div>
                                    <div class="col-md-5" style="margin-top:6px">
                                        <div class="radio">
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="ponumber">
                                                PO #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="company">
                                                Company
                                            </label>&nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="productname">
                                                Product
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="cas">
                                                CAS #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="cat">
                                                CAT #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="batchno">
                                                Batch #
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-3" style="margin-top:9px">
                                        <div>
                                            <input class="form-control" id="allsearchbox" type="text" placeholder="Enter search string" style="width:300px; float:left">
                                            <a href="javascript:void(0)" style="float:left;margin-left:8px;" class="btn btn-primary" onclick="$('#tbldomestic').DataTable().draw()">Search</a>
                                        </div>
                                    </div>

                                    <div class="clearfix"></div>
                                </div>
                            </div>

                            <div class="clearfix"></div>

                            <br />
                            <table id="tbldomestic" class="table table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="selectAllclsSaverow" class="clsSaverowdomestic" /></th>
                                        <th><input type="checkbox" id="selectAllclsMoveDispatch" /></th>
                                        <th>Action</th>
                                        <th>#</th>
                                        <th>PO No</th>
                                        <th>Company Name</th>
                                        <th>Project Type</th>
                                        <th>Scientist</th>
                                        <th>Sub-Scientist</th>
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th></th>
                                        <th>Qty (mg)</th>
                                        <th>Est. Date</th>
                                        @*<th>Scientist Status</th>*@
                                        <th>Batch No</th>
                                        <th>COA</th>
                                        <th>Activity</th>
                                        <th>Status</th>
                                        <th>Data Remark</th>
                                        <th>Reason</th>
                                        <th>Pack Size</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="tabsynthesis" class="tab-pane fade in">
                        <!-- /.box-header -->
                        <div class="box-body resizediv" style="overflow:scroll;" id="divProj">
                            <div style="margin: 8px 20px;box-shadow: 1px 1px 2px 2px #ececec;padding: 3px;">
                                <div class="form-group">

                                    <div class="col-md-5" style="margin-top:6px">
                                        <div class="radio">
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="ponumber">
                                                PO #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="company">
                                                Company
                                            </label>&nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="productname">
                                                Product
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="cas">
                                                CAS #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="cat">
                                                CAT #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="batchno">
                                                Batch #
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-7" style="margin-top:9px">
                                        <div>
                                            <input class="form-control" id="allsearchbox" type="text" placeholder="Enter search string" style="width:300px; float:left">
                                            <a href="javascript:void(0)" style="float:left;margin-left:8px;" class="btn btn-primary" onclick="$('#tblsynthesis').DataTable().draw()">Search</a>
                                        </div>
                                    </div>

                                    <div class="clearfix"></div>
                                </div>

                                <div class="form-group">
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Sci. Name : </label>
                                        @Html.DropDownList("ScientistListItem", (IEnumerable<SelectListItem>)ViewBag.ScientistListItem, new { @class = "form-control", @onchange = "$('#tblsynthesis').DataTable().draw()" })
                                    </div>
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Sub Sci. Name : </label>
                                        @Html.DropDownList("SubScientistListItem", (IEnumerable<SelectListItem>)ViewBag.SubScientistListItem, new { @class = "form-control", @onchange = "$('#tblsynthesis').DataTable().draw()" })
                                    </div>
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Activity : </label>
                                        <select class="form-control" id="fltactivity" onchange="$('#tblsynthesis').DataTable().draw()">
                                            <option value=''>--Select--</option>
                                            <option value='Approval First'>Approval First</option>
                                            <option value='Repeat Order'>Repeat Order</option>
                                            <option value='Repeat Order - Dispatch'>Repeat Order - Dispatch</option>
                                            <option value='Repeat Order - Approval First'>Repeat Order - Approval First</option>
                                            <option value='Short Qty Dispatch'>Short Qty Dispatch</option>
                                            <option value='Short Qty Dispatched'>Short Qty Dispatched</option>
                                            <option value='Sample Request'>Sample Request</option>
                                            <option value='Sample Sent'>Sample Sent</option>
                                            <option value='Sample Approved'>Sample Approved</option>
                                            @*<option value='Insufficient QTY'>Insufficient QTY</option>*@
                                            <option value='Quote - Data Sent'>Quote - Data Sent</option>
                                            <option value='Quote - Data Approved'>Quote - Data Approved</option>
                                        </select>
                                    </div>
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Status : </label>
                                        @Html.DropDownList("fltprostatusItem", (IEnumerable<SelectListItem>)ViewBag.fltprostatusItem, new { @class = "form-control", @onchange = "$('#tblsynthesis').DataTable().draw()" })
                                    </div>
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Type : </label>
                                        @Html.DropDownList("fltprotypeItem", (IEnumerable<SelectListItem>)ViewBag.fltprotypeItem, new { @class = "form-control", @onchange = "$('#tblsynthesis').DataTable().draw()" })
                                    </div>
                                    <div class="col-md-2" style=" margin-top: 6px; ">
                                        <label>Est. Date : </label>
                                        <input type="text" id="fltestdate" class="datepicker" value="" />
                                        <i class="fa fa-recycle" onclick="datesearch('tblsynthesis')"></i>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                            </div><div class="clearfix"></div>
                            <table id="tblsynthesis" class="table table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="selectAllclsSaverow" class="clsSaverowsynthesis" /></th>
                                        <th><input type="checkbox" id="selectAllclsMoveDispatch" /></th>
                                        <th>Action</th>
                                        <th>#</th>
                                        <th>PO No</th>
                                        <th>Company Name</th>
                                        <th>Project Type</th>
                                        <th>Scientist</th>
                                        <th>Sub-Scientist</th>
                                        <th></th>
                                        <th>Lead Time</th>
                                        <th>Sci. Assg.</th>
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th>Qty (mg)</th>
                                        <th>Est. Date</th>
                                        <th>Status</th>
                                        @*<th>Scientist Status</th>*@
                                        <th>Batch No</th>
                                        @*<th>Batch No</th>*@
                                        @*<th>Project Status</th>*@
                                        @*<th>Sci. Remark</th>*@
                                        <th>Data Remark</th>
                                        <th>Reason</th>
                                        <th>Pack Size</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="tabpurchase" class="tab-pane fade in">
                        <!-- /.box-header -->
                        <div style="margin: 8px 20px;box-shadow: 1px 1px 2px 2px #ececec;padding: 3px;">
                            <div class="form-group">
                                <div class="col-md-2" style="margin-top:6px">
                                    <label>
                                        Purchase Status:
                                    </label><select id="filpurchasestatus" class="form-control">
                                        <option value="">All</option>
                                        <option value="RFQ">RFQ</option>
                                        <option value="Quotation">Quotation</option>
                                        <option value="Need Approval">Need Approval</option>
                                        <option value="Approved">Approved</option>
                                        <option value="Ordered">Ordered</option>
                                        <option value="Submitted">Submitted</option>
                                        <option value="On Hold">On Hold</option>
                                        <option value="Regret">Regret</option>
                                    </select>


                                </div>
                                <div class="col-md-5" style="margin-top:6px">
                                    <div class="radio">
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="ponumber">
                                            PO #
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="company">
                                            Company
                                        </label>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="productname">
                                            Product
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="cas">
                                            CAS #
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="cat">
                                            CAT #
                                        </label>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <label>
                                            <input type="radio" name="filterAll" id="optionsRadios2" value="batchno">
                                            Batch #
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-5" style="margin-top:9px">
                                    <div>
                                        <input class="form-control" id="allsearchbox" type="text" placeholder="Enter search string" style="width:300px; float:left">
                                        <a href="javascript:void(0)" style="float:left;margin-left:8px;" class="btn btn-primary" onclick="$('#tblpurchase').DataTable().draw()">Search</a>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </div>
                        <div class="box-body resizediv" style="overflow:scroll;" id="divProj">
                            <table id="tblpurchase" class="table table-bordered table-striped" style="width:100%">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="selectAllclsSaverow" class="clsSaverowpurchase" /></th>
                                        <th>Date</th>
                                        <th>PO No</th>
                                        <th>Company Name</th>
                                        <th>Purchase Status</th>
                                        <th>Scientist</th>
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th>Qty (mg)</th>
                                        <th>Batch No</th>
                                        <th>Est. Date</th>
                                        <th>Summary</th>
                                        <th>Purchase Remark</th>
                                        <th>Reason</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="tabpurchaserfq" class="tab-pane fade in">
                        <!-- /.box-header -->
                        <div style="margin: 8px 20px;box-shadow: 1px 1px 2px 2px #ececec;padding: 3px;">
                            <div class="form-group">
                                <div class="col-md-4" style="margin-top:6px">
                                    <div class="radio">
                                        <label>
                                            Purchase Status: <select id="filpurchaserfqstatus" onchange="$('#tblpurchaserfq').DataTable().draw()">
                                                <option value="">All</option>
                                                <option value="RFQ">RFQ</option>
                                                <option value="Quotation">Quotation</option>
                                                <option value="Need Approval">Need Approval</option>
                                                <option value="Approved">Approved</option>
                                                <option value="Ordered">Ordered</option>
                                                <option value="Submitted">Submitted</option>
                                                <option value="On Hold">On Hold</option>
                                                <option value="Regret">Regret</option>
                                            </select>
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-8 pull-right" style="margin-top:13px;">
                                    <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="Addnewpurchaserfq()">Add New RFQ</a>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </div>
                        <div class="box-body resizediv" style="overflow:scroll;" id="divProj">
                            <table id="tblpurchaserfq" class="table table-bordered table-striped" style="width:100%">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="selectAllclsSaverow" class="clsSaverowpurchase" /></th>
                                        <th>Purchase Status</th>
                                        <th>RFQ No</th>
                                        <th>Ass. Date</th>
                                        <th>Chemical Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th>Comment</th>
                                        <th>Summary</th>
                                        <th>Est. Date</th>
                                        <th>Purchase Remark</th>
                                        <th>Ref By</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="tabinstock" class="tab-pane fade in">
                        <!-- /.box-header -->
                        <div class="box-body resizediv" style="overflow:scroll;" id="divProj">
                            <div style="margin: 8px 20px;box-shadow: 1px 1px 2px 2px #ececec;padding: 3px;">
                                <div class="form-group">
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Status : </label>
                                        @Html.DropDownList("fltinstockprostatusItem", (IEnumerable<SelectListItem>)ViewBag.fltprostatusItem, new { @class = "form-control" })
                                    </div>
                                    <div class="col-md-2" style="margin-top:6px; width:10%">
                                        <label>Purchase Status: </label>

                                        <select id="filpurchasestatus" class="form-control">
                                            <option value="">All</option>
                                            <option value="RFQ">RFQ</option>
                                            <option value="Quotation">Quotation</option>
                                            <option value="Need Approval">Need Approval</option>
                                            <option value="Approved">Approved</option>
                                            <option value="Ordered">Ordered</option>
                                            <option value="Submitted">Submitted</option>
                                            <option value="On Hold">On Hold</option>
                                            <option value="Regret">Regret</option>
                                        </select>

                                    </div>
                                    <div class="col-md-5" style="margin-top:6px">
                                        <div class="radio">
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="ponumber">
                                                PO #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="company">
                                                Company
                                            </label>&nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="productname">
                                                Product
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="cas">
                                                CAS #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="cat">
                                                CAT #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="batchno">
                                                Batch #
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-3" style="        margin-top: 9px;width: 30%;">
                                        <div>
                                            <input class="form-control" id="allsearchbox" type="text" placeholder="Enter search string" style="width:300px; float:left">
                                            <a href="javascript:void(0)" style="float:left;margin-left:8px;" class="btn btn-primary" onclick="$('#tblinstock').DataTable().draw()">Search</a>
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                            </div>

                            <div class="clearfix"></div>

                            <br />
                            <table id="tblinstock" class="table table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="selectAllclsSaverow" class="clsSaverowinstock" /></th>
                                        <th><input type="checkbox" id="selectAllclsMoveDispatch" /></th>
                                        <th>Action</th>
                                        <th>#</th>
                                        <th>PO No</th>
                                        <th>Company Name</th>
                                        <th>Project Type</th>
                                        <th>Scientist</th>
                                        <th>Sub-Scientist</th>
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th></th>
                                        <th>Qty (mg)</th>
                                        <th>Est. Date</th>
                                        @*<th>Scientist Status</th>*@
                                        <th>Batch No</th>
                                        <th>COA</th>
                                        <th>Activity</th>
                                        <th>Status</th>
                                        <th>Data Remark</th>
                                        <th>Reason</th>
                                        <th>Pack Size</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="menu1" class="tab-pane fade">
                        <!-- /.box-header -->
                        <div class="box-body resizediv" style="overflow:scroll;" id="divProjss">
                            <div style="margin: 8px 20px;box-shadow: 1px 1px 2px 2px #ececec;padding: 3px;">
                                <div class="form-group">

                                    <div class="col-md-5" style="margin-top:6px">
                                        <div class="radio">
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="ponumber">
                                                PO #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="company">
                                                Company
                                            </label>&nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="productname">
                                                Product
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="cas">
                                                CAS #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="cat">
                                                CAT #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="batchno">
                                                Batch #
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-5" style="margin-top:9px">
                                        <div>
                                            <input class="form-control" id="allsearchbox" type="text" placeholder="Enter search string" style="width:300px; float:left">
                                            <a href="javascript:void(0)" style="float:left;margin-left:8px;" class="btn btn-primary" onclick="$('#example2').DataTable().draw()">Search</a>

                                            <a href="javascript:void(0)" style="float:left;margin-left:8px;" class="btn btn-primary" onclick="resumeall()">Resume</a>
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                            </div>

                            <div class="clearfix"></div>
                            <table id="example2" class="table table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="selectAllclsSaverow"></th>
                                        <th>#</th>
                                        <th>Lead Time</th>
                                        <th>Company Name</th>
                                        <th>PO No	</th>
                                        <th>Diff. Level</th>
                                        <th>Project Type</th>
                                        <th>Scientist</th>
                                        <th>Sub-Scientist</th>
                                        <th>Sci. Assg. Date</th>
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th>Qty (mg)</th>
                                        <th>Est. Date</th>
                                        @*<th>Scientist Status</th>*@
                                        <th>Batch No</th>
                                        <th>Data Remark</th>
                                        <th>Reason</th>

                                    </tr>
                                </thead>
                                <tbody>
                                    @*@if (Model.Count > 0)
                        {
                            foreach (var i in Model)
                            {
                                foreach (var k in i.SZ_QuotationProductModel.Where(x => x.IsOnHold == true).ToList())
                                {
                                    <tr id="tr_@k.QuoteDetailsId" class="clsRow" data-ScientistStatus="@k.ScientistStatus" data-ReadyToDeliverScientistStatusId="@k.ReadyToDeliverScientistStatusId" data-MovetoDispatch="@k.MoveToDispatch">
                                        <td>
                                            @k.SrPo
                                        </td>
                                        <td>
                                            @k.LeadTime
                                        </td>
                                        <td> @i.CompanyName</td>
                                        <td><label>@i.PONumber</label> </td>
                                        <td> @k.DifficultyLevelText</td>
                                        <td>
                                            @{
                                                string selectedTerxt = "";
                                                foreach (EnumList.ProjectType r in Enum.GetValues(typeof(EnumList.ProjectType)))
                                                {
                                                    var item = Enum.GetName(typeof(EnumList.ProjectType), r);
                                                    var test = r.ToString();
                                                    string text = SZ_Helper.GetEnumDescription((EnumList.ProjectType)(int)r);
                                                    int val = (int)r;

                                                    if (Convert.ToString(val) == k.ProjectType)
                                                    {
                                                        selectedTerxt = Convert.ToString(text);
                                                    }
                                                }
                                            }
                                            @selectedTerxt

                                        </td>
                                        <td>
                                            @k.ScientistName
                                        </td>
                                        <td>
                                            @k.SubScientistName
                                        </td>
                                        <td>
                                            @if (k.MoveToScientistDate.HasValue)
                                            {
                                                @k.MoveToScientistDate.Value.ToShortDateString()
                                            }
                                        </td>
                                        <td><label>@k.ProductName</label> </td>
                                        <td><label>@k.CASNo</label> </td>
                                        <td><label>@k.CATNo</label> </td>
                                        <td>@k.RequiredQty</td>
                                        <td>
                                            @if (k.EstimateCompleteDate.HasValue)
                                            {
                                                @k.EstimateCompleteDate.Value.ToShortDateString()
                                            }
                                        </td>
                                        <td>
                                            @k.AdminScientistStatus
                                        </td>
                                        <td>
                                            @k.AdditionalBatchNoText
                                        </td>
                                        <td>@k.Remark</td>
                                        <td>@k. </td>
                                        <td>
                                            <a href="javascript:void(0)" id="onhold_@k.QuoteDetailsId" onclick="SetOnresume('@k.QuoteDetailsId')"> Resume</a>
                                        </td>
                                    </tr>
                                }
                            }
                        }*@
                                </tbody>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="menu3" class="tab-pane fade">
                        <!-- /.box-header -->
                        <div class="box-body resizediv" style="overflow:scroll;" id="divProjss">
                            <table id="exampleinhouse" class="table table-bordered table-striped" width="100%">
                                <thead>
                                    <tr>
                                        <th></th>
                                        <th></th>
                                        @*<th>Action</th>*@
                                        <th>#</th>
                                        <th>PO No</th>
                                        <th>Company Name</th>
                                        <th>Project Type</th>
                                        <th>Scientist</th>
                                        <th>Sub-Scientist</th>
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th>Qty (mg)</th>
                                        <th>Est. Date</th>
                                        @*<th>Scientist Status</th>*@
                                        <th>Batch No</th>
                                        @*<th>Batch No</th>*@
                                        @*<th>Project Status</th>*@
                                        @*<th>Sci. Remark</th>*@
                                        <th>Data Remark</th>
                                    </tr>
                                </thead>
                                @*<tbody>
                        @if (Model.Count > 0)
                        {
                            foreach (var i in Model)
                            {
                                foreach (var k in i.SZ_QuotationProductModel.Where(x => x.ProjectType == Convert.ToString((int)EnumList.ProjectType.InHouse)).ToList())
                                {
                                    <tr id="tr_@k.QuoteDetailsId" class="clsRow" data-ScientistStatus="@k.ScientistStatus" data-ReadyToDeliverScientistStatusId="@k.ReadyToDeliverScientistStatusId" data-MovetoDispatch="@k.MoveToDispatch">
                                        <td width="1%">
                                            @if (k.ScientistStatus.HasValue && k.ScientistStatus.Value == k.ReadyToDeliverScientistStatusId && k.MoveToDispatch != null && k.MoveToDispatch.Value)
                                            {
                                                <i class="fa fa-check-square" style="color:lightseagreen"></i>
                                            }
                                            else if (k.ScientistStatus.HasValue && k.ScientistStatus.Value == k.ReadyToDeliverScientistStatusId)
                                            {
                                                <input type="checkbox" value="@k.QuoteDetailsId" class="clsMoveDispatch" />
                                            }
                                            else if (k.ProjectType == Convert.ToString((int)EnumList.ProjectType.InStock) && k.MoveToDispatch == null)
                                            {
                                                <input type="checkbox" value="@k.QuoteDetailsId" class="clsMoveDispatch" />
                                            }
                                            else if (k.ProjectType == Convert.ToString((int)EnumList.ProjectType.InStock) && k.MoveToDispatch != null && k.MoveToDispatch.Value)
                                            {
                                                <i class="fa fa-check-square" style="color:lightseagreen"></i>
                                            }
                                        </td>
                                        <td>
                                            @k.SrPo

                                        </td>
                                        <td>
                                            <select id="inhprojecttype_@k.QuoteDetailsId" class="clsProjType" data-quoteDetailsId="@k.QuoteDetailsId">
                                                <option value="">--Select--</option>
                                                @foreach (EnumList.ProjectType r in Enum.GetValues(typeof(EnumList.ProjectType)))
                                                {
                                                    var item = Enum.GetName(typeof(EnumList.ProjectType), r);
                                                    var test = r.ToString();
                                                    string text = SZ_Helper.GetEnumDescription((EnumList.ProjectType)(int)r);
                                                    int val = (int)r;
                                                    string selected = "";
                                                    if (Convert.ToString(val) == k.ProjectType)
                                                    {
                                                        selected = "selected ";
                                                    }
                                                    <option value="@val" @selected>@text</option>
                                                }
                                            </select>
                                        </td>
                                        <td>
                                            @Html.DropDownList("inhScientistId_" + k.QuoteDetailsId, (IEnumerable<SelectListItem>)ViewBag.ScientistList, "--Select--", new { @class = "scientist", @scientistId = k.ScientistCustomerId, @quotedetailsid = k.QuoteDetailsId })
                                        </td>
                                        <td><input id="inhqty_@k.QuoteDetailsId" type="text" value="@k.RequiredQty" style="width:50px" /></td>
                                        <td><label>@k.CASNo</label> </td>
                                        <td><label>@k.CATNo</label> </td>
                                        <td>
                                            @Html.DropDownList("inhadditionalBatch_" + k.QuoteDetailsId, (List<SelectListItem>)k.ListBatchNo)
                                        </td>
                                        <td><input id="inhbatchno_@k.QuoteDetailsId" type="text" value="@k.BatchNo" style="width:120px" /></td>
                                        <td> @i.CompanyName</td>
                                        <td><label>@i.PONumber</label> </td>
                                        <td><label>@k.ProductName</label> </td>
                                        <td>
                                            @if (k.EstimateCompleteDate.HasValue)
                                            {
                                                @k.EstimateCompleteDate.Value.ToShortDateString()
                                            }
                                        </td>
                                        <td>
                                            <input id="inhscientistStatus_@k.QuoteDetailsId" type="text" value="@k.AdminScientistStatus" style="width:200px" />
                                        </td>
                                        <td>@k.ProjectStatustext </td>
                                        <td><input id="inhremark_@k.QuoteDetailsId" type="text" value="@k.Remark" style="width:170px" /></td>
                                        <td>
                                            <a href="javascript:void(0)" id="save_@k.QuoteDetailsId" onclick="SaveProjectDetailsInhouse('@k.QuoteDetailsId')"> Save</a>
                                            <a href="javascript:void(0)" id="onhold_@k.QuoteDetailsId" onclick="SetOnHold('@k.QuoteDetailsId')"> Hold</a>
                                        </td>
                                    </tr>
                                }
                            }
                        }
                    </tbody>*@
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="tabexport" class="tab-pane fade">
                        <!-- /.box-header -->
                        <div class="box-body resizediv" style="overflow:scroll;" id="divProj">
                            <div class="container row " style="padding-bottom:10px; width:100%">
                                <div class="form-group">
                                    <div class="col-md-1">
                                        <label style="padding-top: 6px;">Filter By:</label>
                                    </div>
                                    <div class="col-md-1">
                                        <select id="ddlexport" class="form-control">
                                            <option value="All">All</option>
                                            <option value="Eurofarma">Eurofarma</option>
                                            <option value="Brainfarma">Brainfarma</option>
                                            <option value="Other">Other</option>
                                        </select>
                                    </div>
                                    <div class="col-md-1">
                                        <label style="padding-top: 6px;">Activity:</label>
                                    </div>
                                    <div class="col-md-2">
                                        <select class="form-control" id="fltactivity">
                                            <option value=''>--Select--</option>
                                            <option value='Approval First'>Approval First</option>
                                            <option value='Repeat Order'>Repeat Order</option>
                                            <option value='Repeat Order - Dispatch'>Repeat Order - Dispatch</option>
                                            <option value='Repeat Order - Approval First'>Repeat Order - Approval First</option>
                                            <option value='Short Qty Dispatch'>Short Qty Dispatch</option>
                                            <option value='Short Qty Dispatched'>Short Qty Dispatched</option>
                                            <option value='Sample Request'>Sample Request</option>
                                            <option value='Sample Sent'>Sample Sent</option>
                                            <option value='Sample Approved'>Sample Approved</option>
                                            @*<option value='Insufficient QTY'>Insufficient QTY</option>*@
                                            <option value='Quote - Data Sent'>Quote - Data Sent</option>
                                            <option value='Quote - Data Approved'>Quote - Data Approved</option>
                                        </select>
                                    </div>
                                    <div class="col-md-1">
                                        <label style="padding-top: 6px;">In-Stock:</label>
                                    </div>
                                    <div class="col-md-1">
                                        <input type="checkbox" id="filterinstock" name="instock" value="Instock" class="filterstatus" />
                                    </div>
                                    <div class="col-md-1">
                                        <label style="padding-top: 6px;">Other:</label>
                                    </div>
                                    <div class="col-md-1">
                                        <input type="checkbox" id="filterother" name="other" value="Other" class="filterstatus" />
                                    </div>
                                    <div class="col-md-1">
                                        <label style="padding-top: 6px;">Status:</label>
                                    </div>
                                    <div class="col-md-2">
                                        @Html.DropDownList("fltexportprostatusItem", (IEnumerable<SelectListItem>)ViewBag.fltprostatusItem, new { @class = "form-control", @style = "width: 80%;float: left;margin-right: 10px;", @onchange = "$('#tblexport').DataTable().draw()" })


                                    </div>
                                </div>
                                <div class="form-group">

                                    <div class="col-md-5" style="margin-top:6px">
                                        <div class="radio">
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="ponumber">
                                                PO #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="company">
                                                Company
                                            </label>&nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="productname">
                                                Product
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="cas">
                                                CAS #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="cat">
                                                CAT #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="batchno">
                                                Batch #
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-5" style="margin-top:9px">
                                        <div>
                                            <input class="form-control" id="allsearchbox" type="text" placeholder="Enter search string" style="width:300px; float:left">
                                            <a href="javascript:void(0)" style="float:left;margin-left:8px;" class="btn btn-primary" onclick="$('#tblexport').DataTable().draw()">Search</a>
                                            <a href="javascript:void(0)" style="float:right;margin-right:8px;" class="btn btn-primary" onclick="InvoiceGenerate('tblexport', 'clsSaverow')">Invoice</a><br />

                                        </div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                            </div>

                            <table id="tblexport" class="table table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="selectAllclsSaverow" /></th>
                                        <th><input type="checkbox" id="selectAllclsMoveDispatch" /></th>
                                        <th>Action</th>
                                        <th>#</th>
                                        <th>PO Date</th>
                                        <th>PO No</th>
                                        <th>Company Name</th>
                                        <th>Project Type</th>
                                        <th>Scientist</th>
                                        <th>Sub-Scientist</th>
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th>Qty (mg)</th>
                                        <th>Est. Date</th>
                                        <th>Invoice Date</th>
                                        @*<th>Scientist Status</th>*@
                                        <th>Batch No</th>
                                        <th>COA</th>
                                        <th>Activity</th>
                                        <th>Status</th>
                                        @*<th>Batch No</th>*@
                                        @*<th>Project Status</th>*@
                                        @*<th>Sci. Remark</th>*@
                                        <th>Payment</th>
                                        <th>Data Remark</th>
                                        <th>Pack Size</th>
                                        <th>Reason</th>
                                        <th>Technical Contact</th>
                                        <th>MSDS</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="tabquery" class="tab-pane fade">
                        <!-- /.box-header -->
                        <div class="box-body resizediv" style="overflow:scroll;" id="divProj">
                            <table id="tblquery" class="table table-bordered table-striped">
                                <thead>
                                    <tr>
                                        @*<th><input type="checkbox" id="selectAllclsSaverow" /></th>
                            <th><input type="checkbox" id="selectAllclsMoveDispatch" /></th>*@
                                        @*<th>Action</th>*@
                                        <th></th>
                                        <th>#</th>
                                        <th>PO Date</th>
                                        <th>PO No</th>
                                        <th>Company Name</th>
                                        <th>Project Type</th>
                                        <th>Scientist</th>
                                        @*<th>Sub-Scientist</th>*@
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th>Qty (mg)</th>
                                        <th>Est. Date</th>
                                        @*<th>Scientist Status</th>*@
                                        <th>Batch No</th>
                                        @*<th>Payment</th>*@
                                        @*<th>Data Remark</th>*@
                                        <th>Action</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="tabsynthesislog" class="tab-pane fade in">
                        <!-- /.box-header -->
                        <div class="box-body resizediv" style="overflow:scroll;" id="divProj">
                            <table id="tblsynthesislog" class="table table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="selectAllclsSaverow" class="clsSaverowsynthesislog" /></th>
                                        <th><input type="checkbox" id="selectAllclsMoveDispatch" /></th>
                                        <th>Action</th>
                                        <th>#</th>
                                        <th>PO No</th>
                                        <th>Company Name</th>
                                        <th>Project Type</th>
                                        <th>Scientist</th>
                                        <th>Sub-Scientist</th>
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th>Qty (mg)</th>
                                        <th>Batch No</th>
                                        <th>Status</th>
                                        <th>Data Remark</th>
                                        <th>Reason</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="tabcancelledproduct" class="tab-pane fade">
                        <!-- /.box-header -->
                        <div class="box-body " id="divProj">
                            <div style="margin: 8px 20px;box-shadow: 1px 1px 2px 2px #ececec;padding: 3px;">
                                <div class="form-group" style="margin-bottom:0">
                                    <div class="col-md-5" style="margin-top:6px">
                                        <div class="radio">
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="ponumber">
                                                PO #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="company">
                                                Company
                                            </label>&nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="productname">
                                                Product
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="cas">
                                                CAS #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="cat">
                                                CAT #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="batchno">
                                                Batch #
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-6" style="margin-top:9px">
                                        <div>
                                            <input class="form-control" id="allsearchbox" type="text" placeholder="Enter search string" style="width:300px; float:left">
                                            <a href="javascript:void(0)" style="float:left;margin-left:8px;" class="btn btn-primary" onclick="$('#tblcancelledproduct').DataTable().draw()">Search</a>
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Sci. Name : </label>
                                        @Html.DropDownList("ScientistListItem", (IEnumerable<SelectListItem>)ViewBag.ScientistListItem, new { @class = "form-control", @onchange = "$('#tblcancelledproduct').DataTable().draw()" })
                                    </div>
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Sub Sci. Name : </label>
                                        @Html.DropDownList("SubScientistListItem", (IEnumerable<SelectListItem>)ViewBag.SubScientistListItem, new { @class = "form-control", @onchange = "$('#tblcancelledproduct').DataTable().draw()" })
                                    </div>
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Activity : </label>
                                        <select class="form-control" id="fltactivity" onchange="$('#tblcancelledproduct').DataTable().draw()">
                                            <option value=''>--Select--</option>
                                            <option value='Approval First'>Approval First</option>
                                            <option value='Repeat Order'>Repeat Order</option>
                                            <option value='Repeat Order - Dispatch'>Repeat Order - Dispatch</option>
                                            <option value='Repeat Order - Approval First'>Repeat Order - Approval First</option>
                                            <option value='Short Qty Dispatch'>Short Qty Dispatch</option>
                                            <option value='Short Qty Dispatched'>Short Qty Dispatched</option>
                                            <option value='Sample Request'>Sample Request</option>
                                            <option value='Sample Sent'>Sample Sent</option>
                                            <option value='Sample Approved'>Sample Approved</option>
                                            @*<option value='Insufficient QTY'>Insufficient QTY</option>*@
                                            <option value='Quote - Data Sent'>Quote - Data Sent</option>
                                            <option value='Quote - Data Approved'>Quote - Data Approved</option>
                                        </select>
                                    </div>
                                    <div class="col-md-2" style="margin-top:6px">
                                        <label>Status : </label>
                                        @Html.DropDownList("fltprostatusItem", (IEnumerable<SelectListItem>)ViewBag.fltprostatusItem, new { @class = "form-control", @onchange = "$('#tblcancelledproduct').DataTable().draw()" })
                                    </div>
                                    <div class="col-md-4" style=" margin-top: 30px; ">
                                        <a href="javascript:void(0)" style="float:right" class="btn btn-primary" onclick="ResumeCancelledProduct()">Resume</a>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                            <br />
                            <table id="tblcancelledproduct" class="table table-condensed table-striped table-bordered  table-hover" cellspacing="0">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="selectAllclsSaverow" /></th>
                                        <th>#</th>
                                        <th>PO Date</th>
                                        <th>Lead Time</th>
                                        <th><span title="Priority">Pty</span></th>
                                        <th>Diff</th>
                                        <th>PO No</th>
                                        <th>Company Name</th>
                                        <th>Project Type</th>
                                        <th>Scientist</th>
                                        <th>Sub-Scientist</th>
                                        <th>Sci. Assg.</th>
                                        <th>Product Name</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th></th>
                                        <th>Qty (mg)</th>
                                        <th>Est. Date</th>
                                        <th>Batch No</th>
                                        <th>COA</th>
                                        <th></th>
                                        <th>Activity</th>
                                        <th>Status</th>
                                        @*<th>Scientist Status</th>*@
                                        <th>Sec. Exp.</th>
                                        <th></th>
                                        <th>Data Remark</th>
                                        <th>Reason</th>
                                        <th>Pack Size</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>

                    <div id="tabcontrolledsubstance" class="tab-pane fade in">
                        <!-- /.box-header -->
                        <div class="box-body " id="divProj">
                            <div style="margin: 8px 20px;box-shadow: 1px 1px 2px 2px #ececec;padding: 3px;">
                                <div class="form-group" style="margin-bottom:0">
                                    <div class="col-md-5" style="margin-top:6px">
                                        <div class="radio">
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="ponumber">
                                                PO #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="company">
                                                Company
                                            </label>&nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="productname">
                                                Product
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="cas">
                                                CAS #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="cat">
                                                CAT #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="batchno">
                                                Batch #
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-6" style="margin-top:9px">
                                        <div style="float:left;">

                                            <select class="form-control" id="fltLicesenStatus" multiple="">
                                                <option value="">--Select--</option>
                                                <option value="1">In Progress</option>
                                                <option value="2">Completed</option>
                                                <option value="3">On Hold</option>
                                                <option value="4">Query</option>
                                                <option value="5">To Be Initiated</option>
                                            </select>
                                        </div>
                                        <div>
                                            <input class="form-control" id="allsearchbox" type="text" placeholder="Enter search string" style="width:300px; float:left">
                                            <a href="javascript:void(0)" style="float:left;margin-left:8px;" class="btn btn-primary" onclick="$('#tblcontrolledsubstance').DataTable().draw()">Search</a>
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>

                            </div>
                            <div class="clearfix"></div>
                            <br />
                            <table id="tblcontrolledsubstance" class="table table-condensed table-striped table-bordered  table-hover" cellspacing="0">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>PO No</th>
                                        <th><input type="checkbox" id="selectAllclsSaverow" class="clscontsubstance" /></th>
                                        <th>Upload</th>
                                        <th>Product Name</th>
                                        <th>CAT No</th>
                                        <th>CAS No</th>
                                        <th>Qty (mg)</th>
                                        <th>Est. Date</th>
                                        <th>Journey Comments</th>
                                        <th>Category</th>
                                        <th>Import / Export</th>
                                        <th>License Status</th>
                                        <th>Export NOC/Permit Required ?</th>
                                        <th>Import Permit </th>
                                        <th>Declaration </th>
                                        <th>Application Date</th>
                                        <th>Export Permit Received Date</th>
                                        <th>Technical Writeup</th>
                                        <th>Quaterly Data to submit ?</th>
                                        <th>Quaterly Data Submitted ?</th>
                                        <th>Next Quarter</th>
                                        <th>Batch No</th>
                                        <th>API Required</th>
                                        <th>API Import/Domestic</th>
                                        <th>Project Name</th>
                                        <th></th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>


                    <div id="tabcompletedcontrolledsubstance" class="tab-pane fade in">
                        <!-- /.box-header -->
                        <div class="box-body " id="divProj">
                            <div style="margin: 8px 20px;box-shadow: 1px 1px 2px 2px #ececec;padding: 3px;">
                                <div class="form-group" style="margin-bottom:0">
                                    <div class="col-md-5" style="margin-top:6px">
                                        <div class="radio">
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="ponumber">
                                                PO #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="company">
                                                Company
                                            </label>&nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="productname">
                                                Product
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="cas">
                                                CAS #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="cat">
                                                CAT #
                                            </label>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <label>
                                                <input type="radio" name="filterAll" id="optionsRadios2" value="batchno">
                                                Batch #
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-6" style="margin-top:9px">

                                        <div>
                                            <input class="form-control" id="allsearchbox" type="text" placeholder="Enter search string" style="width:300px; float:left">
                                            <a href="javascript:void(0)" style="float:left;margin-left:8px;" class="btn btn-primary" onclick="$('#tblcompletedcontrolledsubstance').DataTable().draw()">Search</a>
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>

                            </div>
                            <div class="clearfix"></div>
                            <br />
                            <table id="tblcompletedcontrolledsubstance" class="table table-condensed table-striped table-bordered  table-hover" cellspacing="0">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>PO No</th>
                                        <th><input type="checkbox" id="selectAllclsSaverow" class="clscontsubstance" /></th>
                                        <th>Upload</th>
                                        <th>Product Name</th>
                                        <th>CAT No</th>
                                        <th>CAS No</th>
                                        <th>Qty (mg)</th>
                                        <th>Est. Date</th>
                                        <th>Journey Comments</th>
                                        <th>Category</th>
                                        <th>Import / Export</th>
                                        <th>License Status</th>
                                        <th>Export NOC/Permit Required ?</th>
                                        <th>Import Permit </th>
                                        <th>Declaration </th>
                                        <th>Application Date</th>
                                        <th>Export Permit Received Date</th>
                                        <th>Technical Writeup</th>
                                        <th>Quaterly Data to submit ?</th>
                                        <th>Quaterly Data Submitted ?</th>
                                        <th>Next Quarter</th>
                                        <th>Batch No</th>
                                        <th>API Required</th>
                                        <th>API Import/Domestic</th>
                                        <th>Project Name</th>
                                        <th></th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>


                    <div id="tabglp" class="tab-pane fade in">
                        <!-- /.box-header -->
                        <div class="box-body " id="divProj">
                            <div style="margin: 8px 20px;box-shadow: 1px 1px 2px 2px #ececec;padding: 3px;">
                                <div class="form-group" style="margin-bottom:0">
                                    <div class="col-md-5" style="margin-top:6px">
                                        <div class="radio">
                                            <select id="fltglpstatus" onchange="$('#tblglp').DataTable().draw()">
                                                <option>--Select--</option>
                                                <option value="1">Pending</option>
                                                <option value="2">Release</option>
                                                <option value="3">Reject</option>
                                            </select>

                                        </div>
                                    </div>
                                    @*<div class="col-md-6" style="margin-top:9px">
                            <div>
                                <input class="form-control" id="allsearchbox" type="text" placeholder="Enter search string" style="width:300px; float:left">
                                <a href="javascript:void(0)" style="float:left;margin-left:8px;" class="btn btn-primary" onclick="$('#tblglp').DataTable().draw()">Search</a>
                            </div>
                        </div>*@
                                    <div class="clearfix"></div>
                                </div>

                            </div>
                            <div class="clearfix"></div>
                            <br />
                            <table id="tblglp" class="table table-condensed table-striped table-bordered  table-hover" cellspacing="0">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th><input type="checkbox" id="selectAllclsSaverow" /></th>
                                        <th>Assign Date</th>
                                        <th>Product Name</th>
                                        <th>Batch No</th>
                                        <th>CAS No</th>
                                        <th>CAT No</th>
                                        <th>Scientist</th>
                                        <th>Sub-Scientist</th>
                                        @*<th>Received From</th>*@
                                        <th>GLP Status</th>
                                        <th>Analysis Completion Date</th>
                                        <th>GLP Remark</th>
                                        <th>Priority</th>
                                        <th>Company Name</th>
                                        <th>PO No</th>
                                        <th>Dispatch Lead Time</th>
                                        <th>Previous Batch Detail</th>
                                        <th>Stability Status</th>
                                        <th>AMV Status</th>
                                        <th></th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- /.box-body -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.3/css/bootstrap.min.css" />
<script src="https://cdn.jsdelivr.net/gh/davidstutz/bootstrap-multiselect@master/dist/js/bootstrap-multiselect.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/davidstutz/bootstrap-multiselect@master/dist/css/bootstrap-multiselect.css">

<script>
    setTimeout(function () {
        $("#watchlist").find("#fltprotypeItem").append('<option value="111">Not In-Stock</option>');
    }, 1000);
    $('#fltLicesenStatus').multiselect({
        columns: 1,
        placeholder: 'Select Status',
        search: false
    });
    function datesearch(tblname) {
        $('#' + tblname).DataTable().draw();
    }
    function queryGenerate(id) {
        $.ajax({
            url: '/Form/AddQuery?id=' + id + '&sectionName=project',
            data: {},
            type: 'GET',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $('#invoiceQueryModal .modal-body').html(data.html);
                $('#invoiceQueryModal').modal({ show: true });
                // $("#invoiceQueryModal .modal-content").css("width", "1080px");
            }
        });
    }

    $(document).ready(function () {

        $(document).on("change", ".clsIsPriority", function () {
            var chkEvent = $(this).is(':checked');
            $.ajax({
                url: '/Form/ChangeProductPriority?status=' + $(this).is(':checked') + '&id=' + $(this).val(),
                data: {},
                type: 'GET',
                traditional: true, // add this
                dataType: 'json',
                success: function (data) {
                    toastr.success("Product priority changed.");
                }
            });
        });

    });

    function DataApprovedrecords() {
        var menulink = '';
        $('.nav').find('li').each(function () {
            if ($(this).hasClass('active')) {
                menulink = $(this).find('a').attr('data-tabname');
            }
        });

        var tableId = '';
        if (menulink === 'all') {
            tableId = 'example1';
        }
        else if (menulink === 'noaction') {
            tableId = 'tblnoaction';
        }
        else if (menulink === 'domestic') {
            tableId = 'tbldomestic';
        }
        else if (menulink === 'synthesis') {
            tableId = 'tblsynthesis';
        }
        else if (menulink === 'purchase') {
            tableId = 'tblpurchase';
        }
        else if (menulink === 'instock') {
            tableId = 'tblinstock';
        }
        else if (menulink === 'export') {
            tableId = 'tblexport';
        }
        else {
            tableId = 'exampleinhouse';
        }
        var ids = [];
        $('#' + tableId).find('.clsSaverow').each(function () {
            if ($(this).is(':checked')) {
                ids.push($(this).val());
            }
        });

        if (ids.length === 0) {
            toastr.error("Please select atleast one Product");
            return false;
        }

        $.ajax({
            url: '/Form/DataApprovedProjectRecord',
            data: { id: ids },
            type: 'POST',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                if (data.success) {
                    toastr.success(data.message);
                }
                else {
                    toastr.error(data.message);
                    return false;
                }
            }
        });
    }

    function projectUpdate() {
        var ids = [];
        $('#example1').find('.clsSaverow').each(function () {
            if ($(this).is(':checked')) {
                ids.push($(this).val());
            }
        });

        if (ids.length === 0) {
            toastr.error("Please select atleast one Product");
            return false;
        }

        $("#btnprojectUpdate").text("Sending...");
        $.ajax({
            url: '/Form/ProjectUpdateEmail',
            data: { id: ids },
            type: 'POST',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $("#btnprojectUpdate").text("Project Update");
                toastr.success('Email sent successfully.');
            }
        });
    }

    function projectreport() {
        $.ajax({
            url: '/Form/ProjectReportPOPUP',
            data: {},
            type: 'POST',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $('#myModal').find('.modal-body').html(data.html);
                $('#myModal').modal({ show: true });
                $('#myModal').find(".modal-dialog").css("width", "1200px");
            }
        });
    }

    function sendorderemail() {
        var ids = [];
        $('#example1').find('.clsSaverow').each(function () {
            if ($(this).is(':checked')) {
                ids.push($(this).val());
            }
        });

        if (ids.length === 0) {
            toastr.error("Please select atleast one Product");
            return false;
        }
        orderConfirmationPupop(ids);
    }

    function companyRecordsWithCount() {
        $.ajax({
            url: '/Form/LoadProductCountData',
            data: {},
            type: 'POST',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {

                var str = '<table width="100%" class="table table-condensed table-striped table-bordered  table-hover dataTable no-footer"><thead><tr><th>Company Name</th><th>Count</th></tr></thead>';

                $(data).each(function (i, v) {
                    str += '<tr><td>' + v.Key + '</td><td>' + v.Count + '</td></tr>';
                });
                str += '</table>';
                $('#myModal').find('.modal-body').html(str);
                $('#myModal').modal({ show: true });
                $('#myModal').find(".modal-dialog").css("width", "1200px");
            }
        });
    }

    function orderConfirmationPupop(ids) {
        $.ajax({
            url: '/Form/OrderConfirmationEmail',
            data: { id: ids },
            type: 'POST',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $('#myModal').find('.modal-body').html(data.html);
                $('#myModal').modal({ show: true });
                $('#myModal').find(".modal-dialog").css("width", "1280px");
            }
        });
    }


    function Printrecords(status = "") {
        var menulink = '';
        $('.nav').find('li').each(function () {
            if ($(this).hasClass('active')) {
                menulink = $(this).find('a').attr('data-tabname');
            }
        });

        var tableId = '';
        if (menulink === 'all') {
            tableId = 'example1';
        }
        else if (menulink === 'watchlist') {
            tableId = 'tblwatchList';
        }
        else if (menulink === 'noaction') {
            tableId = 'tblnoaction';
        }
        else if (menulink === 'domestic') {
            tableId = 'tbldomestic';
        }
        else if (menulink === 'synthesis') {
            tableId = 'tblsynthesis';
        }
        else if (menulink === 'purchase') {
            tableId = 'tblpurchase';
        }
        else if (menulink === 'instock') {
            tableId = 'tblinstock';
        }
        else if (menulink === 'export') {
            tableId = 'tblexport';
        }
        else if (menulink === 'controlledsubstance') {
            tableId = 'tblcontrolledsubstance';
        }
        else if (menulink === 'hold') {
            tableId = 'example2';
        }
        else {
            tableId = 'exampleinhouse';
        }
        var ids = [];
        $('#' + tableId).find('.clsSaverow').each(function () {
            if ($(this).is(':checked')) {
                ids.push($(this).val());
            }
        });

        if (ids.length === 0) {
            toastr.error("Please select atleast one Product");
            return false;
        }

        $.ajax({
            url: '/Form/PrintProjectRecord',
            data: { id: ids, pageName: status },
            type: 'POST',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $('.modal-body').html(data.html);
                $('#myModal').modal({ show: true });
                $(".modal-dialog").css("width", "1080px");
            }
        });
    }
    $(".resizediv").css('height', window.innerHeight - 200);
    $('#home').find('#fltestdate').datepicker({
        format: 'dd/mm/yyyy'
    });
    $('#watchlist').find('#fltestdate').datepicker({
        format: 'dd/mm/yyyy'
    });
    $('#tabsynthesis').find('#fltestdate').datepicker({
        format: 'dd/mm/yyyy'
    });

    function alldataload() {
        $(function () {
            var alltbl = $('#example1').dataTable({
                "searching": false,
                "ordering": false,
                "scrollX": true,
                "scrollY": "550px",
                "sPaginationType": "listbox",
                //"autoWidth" : false,
                "processing": true, // for show progress bar
                "serverSide": true, // for process server side
                "filter": true, // this is for disable filter (search box)
                "pageLength": 25,
                "fnDrawCallback": function (oSettings) {
                    $("#selectAllclsMoveDispatch").click(function () {
                        if ($(this).is(":checked")) {
                            $('.clsMoveDispatch').each(function () {
                                $(this).prop("checked", true);
                            });
                        }
                        else {
                            $(".clsMoveDispatch").each(function () {
                                $(this).prop("checked", false);
                            });
                        }
                    });

                    $("#selectAllclsSaverow").click(function () {
                        if ($(this).is(":checked")) {
                            $('.clsSaverow').each(function () {
                                $(this).prop("checked", true);
                            });
                        }
                        else {
                            $(".clsSaverow").each(function () {
                                $(this).prop("checked", false);
                            });
                        }
                    });
                    $('#example1').find('.datepicker').datepicker({
                        format: 'dd/mm/yyyy'
                    });


                    $('#example1').find('.datepicker').each(function () {
                        var dateValue = $(this).attr('data-value');
                        if (dateValue !== '') {
                            dateValue = dateValue.toString().replace(' 00:00:00', '');
                            $(this).datepicker("setDate", dateValue);
                        }
                    });

                    var api = this.api();
                    var rows = api.rows({ page: 'current' }).nodes();
                    var last = null;
                    var groupingCounts = [];
                    var counter = 1;
                    api.column(7, { page: 'current' }).data().each(function (group, i) {
                        if (last !== group) {
                            if (last !== undefined) {
                                groupingCounts[last] = counter;
                            }
                            $(rows).eq(i).before(
                                //'<td class="group" colspan="26" style="color:#fff;font-weight:700;padding:10px;' + (rows[i].attributes["data-IsPaymentPending"].value === "true" ? "BACKGROUND-COLOR:#e25b5b;" : "BACKGROUND-COLOR:#3c8dbc;") + '"><a style="color: #fff; text-decoration: underline;" target="_blank" href="/Form/Quote/' + rows[i].attributes["data-QuoteId"].value + '">' + group + "</a> | " + rows[i].attributes["data-company"].value + ' | ' + rows[i].attributes["data-podate"].value + ' ' + (rows[i].attributes["data-IsPaymentPending"].value === "true" ? "(Payment Pending)" : "") + " " + (rows[i].attributes["data-PaymentTerms"] === undefined || rows[i].attributes["data-PaymentTerms"].value === "" ? "" : " | Payment Terms : " + rows[i].attributes["data-PaymentTerms"].value)
                                '<td class="group" id="grouping_' + group.trim() + '" data-groupname="' + group + '" colspan="36" style="color:#fff;font-weight:700;padding:10px;' + (rows[i].attributes["data-IsConversionReport"] != null && rows[i].attributes["data-IsConversionReport"].value == "true" ? "BACKGROUND-COLOR:#95647d" : (rows[i].attributes["data-IsPaymentPending"].value === "true" ? "BACKGROUND-COLOR:#e25b5b;" : "BACKGROUND-COLOR:#3c8dbc;")) + '"><div style="width:28.5%;float:left"><i class="fa fa-copy" onclick="copyToClipboard(&#39;' + group + '&#39;)"></i> <a style="color: #fff; text-decoration: underline;"  href="javascript:void(0)" onclick="Multiplequoteopen(' + rows[i].attributes["data-QuoteId"].value + ')">' + group + "</a> | " + rows[i].attributes["data-company"].value + '  <i class="fa fa-map-marker" onclick="showquoteaddress(' + rows[i].attributes["data-QuoteId"].value + ')"></i> | ' + (rows[i].attributes["data-SAPCode"] === null ? "" : rows[i].attributes["data-SAPCode"].value) + '  | ' + (rows[i].attributes["data-ProjectAssignName"] === null ? "" : rows[i].attributes["data-ProjectAssignName"].value) + '</div><div style="float:left">' + rows[i].attributes["data-podate"].value + ' ' + (rows[i].attributes["data-IsPaymentPending"].value === "true" ? "(Payment Pending)" : "") + " " + (rows[i].attributes["data-PaymentTerms"] === undefined || rows[i].attributes["data-PaymentTerms"].value === "" ? "" : " | Payment Terms : " + rows[i].attributes["data-PaymentTerms"].value) + ' | <i class="fa fa-envelope" onclick="opensendemailpopup(' + rows[i].attributes["data-QuoteId"].value + ')"></i></div>'
                                + ' </td>'
                            );

                            last = group;
                            counter = 1;
                        } else {
                            counter++;
                        }
                    });

                    //alltbl.columns.adjust();
                    $('.clstooltip').tooltip();

                    groupingCounts[last] = counter;
                    CountRows(groupingCounts, 'example1');
                },
                "columnDefs":
                    [
                        { targets: 4, visible: false },
                        { targets: 7, visible: false },
                        { targets: 8, visible: false }
                    ],
                "language": { processing: '<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span> ' },

                "ajax": {
                    "url": "../Form/LoadProductData",
                    "type": "POST",
                    "datatype": "json",
                    "data": function (d) {
                        d.sciname = $("#home").find("#ScientistListItem").val();
                        d.subsciname = $("#home").find("#SubScientistListItem").val();
                        d.fltprostatusItem = $("#home").find("#fltprostatusItem").val();
                        d.fltactivity = $("#home").find("#fltactivity").val();
                        d.radiobuton = $("#home").find('input[name="filterAll"]:checked').val();
                        d.searchbox = $("#home").find("#allsearchbox").val();
                        d.fltprotypeItem = $("#home").find("#fltprotypeItem").val();
                        d.fltestdate = $("#home").find("#fltestdate").val();
                        d.fltpriority = $("#home").find("#chkallpriority").is(":checked");
                        d.fltgeographicallocation = $("#home").find("#fltgeographicallocation").val();
                        d.fltglp = $("#home").find("#fltglp").val(); 
                    }
                },
                "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                    if (aData.SelectedProjectType === "In-Stock") {
                        $('td', nRow).css('background-color', 'rgb(202, 251, 217)');
                    }
                    if (aData.SelectedProjectType === "In-Stock" && aData.MoveToDispatch != true) {
                        $('td', nRow).css('background-color', 'rgb(202, 251, 217)');
                    }
                    if (aData.MoveToDispatch && (aData.DispatchedStatus == "0" || aData.DispatchedStatus == null)) {
                        $('td', nRow).css('background-color', '#ffe6b3');
                    }
                    if (aData.MoveToDispatch && aData.DispatchedStatus == "1") {
                        $('td', nRow).css('background-color', 'rgb(250, 209, 255)');
                    }
                    if (aData.MoveToInvoice) {
                        $('td', nRow).css('background-color', '#ff9999');
                    }
                    if (aData.IsControlledSubstance) {
                        $('td', nRow).css('color', 'red');
                    }
                    if (aData.SelectedProStatus === "Attention") {
                        $('td', nRow).css('color', 'blue');
                    }
                },
                "createdRow": function (row, data, dataIndex) {
                    // Set the data-status attribute, and add a class
                    $(row).attr('data-IsConversionReport', data.IsConversionReport);
                    $(row).attr('id', 'tr_' + data.QuoteDetailsId);
                    $(row).attr('data-email', data.EmailAddress);
                    $(row).attr('data-company', data.CompanyName);
                    $(row).attr('data-companyId', data.CompanyId);
                    $(row).attr('data-podate', data.MoveProjectDateText);
                    $(row).attr('data-pono', data.PONumber);
                    $(row).attr('data-ProductCount', data.ProductCount);
                    $(row).attr('data-PaymentTerms', data.PaymentTerms);
                    $(row).attr('data-QuoteId', data.QuoteId);
                    $(row).attr('data-SAPCode', (data.SAPCode == null ? "" : data.SAPCode));
                    $(row).attr('data-IsPaymentPending', (data.IsPaymentPending == null ? false : data.IsPaymentPending));
                    $(row).attr('data-ProjectAssignName', (data.ProjectAssignName == null ? "" : data.ProjectAssignName));
                },
                "columns": [
                    { "data": "ChkSaveRow" },
                    { "data": "ChkFirstRow" },
                    { "data": "ApprovedForClientText" },
                    //{ "data": "LastRowText", "autoWidth": true },
                    { "data": "SrPo" },
                    { "data": "MoveProjectDateText", "name": "MoveProjectDateText" },
                    /*{ "data": "LeadTime" },*/
                    { "data": "IsPriorityText" },
                    { "data": "DifficultyLevelText" },
                    { "data": "PONumber", "name": "PONumber" },
                    { "data": "CompanyName", "name": "CompanyName" },
                    { "data": "ProjectTypeText", "orderable": false },
                    { "data": "ScientistName", "orderable": false },
                    { "data": "SubScientistName", "orderable": false },
                    { "data": "InhouseRemarkText", "orderable": false },
                    { "data": "LeadTime" },
                    { "data": "SynStartDate", "name": "SynStartDate" },
                    { "data": "MoveToScientistDateStr", "orderable": false },
                    { "data": "ProductScheme" },
                    { "data": "SAPRawMaterial" },
                    { "data": "ProductName" },
                    { "data": "CASNo", "name": "CASNo", width: '150px' },
                    { "data": "CATNo", "name": "CATNo", width: '100px' },
                    { "data": "Attachment", "name": "Attachment" },
                    { "data": "RequiredQtyTxt", "name": "Ref", className: "fontbold", },
                    { "data": "AdditionalBatchNoText", "name": "ProductName", width: '150px' },
                    //{ "data": "COARefNumber", "name": "COARefNumber" },
                    { "data": "COAText", "name": "COAText" },
                    { "data": "GetAllBatch", "name": "GetAllBatch" },
                    { "data": "ReactionMatrix", "name": "ReactionMatrix" },
                    { "data": "ActivityStatusText", "orderable": false },
                    { "data": "ProStatusText", "orderable": false },
                    { "data": "EstimateCompleteDateText", "orderable": false },
                    { "data": "CountEstDate", "orderable": false },
                    { "data": "ExplainationSecondText", "orderable": false },
                    { "data": "ExplainationText", "orderable": false },
                    { "data": "RemarkText", "orderable": false },
                    { "data": "ReasonText", "orderable": false },
                    { "data": "TechnicalEmail", "orderable": false },
                    { "data": "OrderRemarkText", "orderable": false },
                    { "data": "GLP", "orderable": false },
                    { "data": "GLPRemark", "orderable": false },
                    { "data": "GLPStatus", "orderable": false },
                ]
            });
        });
    }


    var thirdtabloaded = false;
    function inhousetab() {
        if (thirdtabloaded === false) {
            $('#exampleinhouse').DataTable({
                "ordering": false,
                "processing": true, // for show progress bar
                "serverSide": true, // for process server side
                "filter": true, // this is for disable filter (search box)
                "orderMulti": false, // for disable multiple column at once
                "pageLength": 25,
                "fnDrawCallback": function (oSettings) {
                    
                    $('#exampleinhouse').find('.datepicker').datepicker({
                        format: 'dd/mm/yyyy'
                    });

                    $('#exampleinhouse').find('.datepicker').each(function () {
                        var dateValue = $(this).attr('data-value');
                        if (dateValue !== '') {
                            dateValue = dateValue.toString().replace(' 00:00:00', '');
                            $(this).datepicker("setDate", dateValue);
                        }
                    });
                    thirdtabloaded = true;
                },
                "language": { processing: '<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span> ' },
                "initComplete": function (settings, json) {

                },
                "ajax": {
                    "url": "../Form/LoadProductInHouseData",
                    "type": "POST",
                    "datatype": "json"
                },
                "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                    if (aData.SelectedProjectType === "In-Stock") {
                        $('td', nRow).css('background-color', 'rgb(202, 251, 217)');
                    }
                    if (aData.SelectedProjectType === "In-Stock" && aData.MoveToDispatch != true) {
                        $('td', nRow).css('background-color', 'rgb(202, 251, 217)');
                    }
                    //if (aData.ReadyToDeliverScientistStatusId === aData.ScientistStatus) {
                    //    $('td', nRow).css('background-color', 'rgb(202, 251, 217)');
                    //}
                    if (aData.MoveToDispatch && (aData.DispatchedStatus == "0" || aData.DispatchedStatus == null)) {
                        $('td', nRow).css('background-color', '#ffe6b3');
                    }
                    if (aData.MoveToDispatch && aData.DispatchedStatus == "1") {
                        $('td', nRow).css('background-color', 'rgb(250, 209, 255)');
                    }
                    if (aData.MoveToInvoice) {
                        $('td', nRow).css('background-color', '#ff9999');
                    }
                    if (aData.IsControlledSubstance) {
                        $('td', nRow).css('color', 'red');
                    }
                    if (aData.SelectedProStatus === "Attention") {
                        $('td', nRow).css('color', 'blue');
                    }
                },
                "columnDefs": [],
                "createdRow": function (row, data, dataIndex) {
                    // Set the data-status attribute, and add a class
                    $(row).attr('id', 'tr_' + data.QuoteDetailsId);
                    $(row).attr('data-company', data.CompanyName);
                    $(row).attr('data-podate', data.MoveProjectDateText);
                    $(row).attr('data-pono', data.PONumber);
                    $(row).attr('data-IsConversionReport', data.IsConversionReport);
                },
                "columns": [
                    { "data": "ChkSaveRow", "autoWidth": true },
                    { "data": "ChkFirstRow", "autoWidth": true },
                    //{ "data": "LastRowText", "autoWidth": true },
                    { "data": "SrPo", "autoWidth": true },
                    { "data": "PONumber", "name": "PONumber", "autoWidth": true },
                    { "data": "CompanyName", "name": "CompanyName", "autoWidth": true },
                    { "data": "ProjectTypeText", "autoWidth": true, "orderable": false },
                    { "data": "ScientistName", "autoWidth": true, "orderable": false },
                    { "data": "SubScientistName", "autoWidth": true, "orderable": false },
                    { "data": "ProductName", "width": "18%" },
                    { "data": "CASNo", "name": "CompanyName", "width": "6%" },
                    { "data": "CATNo", "name": "PONumber", "width": "6%" },
                    { "data": "RequiredQtyTxt", "name": "Ref", "autoWidth": true },
                    { "data": "EstimateCompleteDateText", "orderable": false, "autoWidth": true },
                    //{ "data": "ScientistStatustext", "orderable": false, "autoWidth": true },
                    { "data": "AdditionalBatchNoText", "name": "ProductName", "autoWidth": true },
                    //   { "data": "BatchNoText", "name": "Price", "autoWidth": true },
                    //{ "data": "ProjectStatustext", "orderable": false, "autoWidth": true },
                    //  { "data": "ScientistRemark", "orderable": false, "autoWidth": true },
                    { "data": "RemarkText", "orderable": false, "autoWidth": true }
                ]
               
            });
        }
    }

    $(document).ready(function () {
        $(".scientist").each(function () {
            var value = $(this).attr("scientistId");
            var quotedetailsid = $(this).attr("quotedetailsid");
            if (value != "") {
                $(this).val(value);
                $("#textscientistId_" + quotedetailsid).text($("#ScientistId_" + quotedetailsid + " option:selected").text());

            }
        });

        $('.clsRow').each(function () {
            var sciStatus = $(this).attr('data-ScientistStatus');
            var moveDispatch = $(this).attr('data-MovetoDispatch');
            var readyDeliveredId = $(this).attr('data-ReadyToDeliverScientistStatusId');
            if (sciStatus === readyDeliveredId && moveDispatch === '') {
                $(this).css('background-color', 'rgb(217, 237, 249)');
            }
            else {
                $(this).css('background-color', '');
            }

        });

    })

    function SetOnHold(id) {
        $.ajax({
            url: '/Form/SetProjectOnHold?id=' + id,
            data: {},
            type: 'POST',
            success: function (data) {
                toastr.success('You have set hold for this product.');
                window.location.reload(true);
            }
        });
    }

    function SetOnresume(id) {
        $.ajax({
            url: '/Form/SetProjectOnResume?id=' + id,
            data: {},
            type: 'POST',
            success: function (data) {
                toastr.success('You have update for this product.');
                window.location.reload(true);
            }
        });
    }

    function resumeall() {

        var ids = [];

        $("#example2").find('.clsSaverow').each(function () {
            if ($(this).is(':checked')) {
                ids.push($(this).val());
            }
        });

        if (ids.length === 0) {
            toastr.error("Please select atleast one Product");
            return false;
        }

        $.ajax({
            url: '/Form/SetProjectOnResumeAll',
            data: { id: ids },
            type: 'POST',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $('#example2').DataTable().ajax.reload(null, false);
            }
        });
    }



    function SaveAll() {
        var ids = [];
        var qtyerror = 0;
        var menulink = '';
        $('.nav').find('li').each(function () {
            if ($(this).hasClass('active')) {
                menulink = $(this).find('a').attr('data-tabname');
            }
        })

        if (menulink === 'noaction') {
            $('#tblnoaction').find('.clsSaverow').each(function () {
                var divid = $(this).val();
                $('#tblnoaction').find("#qty_" + divid).css('border', '');
                if ($(this).is(':checked')) {
                    var catNo = $('#tblnoaction').find("#qty_" + divid).attr("data-cat");
                    var qty = $('#tblnoaction').find("#qty_" + divid).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblnoaction').find("#qty_" + divid).css('border', '1px solid red');
                        qtyerror += 1;
                    }
                    if (catNo === "" || catNo.trim() == "") {
                        toastr.error("You can processed only CAT No data.");
                        qtyerror += 1;
                    }
                    ids.push($(this).val());
                }
            });

            if (ids.length === 0) {
                toastr.error("Please select atleast one Product");
                return false;
            }
            if (qtyerror !== 0) {
                toastr.error("Please add qty.");
                return false;
            }
            var count = 1;
            $('#tblnoaction').find('.clsSaverow').each(function () {
                var id = $(this).val();
                $('#tblnoaction').find("#qty_" + id).css('border', '');
                if ($(this).is(':checked')) {
                    var scId = $('#tblnoaction').find("#ScientistId_" + id).val();
                    var scientistStatus = $('#tblnoaction').find("#scientistStatus_" + id).val();
                    var projectType = $('#tblnoaction').find("#projecttype_" + id).val();
                    var qty = $('#tblnoaction').find("#qty_" + id).val();
                    var batchno = $('#tblnoaction').find("#batchno_" + id).val();
                    var additionalBatch = $('#tblnoaction').find("#additionalBatch_" + id).val();
                    var remark = $('#tblnoaction').find("#remark_" + id).val();
                    var sciremark = $('#tblnoaction').find("#sciremark_" + id).val();
                    var estDate = $('#tblnoaction').find("#esticompleteDate_" + id).val();
                    var orderremark = $('#tblnoaction').find("#orderremark_" + id).val();
                    var reason = $('#tblnoaction').find("#reason_" + id).val();
                    var difflevel = $('#tblnoaction').find("#difflevel_" + id).val();
                    var subScientistId = $('#tblnoaction').find("#SubScientistId_" + id).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblnoaction').find("#qty_" + id).css('border', '1px solid red');
                        return false;
                    }
                    $.ajax({
                        url: '/Form/UpdateProjectInfo',
                        data: {
                            scId: scId,
                            projectType: projectType,
                            qty: qty,
                            id: id,
                            batchno: batchno,
                            remark: remark,
                            additionalBatch: additionalBatch,
                            scientistStatus: scientistStatus,
                            sciremark: sciremark,
                            estDate: estDate,
                            orderremark: orderremark,
                            reason: reason,
                            tabname: 'noaction',
                            difflevel: difflevel,
                            subScientistId: subScientistId
                        },
                        type: 'POST',
                        success: function (data) {
                        },
                        complete: function (data) {
                            successAlert(count, ids.length);
                            count += 1;
                        }
                    });
                }
            });
        }
        else if (menulink === 'domestic') {

            $('#tbldomestic').find('.clsSaverow').each(function () {
                var divid = $(this).val();
                $('#tbldomestic').find("#qty_" + divid).css('border', '');
                if ($(this).is(':checked')) {
                    var qty = $('#tbldomestic').find("#qty_" + divid).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tbldomestic').find("#qty_" + divid).css('border', '1px solid red');
                        qtyerror += 1;
                    }
                    ids.push($(this).val());
                }
            });

            if (ids.length === 0) {
                toastr.error("Please select atleast one Product");
                return false;
            }
            if (qtyerror !== 0) {
                toastr.error("Please add qty.");
                return false;
            }
            var count = 1;
            $('#tbldomestic').find('.clsSaverow').each(function () {
                var id = $(this).val();
                $('#tbldomestic').find("#qty_" + id).css('border', '');
                if ($(this).is(':checked')) {
                    var scId = $('#tbldomestic').find("#ScientistId_" + id).val();
                    var scientistStatus = $('#tbldomestic').find("#scientistStatus_" + id).val();
                    var projectType = $('#tbldomestic').find("#projecttype_" + id).val();
                    var qty = $('#tbldomestic').find("#qty_" + id).val();
                    var batchno = $('#tbldomestic').find("#batchno_" + id).val();
                    var additionalBatch = $('#tbldomestic').find("#additionalBatch_" + id).val();
                    var remark = $('#tbldomestic').find("#remark_" + id).val();
                    var sciremark = $('#tbldomestic').find("#sciremark_" + id).val();
                    var estDate = $('#tbldomestic').find("#esticompleteDate_" + id).val();
                    var orderremark = $('#tbldomestic').find("#orderremark_" + id).val();
                    var reason = $('#tbldomestic').find("#reason_" + id).val();
                    var activity = $('#tbldomestic').find("#activitystatus_" + id).val();
                    var subScientistId = $('#tbldomestic').find("#SubScientistId_" + id).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tbldomestic').find("#qty_" + id).css('border', '1px solid red');
                        return false;
                    }
                    var otherprostatus = $('#tbldomestic').find("#otherprostatus_" + id).val();
                    $.ajax({
                        url: '/Form/UpdateProjectInfo',
                        data: {
                            scId: scId,
                            projectType: projectType,
                            qty: qty,
                            id: id,
                            batchno: batchno,
                            remark: remark,
                            additionalBatch: additionalBatch,
                            scientistStatus: scientistStatus,
                            sciremark: sciremark,
                            estDate: estDate,
                            orderremark: orderremark,
                            reason: reason,
                            tabname: 'domestic',
                            activity: activity,
                            subScientistId: subScientistId,
                            otherprostatus: otherprostatus
                        },
                        type: 'POST',
                        success: function (data) {
                        },
                        complete: function (data) {
                            successAlert(count, ids.length);
                            count += 1;
                        }
                    });
                }
            });
        }
        else if (menulink === 'synthesis') {
            $('#tblsynthesis').find('.clsSaverow').each(function () {
                var divid = $(this).val();
                $('#tblsynthesis').find("#qty_" + divid).css('border', '');
                if ($(this).is(':checked')) {
                    var qty = $('#tblsynthesis').find("#qty_" + divid).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblsynthesis').find("#qty_" + divid).css('border', '1px solid red');
                        qtyerror += 1;
                    }
                    ids.push($(this).val());
                }
            });

            if (ids.length === 0) {
                toastr.error("Please select atleast one Product");
                return false;
            }
            if (qtyerror !== 0) {
                toastr.error("Please add qty.");
                return false;
            }
            var count = 1;
            $('#tblsynthesis').find('.clsSaverow').each(function () {
                var id = $(this).val();
                $('#tblsynthesis').find("#qty_" + id).css('border', '');
                if ($(this).is(':checked')) {
                    var scId = $('#tblsynthesis').find("#ScientistId_" + id).val();
                    var scientistStatus = $('#tblsynthesis').find("#scientistStatus_" + id).val();
                    var projectType = $('#tblsynthesis').find("#projecttype_" + id).val();
                    var qty = $('#tblsynthesis').find("#qty_" + id).val();
                    var batchno = $('#tblsynthesis').find("#batchno_" + id).val();
                    var additionalBatch = $('#tblsynthesis').find("#additionalBatch_" + id).val();
                    var remark = $('#tblsynthesis').find("#remark_" + id).val();
                    var sciremark = $('#tblsynthesis').find("#sciremark_" + id).val();
                    var estDate = $('#tblsynthesis').find("#esticompleteDate_" + id).val();
                    var orderremark = $('#tblsynthesis').find("#orderremark_" + id).val();
                    var reason = $('#tblsynthesis').find("#reason_" + id).val();
                    var prostatus = $('#tblsynthesis').find("#prostatus_" + id).val();
                    var subScientistId = $('#tblsynthesis').find("#SubScientistId_" + id).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblsynthesis').find("#qty_" + id).css('border', '1px solid red');
                        return false;
                    }
                    $.ajax({
                        url: '/Form/UpdateProjectInfo',
                        data: {
                            scId: scId,
                            projectType: projectType,
                            qty: qty,
                            id: id,
                            batchno: batchno,
                            remark: remark,
                            additionalBatch: additionalBatch,
                            scientistStatus: scientistStatus,
                            sciremark: sciremark,
                            estDate: estDate,
                            orderremark: orderremark,
                            reason: reason,
                            tabname: 'synthesis',
                            prostatus: prostatus,
                            subScientistId: subScientistId
                        },
                        type: 'POST',
                        success: function (data) {
                        },
                        complete: function (data) {
                            successAlert(count, ids.length);
                            count += 1;
                        }
                    });
                }
            });
        }
        else if (menulink === 'purchase') {
            $('#tblpurchase').find('.clsSaverow').each(function () {
                var divid = $(this).val();
                $('#tblpurchase').find("#qty_" + divid).css('border', '');
                if ($(this).is(':checked')) {
                    var qty = $('#tblpurchase').find("#qty_" + divid).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblpurchase').find("#qty_" + divid).css('border', '1px solid red');
                        qtyerror += 1;
                    }
                    ids.push($(this).val());
                }
            });

            if (ids.length === 0) {
                toastr.error("Please select atleast one Product");
                return false;
            }
            if (qtyerror !== 0) {
                toastr.error("Please add qty.");
                return false;
            }
            var count = 1;
            $('#tblpurchase').find('.clsSaverow').each(function () {
                var id = $(this).val();
                $('#tblpurchase').find("#qty_" + id).css('border', '');
                if ($(this).is(':checked')) {
                    var scId = $('#tblpurchase').find("#ScientistId_" + id).val();
                    var purchaseDDLStatus = $('#tblpurchase').find("#PurchaseDDLStatus_" + id).val();
                    //var scientistStatus = $('#tblpurchase').find("#scientistStatus_" + id).val();
                    //var projectType = $('#tblpurchase').find("#projecttype_" + id).val();
                    var qty = $('#tblpurchase').find("#qty_" + id).val();
                    //var batchno = $('#tblpurchase').find("#batchno_" + id).val();
                    var additionalBatch = $('#tblpurchase').find("#additionalBatch_" + id).val();
                    //var remark = $('#tblpurchase').find("#remark_" + id).val();
                    //var sciremark = $('#tblpurchase').find("#sciremark_" + id).val();
                    var purchaseStatus = $('#tblpurchase').find("#purchasestatus_" + id).val();
                    var estDate = $('#tblpurchase').find("#esticompleteDate_" + id).val();
                    var purchaseremark = $('#tblpurchase').find("#purremark_" + id).val();
                    var reason = $('#tblpurchase').find("#reason_" + id).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblpurchase').find("#qty_" + id).css('border', '1px solid red');
                        return false;
                    }
                    $.ajax({
                        url: '/Form/UpdateProjectInfo',
                        data: {
                            scId: scId,
                            //projectType: projectType,
                            qty: qty,
                            id: id,
                            //batchno: batchno,
                            //remark: remark,
                            additionalBatch: additionalBatch,
                            //scientistStatus: scientistStatus,
                            //sciremark: sciremark,
                            purchaseStatus: purchaseStatus,
                            tabname: 'purchase',
                            estDate: estDate,
                            reason: reason,
                            purchaseremark: purchaseremark,
                            purchaseDDLStatus: purchaseDDLStatus
                        },
                        type: 'POST',
                        success: function (data) {
                        },
                        complete: function (data) {
                            successAlert(count, ids.length);
                            count += 1;
                        }
                    });
                }
            });
        }
        else if (menulink === 'instock') {
            $('#tblinstock').find('.clsSaverow').each(function () {
                var divid = $(this).val();
                $('#tblinstock').find("#qty_" + divid).css('border', '');
                if ($(this).is(':checked')) {
                    var qty = $('#tblinstock').find("#qty_" + divid).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblinstock').find("#qty_" + divid).css('border', '1px solid red');
                        qtyerror += 1;
                    }
                    ids.push($(this).val());
                }
            });

            if (ids.length === 0) {
                toastr.error("Please select atleast one Product");
                return false;
            }
            if (qtyerror !== 0) {
                toastr.error("Please add qty.");
                return false;
            }
            var count = 1;
            $('#tblinstock').find('.clsSaverow').each(function () {
                var id = $(this).val();
                $('#tblinstock').find("#qty_" + id).css('border', '');
                if ($(this).is(':checked')) {
                    var scId = $('#tblinstock').find("#ScientistId_" + id).val();
                    var scientistStatus = $('#tblinstock').find("#scientistStatus_" + id).val();
                    var projectType = $('#tblinstock').find("#projecttype_" + id).val();
                    var qty = $('#tblinstock').find("#qty_" + id).val();
                    var batchno = $('#tblinstock').find("#batchno_" + id).val();
                    var additionalBatch = $('#tblinstock').find("#additionalBatch_" + id).val();
                    var remark = $('#tblinstock').find("#remark_" + id).val();
                    var sciremark = $('#tblinstock').find("#sciremark_" + id).val();
                    var estDate = $('#tblinstock').find("#esticompleteDate_" + id).val();
                    var reason = $('#tblinstock').find("#reason_" + id).val();
                    var orderremark = $('#tblinstock').find("#orderremark_" + id).val();
                    var activity = $('#tblinstock').find("#activitystatus_" + id).val();
                    var subScientistId = $('#tblinstock').find("#SubScientistId_" + id).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblinstock').find("#qty_" + id).css('border', '1px solid red');
                        return false;
                    }
                    var otherprostatus = $('#tblinstock').find("#otherprostatus_" + id).val();

                    $.ajax({
                        url: '/Form/UpdateProjectInfo',
                        data: {
                            scId: scId,
                            projectType: projectType,
                            qty: qty,
                            id: id,
                            batchno: batchno,
                            remark: remark,
                            additionalBatch: additionalBatch,
                            scientistStatus: scientistStatus,
                            sciremark: sciremark,
                            estDate: estDate,
                            reason: reason,
                            tabname: "instock",
                            orderremark: orderremark,
                            activity: activity,
                            subScientistId: subScientistId,
                            otherprostatus: otherprostatus
                        },
                        type: 'POST',
                        success: function (data) {
                        },
                        complete: function (data) {
                            successAlert(count, ids.length);
                            count += 1;
                        }
                    });
                }
            });
        }
        else if (menulink === 'inhouse') {
            $('#exampleinhouse').find('.clsSaverow').each(function () {
                var divid = $(this).val();
                $('#exampleinhouse').find("#qty_" + divid).css('border', '');
                if ($(this).is(':checked')) {
                    var qty = $('#exampleinhouse').find("#qty_" + divid).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#exampleinhouse').find("#qty_" + divid).css('border', '1px solid red');
                        qtyerror += 1;
                    }
                    ids.push($(this).val());
                }
            });

            if (ids.length === 0) {
                toastr.error("Please select atleast one Product");
                return false;
            }
            if (qtyerror !== 0) {
                toastr.error("Please add qty.");
                return false;
            }
            var count = 1;
            $('#exampleinhouse').find('.clsSaverow').each(function () {
                var id = $(this).val();
                $('#exampleinhouse').find("#qty_" + id).css('border', '');
                if ($(this).is(':checked')) {
                    var scId = $('#exampleinhouse').find("#ScientistId_" + id).val();
                    var scientistStatus = $('#exampleinhouse').find("#scientistStatus_" + id).val();
                    var projectType = $('#exampleinhouse').find("#projecttype_" + id).val();
                    var qty = $('#exampleinhouse').find("#qty_" + id).val();
                    var batchno = $('#exampleinhouse').find("#batchno_" + id).val();
                    var additionalBatch = $('#exampleinhouse').find("#additionalBatch_" + id).val();
                    var remark = $('#exampleinhouse').find("#remark_" + id).val();
                    var sciremark = $('#exampleinhouse').find("#sciremark_" + id).val();
                    var estDate = $('#exampleinhouse').find("#esticompleteDate_" + id).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#exampleinhouse').find("#qty_" + id).css('border', '1px solid red');
                        return false;
                    }
                    $.ajax({
                        url: '/Form/UpdateProjectInfo',
                        data: {
                            scId: scId,
                            projectType: projectType,
                            qty: qty,
                            id: id,
                            batchno: batchno,
                            remark: remark,
                            additionalBatch: additionalBatch,
                            scientistStatus: scientistStatus,
                            sciremark: sciremark,
                            estDate: estDate
                        },
                        type: 'POST',
                        success: function (data) {
                        },
                        complete: function (data) {
                            successAlert(count, ids.length);
                            count += 1;
                        }
                    });
                }
            });
        }
        else if (menulink === 'export') {
            $('#tblexport').find('.clsSaverow').each(function () {
                var divid = $(this).val();
                $('#tblexport').find("#qty_" + divid).css('border', '');
                if ($(this).is(':checked')) {
                    var qty = $('#tblexport').find("#qty_" + divid).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblexport').find("#qty_" + divid).css('border', '1px solid red');
                        qtyerror += 1;
                    }
                    ids.push($(this).val());
                }
            });

            if (ids.length === 0) {
                toastr.error("Please select atleast one Product");
                return false;
            }
            if (qtyerror !== 0) {
                toastr.error("Please add qty.");
                return false;
            }
            var count = 1;
            $('#tblexport').find('.clsSaverow').each(function () {
                var id = $(this).val();
                $('#tblexport').find("#qty_" + id).css('border', '');
                if ($(this).is(':checked')) {
                    var scId = $('#tblexport').find("#ScientistId_" + id).val();
                    var scientistStatus = $('#tblexport').find("#scientistStatus_" + id).val();
                    var projectType = $('#tblexport').find("#projecttype_" + id).val();
                    var qty = $('#tblexport').find("#qty_" + id).val();
                    var batchno = $('#tblexport').find("#batchno_" + id).val();
                    var additionalBatch = $('#tblexport').find("#additionalBatch_" + id).val();
                    var remark = $('#tblexport').find("#remark_" + id).val();
                    var sciremark = $('#tblexport').find("#sciremark_" + id).val();
                    var estDate = $('#tblexport').find("#esticompleteDate_" + id).val();
                    var invoiceDate = $('#tblexport').find("#reportinvoiceDate_" + id).val();
                    var orderremark = $('#tblexport').find("#orderremark_" + id).val();
                    var reason = $('#tblexport').find("#reason_" + id).val();
                    var activity = $('#tblexport').find("#activitystatus_" + id).val();
                    var subScientistId = $('#tblexport').find("#SubScientistId_" + id).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblexport').find("#qty_" + id).css('border', '1px solid red');
                        return false;
                    }
                    var otherprostatus = $('#tblexport').find("#otherprostatus_" + id).val();

                    $.ajax({
                        url: '/Form/UpdateProjectInfo',
                        data: {
                            scId: scId,
                            projectType: projectType,
                            qty: qty,
                            id: id,
                            batchno: batchno,
                            remark: remark,
                            additionalBatch: additionalBatch,
                            scientistStatus: scientistStatus,
                            sciremark: sciremark,
                            estDate: estDate,
                            reportinvoiceDate: invoiceDate,
                            orderremark: orderremark,
                            reason: reason,
                            tabname: "export",
                            activity: activity,
                            subScientistId: subScientistId,
                            otherprostatus: otherprostatus
                        },
                        type: 'POST',
                        success: function (data) {
                        },
                        complete: function (data) {
                            successAlert(count, ids.length);
                            count += 1;
                        }
                    });
                }
            });

        }
        else if (menulink === 'purchaserfq') {
            $('#tblpurchaserfq').find('.clsSaverow').each(function () {
                if ($(this).is(':checked')) {
                    ids.push($(this).val());
                }
            });
            if (ids.length === 0) {
                toastr.error("Please select atleast one Product");
                return false;
            }
            var count = 1;
            $('#tblpurchaserfq').find('.clsSaverow').each(function () {
                var id = $(this).val();
                if ($(this).is(':checked')) {

                    var PurchaseRemark = $('#tblpurchaserfq').find("#purremark_" + id).val();
                    var Comment = $('#tblpurchaserfq').find("#comment_" + id).val();
                    var Summary = $('#tblpurchaserfq').find("#summary_" + id).val();
                    var PurchaseStatus = $('#tblpurchaserfq').find("#PurchaseStatus_" + id).val();
                    var ChemicalName = $('#tblpurchaserfq').find("#chemicalName_" + id).val();
                    var CASNo = $('#tblpurchaserfq').find("#casno_" + id).val();
                    var CATNo = $('#tblpurchaserfq').find("#catno_" + id).val();
                    var Estdate = $('#tblpurchaserfq').find("#estDate_" + id).val();
                    $.ajax({
                        url: '/Form/UpdateProjectPurchaseRFQInfo',
                        data: {
                            PurchaseRemark: PurchaseRemark,
                            Comment: Comment,
                            Summary: Summary,
                            Id: id,
                            PurchaseStatus: PurchaseStatus,
                            ChemicalName: ChemicalName,
                            CASNo: CASNo,
                            CATNo: CATNo,
                            Estdate: Estdate
                        },
                        type: 'POST',
                        success: function (data) {
                        },
                        complete: function (data) {
                            successPurchaseRFQAlert(count, ids.length);
                            count += 1;
                        }
                    });
                }
            });
        }
        else if (menulink === 'cancelledproduct') {

            $('#tblcancelledproduct').find('.clsSaverow').each(function () {
                var divid = $(this).val();
                $('#tblcancelledproduct').find("#qty_" + divid).css('border', '');
                if ($(this).is(':checked')) {
                    var qty = $('#tblcancelledproduct').find("#qty_" + divid).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblcancelledproduct').find("#qty_" + divid).css('border', '1px solid red');
                        qtyerror += 1;
                    }
                    ids.push($(this).val());
                }
            });

            if (ids.length === 0) {
                toastr.error("Please select atleast one Product");
                return false;
            }
            if (qtyerror !== 0) {
                toastr.error("Please add qty.");
                return false;
            }
            var count = 1;
            $('#tblcancelledproduct').find('.clsSaverow').each(function () {
                var id = $(this).val();
                $('#tblcancelledproduct').find("#qty_" + id).css('border', '');
                if ($(this).is(':checked')) {
                    var scId = $('#tblcancelledproduct').find("#ScientistId_" + id).val();
                    var scientistStatus = $('#tblcancelledproduct').find("#scientistStatus_" + id).val();
                    var projectType = $('#tblcancelledproduct').find("#projecttype_" + id).val();
                    var qty = $('#tblcancelledproduct').find("#qty_" + id).val();
                    var batchno = $('#tblcancelledproduct').find("#batchno_" + id).val();
                    var additionalBatch = $('#tblcancelledproduct').find("#additionalBatch_" + id).val();
                    var remark = $('#tblcancelledproduct').find("#remark_" + id).val();
                    var sciremark = $('#tblcancelledproduct').find("#sciremark_" + id).val();
                    var estDate = $('#tblcancelledproduct').find("#esticompleteDate_" + id).val();
                    var orderremark = $('#tblcancelledproduct').find("#orderremark_" + id).val();
                    var reason = $('#tblcancelledproduct').find("#reason_" + id).val();
                    var difflevel = $('#tblcancelledproduct').find("#difflevel_" + id).val();
                    var activity = $('#tblcancelledproduct').find("#activitystatus_" + id).val();
                    var prostatus = $('#tblcancelledproduct').find("#prostatus_" + id).val();
                    var gennsecond = $('#tblcancelledproduct').find("#explainationsecond_" + id).val();
                    var subScientistId = $('#tblcancelledproduct').find("#SubScientistId_" + id).val();
                    var CoaId = $('#tblcancelledproduct').find("#coa_" + id).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblcancelledproduct').find("#qty_" + id).css('border', '1px solid red');
                        return false;
                    }
                    $.ajax({
                        url: '/Form/UpdateProjectInfo',
                        data: {
                            scId: scId,
                            projectType: projectType,
                            qty: qty,
                            id: id,
                            batchno: batchno,
                            remark: remark,
                            additionalBatch: additionalBatch,
                            scientistStatus: scientistStatus,
                            sciremark: sciremark,
                            estDate: estDate,
                            orderremark: orderremark,
                            reason: reason,
                            tabname: 'all',
                            difflevel: difflevel,
                            activity: activity,
                            prostatus: prostatus,
                            explainationsecond: explainationsecond,
                            subScientistId: subScientistId,
                            CoaId: CoaId
                        },
                        type: 'POST',
                        success: function (data) {
                        },
                        complete: function (data) {
                            successAlert(count, ids.length);
                            count += 1;
                        }
                    });
                }
            });
        }
        else if (menulink === 'assigned') {
            $('#tblassigned').find('.clsSaverow').each(function () {
                var divid = $(this).val();
                $('#tblassigned').find("#qty_" + divid).css('border', '');
                if ($(this).is(':checked')) {
                    var qty = $('#tblassigned').find("#qty_" + divid).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblassigned').find("#qty_" + divid).css('border', '1px solid red');
                        qtyerror += 1;
                    }
                    ids.push($(this).val());
                }
            });

            if (ids.length === 0) {
                toastr.error("Please select atleast one Product");
                return false;
            }
            if (qtyerror !== 0) {
                toastr.error("Please add qty.");
                return false;
            }
            var count = 1;
            $('#tblassigned').find('.clsSaverow').each(function () {
                var id = $(this).val();
                $('#tblassigned').find("#qty_" + id).css('border', '');
                if ($(this).is(':checked')) {
                    var scId = $('#tblassigned').find("#ScientistId_" + id).val();
                    var scientistStatus = $('#tblassigned').find("#scientistStatus_" + id).val();
                    var projectType = $('#tblassigned').find("#projecttype_" + id).val();
                    var qty = $('#tblassigned').find("#qty_" + id).val();
                    var batchno = $('#tblassigned').find("#batchno_" + id).val();
                    var additionalBatch = $('#tblassigned').find("#additionalBatch_" + id).val();
                    var remark = $('#tblassigned').find("#remark_" + id).val();
                    var sciremark = $('#tblassigned').find("#sciremark_" + id).val();
                    var estDate = $('#tblassigned').find("#esticompleteDate_" + id).val();
                    var orderremark = $('#tblassigned').find("#orderremark_" + id).val();
                    var reason = $('#tblassigned').find("#reason_" + id).val();
                    var difflevel = $('#tblassigned').find("#difflevel_" + id).val();
                    var activity = $('#tblassigned').find("#activitystatus_" + id).val();
                    var prostatus = $('#tblassigned').find("#prostatus_" + id).val();
                    var explainationsecond = $('#tblassigned').find("#explainationsecond_" + id).val();
                    var subScientistId = $('#tblassigned').find("#SubScientistId_" + id).val();
                    var CoaId = $('#tblassigned').find("#coa_" + id).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblassigned').find("#qty_" + id).css('border', '1px solid red');
                        return false;
                    }
                    $.ajax({
                        url: '/Form/UpdateProjectInfo',
                        data: {
                            scId: scId,
                            projectType: projectType,
                            qty: qty,
                            id: id,
                            batchno: batchno,
                            remark: remark,
                            additionalBatch: additionalBatch,
                            scientistStatus: scientistStatus,
                            sciremark: sciremark,
                            estDate: estDate,
                            orderremark: orderremark,
                            reason: reason,
                            tabname: 'all',
                            difflevel: difflevel,
                            activity: activity,
                            prostatus: prostatus,
                            explainationsecond: explainationsecond,
                            subScientistId: subScientistId,
                            CoaId: CoaId
                        },
                        type: 'POST',
                        success: function (data) {
                        },
                        complete: function (data) {
                            successAlert(count, ids.length);
                            count += 1;
                        }
                    });
                }
            });

        }
        else if (menulink === 'controlledsubstance') {
            $('#tblcontrolledsubstance').find('.clsSaverow').each(function () {
                var divid = $(this).val();
                if ($(this).is(':checked')) {
                    ids.push($(this).val());
                }
            });

            if (ids.length === 0) {
                toastr.error("Please select atleast one Product");
                return false;
            }
            var count = 1;
            $('#tblcontrolledsubstance').find('.clsSaverow').each(function () {
                var id = $(this).val();
                $('#tblcontrolledsubstance').find("#qty_" + id).css('border', '');
                if ($(this).is(':checked')) {
                    var LicesenStatus = $('#tblcontrolledsubstance').find("#LicesenStatus_" + id).val();
                    var PermitRequired = $('#tblcontrolledsubstance').find("#PermitRequired_" + id).val();
                    var ImportPermit = $('#tblcontrolledsubstance').find("#ImportPermit_" + id).val();
                    var Declaration = $('#tblcontrolledsubstance').find("#Declaration_" + id).val();
                    var ExportPermitReceivedDate = $('#tblcontrolledsubstance').find("#ExportPermitReceivedDate_" + id).val();
                    var ApplicationDate = $('#tblcontrolledsubstance').find("#ApplicationDate_" + id).val();
                    var TechnicalWriteup = $('#tblcontrolledsubstance').find("#TechnicalWriteup_" + id).val();
                    var QuaterlyDataToSubmit = $('#tblcontrolledsubstance').find("#QuaterlyDataToSubmit_" + id).val();
                    var QuaterlyDataSubmited = $('#tblcontrolledsubstance').find("#QuaterlyDataSubmited_" + id).val();
                    //var JourneyComment = $('#tblcontrolledsubstance').find("#JourneyComment_" + id).val();
                    var APIRequired = $('#tblcontrolledsubstance').find("#APIRequired_" + id).val();
                    var APIImpExport = $('#tblcontrolledsubstance').find("#APIImpExport_" + id).val();
                    var Category = $('#tblcontrolledsubstance').find("#Category_" + id).val();
                    var NextQuater = $('#tblcontrolledsubstance').find("#NextQuater_" + id).val();
                    var ImpExpo = $('#tblcontrolledsubstance').find("#impexpo_" + id).val();
                    $.ajax({
                        url: '/Form/UpdateControlledSubstanceData',
                        data: {
                            id: id,
                            tabname: 'controlledsubstance',
                            LicesenStatus: LicesenStatus,
                            PermitRequired: PermitRequired,
                            ImportPermit: ImportPermit,
                            Declaration: Declaration,
                            ExportPermitReceivedDate: ExportPermitReceivedDate,
                            TechnicalWriteup: TechnicalWriteup,
                            QuaterlyDataToSubmit: QuaterlyDataToSubmit,
                            QuaterlyDataSubmited: QuaterlyDataSubmited,
                            //JourneyComment: JourneyComment,
                            APIRequired: APIRequired,
                            APIImpExport: APIImpExport,
                            ApplicationDate: ApplicationDate,
                            Category: Category,
                            NextQuater: NextQuater,
                            ImpExpo: ImpExpo
                        },
                        type: 'POST',
                        success: function (data) {
                        },
                        complete: function (data) {
                            successAlert(count, ids.length);
                            count += 1;
                        }
                    });
                }
            });

        }
        else if (menulink === 'glp') {

            var count = 1;
            $('#tblglp').find('.clsSaverow').each(function () {
                var id = $(this).val();
                $('#tblglp').find("#qty_" + id).css('border', '');
                if ($(this).is(':checked')) {
                    var scId = $('#tblglp').find("#ScientistId_" + id).val();
                    var scientistStatus = $('#tblglp').find("#scientistStatus_" + id).val();
                    var projectType = $('#tblglp').find("#projecttype_" + id).val();
                    var qty = $('#tblglp').find("#qty_" + id).val();
                    var batchno = $('#tblglp').find("#batchno_" + id).val();
                    var additionalBatch = $('#tblglp').find("#additionalBatch_" + id).val();
                    var remark = $('#tblglp').find("#remark_" + id).val();
                    var sciremark = $('#tblglp').find("#sciremark_" + id).val();
                    var estDate = $('#tblglp').find("#esticompleteDate_" + id).val();
                    var orderremark = $('#tblglp').find("#orderremark_" + id).val();
                    var reason = $('#tblglp').find("#reason_" + id).val();
                    var difflevel = $('#tblglp').find("#difflevel_" + id).val();
                    var activity = $('#tblglp').find("#activitystatus_" + id).val();
                    var prostatus = $('#tblglp').find("#prostatus_" + id).val();
                    var explainationsecond = $('#tblglp').find("#explainationsecond_" + id).val();
                    var subScientistId = $('#tblglp').find("#SubScientistId_" + id).val();
                    var CoaId = $('#tblglp').find("#coa_" + id).val();

                    var analysisCompletionDate = $('#tblglp').find("#analysisCompletionDate_" + id).val();
                    //if (qty === "" || qty == "0" || qty == "") {
                    //    $('#tblglp').find("#qty_" + id).css('border', '1px solid red');
                    //    return false;
                    //}

                    var IsGLP = $('#tblglp').find("#IsGLP_" + id).val();
                    var GLPStatus = $('#tblglp').find("#GLPStatus_" + id).val();

                    $.ajax({
                        url: '/Form/UpdateProjectInfo',
                        data: {
                            scId: scId,
                            projectType: projectType,
                            qty: qty,
                            id: id,
                            batchno: batchno,
                            remark: remark,
                            additionalBatch: additionalBatch,
                            scientistStatus: scientistStatus,
                            sciremark: sciremark,
                            estDate: estDate,
                            orderremark: orderremark,
                            reason: reason,
                            tabname: 'glp',
                            difflevel: difflevel,
                            activity: activity,
                            prostatus: prostatus,
                            explainationsecond: explainationsecond,
                            subScientistId: subScientistId,
                            CoaId: CoaId,
                            IsGLP: IsGLP,
                            GLPStatus: GLPStatus,
                            analysisCompletionDate: analysisCompletionDate
                        },
                        type: 'POST',
                        success: function (data) {
                        },
                        complete: function (data) {
                            successAlert(count, ids.length);
                            count += 1;
                        }
                    });
                }
            });

        }
        else if (menulink === "watchlist"){

            $('#tblwatchList').find('.clsSaverow').each(function () {
                var divid = $(this).val();
                $('#tblwatchList').find("#qty_" + divid).css('border', '');
                if ($(this).is(':checked')) {
                    var qty = $('#tblwatchList').find("#qty_" + divid).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblwatchList').find("#qty_" + divid).css('border', '1px solid red');
                        qtyerror += 1;
                    }
                    ids.push($(this).val());
                }
            });

            if (ids.length === 0) {
                toastr.error("Please select atleast one Product");
                return false;
            }
            if (qtyerror !== 0) {
                toastr.error("Please add qty.");
                return false;
            }
            var count = 1;
            $('#tblwatchList').find('.clsSaverow').each(function () {
                var id = $(this).val();
                $('#tblwatchList').find("#qty_" + id).css('border', '');
                if ($(this).is(':checked')) {
                    var scId = $('#tblwatchList').find("#ScientistId_" + id).val();
                    var scientistStatus = $('#tblwatchList').find("#scientistStatus_" + id).val();
                    var projectType = $('#tblwatchList').find("#projecttype_" + id).val();
                    var qty = $('#tblwatchList').find("#qty_" + id).val();
                    var batchno = $('#tblwatchList').find("#batchno_" + id).val();
                    var additionalBatch = $('#tblwatchList').find("#additionalBatch_" + id).val();
                    var remark = $('#tblwatchList').find("#remark_" + id).val();
                    var sciremark = $('#tblwatchList').find("#sciremark_" + id).val();
                    var estDate = $('#tblwatchList').find("#esticompleteDate_" + id).val();
                    var orderremark = $('#tblwatchList').find("#orderremark_" + id).val();
                    var reason = $('#tblwatchList').find("#reason_" + id).val();
                    var difflevel = $('#tblwatchList').find("#difflevel_" + id).val();
                    var activity = $('#tblwatchList').find("#activitystatus_" + id).val();
                    var prostatus = $('#tblwatchList').find("#prostatus_" + id).val();
                    var explainationsecond = $('#tblwatchList').find("#explainationsecond_" + id).val();
                    var subScientistId = $('#tblwatchList').find("#SubScientistId_" + id).val();
                    var CoaId = $('#tblwatchList').find("#coa_" + id).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblwatchList').find("#qty_" + id).css('border', '1px solid red');
                        return false;
                    }

                    var IsGLP = $('#tblwatchList').find("#IsGLP_" + id).val();
                    var GLPStatus = $('#tblwatchList').find("#GLPStatus_" + id).val();

                    $.ajax({
                        url: '/Form/UpdateProjectInfo',
                        data: {
                            scId: scId,
                            projectType: projectType,
                            qty: qty,
                            id: id,
                            batchno: batchno,
                            remark: remark,
                            additionalBatch: additionalBatch,
                            scientistStatus: scientistStatus,
                            sciremark: sciremark,
                            estDate: estDate,
                            orderremark: orderremark,
                            reason: reason,
                            tabname: 'all',
                            difflevel: difflevel,
                            activity: activity,
                            prostatus: prostatus,
                            explainationsecond: explainationsecond,
                            subScientistId: subScientistId,
                            CoaId: CoaId,
                            IsGLP: IsGLP,
                            GLPStatus: GLPStatus
                        },
                        type: 'POST',
                        success: function (data) {
                        },
                        complete: function (data) {
                            successAlert(count, ids.length);
                            count += 1;
                        }
                    });
                }
            });

        } 
        else if (menulink === "inhouse") {

            $('#exampleinhouse').find('.clsSaverow').each(function () {
                var divid = $(this).val();
                $('#exampleinhouse').find("#qty_" + divid).css('border', '');
                if ($(this).is(':checked')) {
                    var qty = $('#exampleinhouse').find("#qty_" + divid).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#exampleinhouse').find("#qty_" + divid).css('border', '1px solid red');
                        qtyerror += 1;
                    }
                    ids.push($(this).val());
                }
            });

            if (ids.length === 0) {
                toastr.error("Please select atleast one Product");
                return false;
            }
            if (qtyerror !== 0) {
                toastr.error("Please add qty.");
                return false;
            }
            var count = 1;
            $('#exampleinhouse').find('.clsSaverow').each(function () {
                var id = $(this).val();
                $('#exampleinhouse').find("#qty_" + id).css('border', '');
                if ($(this).is(':checked')) {
                    var scId = $('#exampleinhouse').find("#ScientistId_" + id).val();
                    var scientistStatus = $('#exampleinhouse').find("#scientistStatus_" + id).val();
                    var projectType = $('#exampleinhouse').find("#projecttype_" + id).val();
                    var qty = $('#exampleinhouse').find("#qty_" + id).val();
                    var batchno = $('#exampleinhouse').find("#batchno_" + id).val();
                    var additionalBatch = $('#exampleinhouse').find("#additionalBatch_" + id).val();
                    var remark = $('#exampleinhouse').find("#remark_" + id).val();
                    var sciremark = $('#exampleinhouse').find("#sciremark_" + id).val();
                    var estDate = $('#exampleinhouse').find("#esticompleteDate_" + id).val();
                    var orderremark = $('#exampleinhouse').find("#orderremark_" + id).val();
                    var reason = $('#exampleinhouse').find("#reason_" + id).val();
                    var difflevel = $('#exampleinhouse').find("#difflevel_" + id).val();
                    var activity = $('#exampleinhouse').find("#activitystatus_" + id).val();
                    var prostatus = $('#exampleinhouse').find("#prostatus_" + id).val();
                    var explainationsecond = $('#exampleinhouse').find("#explainationsecond_" + id).val();
                    var subScientistId = $('#exampleinhouse').find("#SubScientistId_" + id).val();
                    var CoaId = $('#exampleinhouse').find("#coa_" + id).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#exampleinhouse').find("#qty_" + id).css('border', '1px solid red');
                        return false;
                    }

                    var IsGLP = $('#exampleinhouse').find("#IsGLP_" + id).val();
                    var GLPStatus = $('#exampleinhouse').find("#GLPStatus_" + id).val();

                    $.ajax({
                        url: '/Form/UpdateProjectInfo',
                        data: {
                            scId: scId,
                            projectType: projectType,
                            qty: qty,
                            id: id,
                            batchno: batchno,
                            remark: remark,
                            additionalBatch: additionalBatch,
                            scientistStatus: scientistStatus,
                            sciremark: sciremark,
                            estDate: estDate,
                            orderremark: orderremark,
                            reason: reason,
                            tabname: 'all',
                            difflevel: difflevel,
                            activity: activity,
                            prostatus: prostatus,
                            explainationsecond: explainationsecond,
                            subScientistId: subScientistId,
                            CoaId: CoaId,
                            IsGLP: IsGLP,
                            GLPStatus: GLPStatus
                        },
                        type: 'POST',
                        success: function (data) {
                        },
                        complete: function (data) {
                            successAlert(count, ids.length);
                            count += 1;
                        }
                    });
                }
            });

        } 
        else {

            $('#example1').find('.clsSaverow').each(function () {
                var divid = $(this).val();
                $('#example1').find("#qty_" + divid).css('border', '');
                if ($(this).is(':checked')) {
                    var qty = $('#example1').find("#qty_" + divid).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#example1').find("#qty_" + divid).css('border', '1px solid red');
                        qtyerror += 1;
                    }
                    ids.push($(this).val());
                }
            });

            if (ids.length === 0) {
                toastr.error("Please select atleast one Product");
                return false;
            }
            if (qtyerror !== 0) {
                toastr.error("Please add qty.");
                return false;
            }
            var count = 1;
            $('#example1').find('.clsSaverow').each(function () {
                var id = $(this).val();
                $('#example1').find("#qty_" + id).css('border', '');
                if ($(this).is(':checked')) {
                    var scId = $('#example1').find("#ScientistId_" + id).val();
                    var scientistStatus = $('#example1').find("#scientistStatus_" + id).val();
                    var projectType = $('#example1').find("#projecttype_" + id).val();
                    var qty = $('#example1').find("#qty_" + id).val();
                    var batchno = $('#example1').find("#batchno_" + id).val();
                    var additionalBatch = $('#example1').find("#additionalBatch_" + id).val();
                    var remark = $('#example1').find("#remark_" + id).val();
                    var sciremark = $('#example1').find("#sciremark_" + id).val();
                    var estDate = $('#example1').find("#esticompleteDate_" + id).val();
                    var orderremark = $('#example1').find("#orderremark_" + id).val();
                    var reason = $('#example1').find("#reason_" + id).val();
                    var difflevel = $('#example1').find("#difflevel_" + id).val();
                    var activity = $('#example1').find("#activitystatus_" + id).val();
                    var prostatus = $('#example1').find("#prostatus_" + id).val();
                    var explainationsecond = $('#example1').find("#explainationsecond_" + id).val();
                    var subScientistId = $('#example1').find("#SubScientistId_" + id).val();
                    var CoaId = $('#example1').find("#coa_" + id).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#example1').find("#qty_" + id).css('border', '1px solid red');
                        return false;
                    }

                    var IsGLP = $('#example1').find("#IsGLP_" + id).val();
                    var GLPStatus = $('#example1').find("#GLPStatus_" + id).val();

                    $.ajax({
                        url: '/Form/UpdateProjectInfo',
                        data: {
                            scId: scId,
                            projectType: projectType,
                            qty: qty,
                            id: id,
                            batchno: batchno,
                            remark: remark,
                            additionalBatch: additionalBatch,
                            scientistStatus: scientistStatus,
                            sciremark: sciremark,
                            estDate: estDate,
                            orderremark: orderremark,
                            reason: reason,
                            tabname: 'all',
                            difflevel: difflevel,
                            activity: activity,
                            prostatus: prostatus,
                            explainationsecond: explainationsecond,
                            subScientistId: subScientistId,
                            CoaId: CoaId,
                            IsGLP: IsGLP,
                            GLPStatus: GLPStatus
                        },
                        type: 'POST',
                        success: function (data) {
                        },
                        complete: function (data) {
                            successAlert(count, ids.length);
                            count += 1;
                        }
                    });
                }
            });

        }
    }



    function HoldAll() {
        var ids = [];
        var qtyerror = 0;
        var menulink = '';
        $('.nav').find('li').each(function () {
            if ($(this).hasClass('active')) {
                menulink = $(this).find('a').attr('data-tabname');
            }
        })

        if (menulink !== 'all') {
            toastr.error('This feature is only available in All tab.');
            return false;
        }

        if (menulink === 'noaction') {
            $('#tblnoaction').find('.clsSaverow').each(function () {
                var divid = $(this).val();
                $('#tblnoaction').find("#qty_" + divid).css('border', '');
                if ($(this).is(':checked')) {
                    var qty = $('#tblnoaction').find("#qty_" + divid).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblnoaction').find("#qty_" + divid).css('border', '1px solid red');
                        qtyerror += 1;
                    }
                    ids.push($(this).val());
                }
            });

            if (ids.length === 0) {
                toastr.error("Please select atleast one Product");
                return false;
            }
            if (qtyerror !== 0) {
                toastr.error("Please add qty.");
                return false;
            }
            var count = 1;
            $('#tblnoaction').find('.clsSaverow').each(function () {
                var id = $(this).val();
                $('#tblnoaction').find("#qty_" + id).css('border', '');
                if ($(this).is(':checked')) {
                    var scId = $('#tblnoaction').find("#ScientistId_" + id).val();
                    var scientistStatus = $('#tblnoaction').find("#scientistStatus_" + id).val();
                    var projectType = $('#tblnoaction').find("#projecttype_" + id).val();
                    var qty = $('#tblnoaction').find("#qty_" + id).val();
                    var batchno = $('#tblnoaction').find("#batchno_" + id).val();
                    var additionalBatch = $('#tblnoaction').find("#additionalBatch_" + id).val();
                    var remark = $('#tblnoaction').find("#remark_" + id).val();
                    var sciremark = $('#tblnoaction').find("#sciremark_" + id).val();
                    var estDate = $('#tblnoaction').find("#esticompleteDate_" + id).val();
                    var difflevel = $('#tblnoaction').find("#difflevel_" + id).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblnoaction').find("#qty_" + id).css('border', '1px solid red');
                        return false;
                    }
                    $.ajax({
                        url: '/Form/UpdateProjectInfo',
                        data: {
                            scId: scId,
                            projectType: projectType,
                            qty: qty,
                            id: id,
                            batchno: batchno,
                            remark: remark,
                            additionalBatch: additionalBatch,
                            scientistStatus: scientistStatus,
                            sciremark: sciremark,
                            estDate: estDate,
                            tabname: 'noaction',
                            difflevel: difflevel
                        },
                        type: 'POST',
                        success: function (data) {
                        },
                        complete: function (data) {
                            successAlert(count, ids.length);
                            count += 1;
                        }
                    });
                }
            });
        }
        else if (menulink === 'domestic') {

            $('#tbldomestic').find('.clsSaverow').each(function () {
                var divid = $(this).val();
                $('#tbldomestic').find("#qty_" + divid).css('border', '');
                if ($(this).is(':checked')) {
                    var qty = $('#tbldomestic').find("#qty_" + divid).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tbldomestic').find("#qty_" + divid).css('border', '1px solid red');
                        qtyerror += 1;
                    }
                    ids.push($(this).val());
                }
            });

            if (ids.length === 0) {
                toastr.error("Please select atleast one Product");
                return false;
            }
            if (qtyerror !== 0) {
                toastr.error("Please add qty.");
                return false;
            }
            var count = 1;
            $('#tbldomestic').find('.clsSaverow').each(function () {
                var id = $(this).val();
                $('#tbldomestic').find("#qty_" + id).css('border', '');
                if ($(this).is(':checked')) {
                    var scId = $('#tbldomestic').find("#ScientistId_" + id).val();
                    var scientistStatus = $('#tbldomestic').find("#scientistStatus_" + id).val();
                    var projectType = $('#tbldomestic').find("#projecttype_" + id).val();
                    var qty = $('#tbldomestic').find("#qty_" + id).val();
                    var batchno = $('#tbldomestic').find("#batchno_" + id).val();
                    var additionalBatch = $('#tbldomestic').find("#additionalBatch_" + id).val();
                    var remark = $('#tbldomestic').find("#remark_" + id).val();
                    var sciremark = $('#tbldomestic').find("#sciremark_" + id).val();
                    var estDate = $('#tbldomestic').find("#esticompleteDate_" + id).val();
                    var orderremark = $('#tbldomestic').find("#orderremark_" + id).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tbldomestic').find("#qty_" + id).css('border', '1px solid red');
                        return false;
                    }
                    $.ajax({
                        url: '/Form/UpdateProjectInfo',
                        data: {
                            scId: scId,
                            projectType: projectType,
                            qty: qty,
                            id: id,
                            batchno: batchno,
                            remark: remark,
                            additionalBatch: additionalBatch,
                            scientistStatus: scientistStatus,
                            sciremark: sciremark,
                            estDate: estDate,
                            orderremark: orderremark,
                            tabname: 'domestic',
                        },
                        type: 'POST',
                        success: function (data) {
                        },
                        complete: function (data) {
                            successAlert(count, ids.length);
                            count += 1;
                        }
                    });
                }
            });
        }
        else if (menulink === 'synthesis') {
            $('#tblsynthesis').find('.clsSaverow').each(function () {
                var divid = $(this).val();
                $('#tblsynthesis').find("#qty_" + divid).css('border', '');
                if ($(this).is(':checked')) {
                    var qty = $('#tblsynthesis').find("#qty_" + divid).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblsynthesis').find("#qty_" + divid).css('border', '1px solid red');
                        qtyerror += 1;
                    }
                    ids.push($(this).val());
                }
            });

            if (ids.length === 0) {
                toastr.error("Please select atleast one Product");
                return false;
            }
            if (qtyerror !== 0) {
                toastr.error("Please add qty.");
                return false;
            }
            var count = 1;
            $('#tblsynthesis').find('.clsSaverow').each(function () {
                var id = $(this).val();
                $('#tblsynthesis').find("#qty_" + id).css('border', '');
                if ($(this).is(':checked')) {
                    var scId = $('#tblsynthesis').find("#ScientistId_" + id).val();
                    var scientistStatus = $('#tblsynthesis').find("#scientistStatus_" + id).val();
                    var projectType = $('#tblsynthesis').find("#projecttype_" + id).val();
                    var qty = $('#tblsynthesis').find("#qty_" + id).val();
                    var batchno = $('#tblsynthesis').find("#batchno_" + id).val();
                    var additionalBatch = $('#tblsynthesis').find("#additionalBatch_" + id).val();
                    var remark = $('#tblsynthesis').find("#remark_" + id).val();
                    var sciremark = $('#tblsynthesis').find("#sciremark_" + id).val();
                    var estDate = $('#tblsynthesis').find("#esticompleteDate_" + id).val();
                    var orderremark = $('#tblsynthesis').find("#orderremark_" + id).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblsynthesis').find("#qty_" + id).css('border', '1px solid red');
                        return false;
                    }
                    $.ajax({
                        url: '/Form/UpdateProjectInfo',
                        data: {
                            scId: scId,
                            projectType: projectType,
                            qty: qty,
                            id: id,
                            batchno: batchno,
                            remark: remark,
                            additionalBatch: additionalBatch,
                            scientistStatus: scientistStatus,
                            sciremark: sciremark,
                            estDate: estDate,
                            orderremark: orderremark,
                            tabname: 'synthesis',
                        },
                        type: 'POST',
                        success: function (data) {
                        },
                        complete: function (data) {
                            successAlert(count, ids.length);
                            count += 1;
                        }
                    });
                }
            });
        }
        else if (menulink === 'purchase') {
            $('#tblpurchase').find('.clsSaverow').each(function () {
                var divid = $(this).val();
                $('#tblpurchase').find("#qty_" + divid).css('border', '');
                if ($(this).is(':checked')) {
                    var qty = $('#tblpurchase').find("#qty_" + divid).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblpurchase').find("#qty_" + divid).css('border', '1px solid red');
                        qtyerror += 1;
                    }
                    ids.push($(this).val());
                }
            });

            if (ids.length === 0) {
                toastr.error("Please select atleast one Product");
                return false;
            }
            if (qtyerror !== 0) {
                toastr.error("Please add qty.");
                return false;
            }
            var count = 1;
            $('#tblpurchase').find('.clsSaverow').each(function () {
                var id = $(this).val();
                $('#tblpurchase').find("#qty_" + id).css('border', '');
                if ($(this).is(':checked')) {
                    var scId = $('#tblpurchase').find("#ScientistId_" + id).val();
                    var scientistStatus = $('#tblpurchase').find("#scientistStatus_" + id).val();
                    var projectType = $('#tblpurchase').find("#projecttype_" + id).val();
                    var qty = $('#tblpurchase').find("#qty_" + id).val();
                    var batchno = $('#tblpurchase').find("#batchno_" + id).val();
                    var additionalBatch = $('#tblpurchase').find("#additionalBatch_" + id).val();
                    var remark = $('#tblpurchase').find("#remark_" + id).val();
                    var sciremark = $('#tblpurchase').find("#sciremark_" + id).val();
                    var purchaseStatus = $('#tblpurchase').find("#purchasestatus_" + id).val();
                    var estDate = $('#tblpurchase').find("#esticompleteDate_" + id).val();
                    var reason = $('#tblpurchase').find("#reason_" + id).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblpurchase').find("#qty_" + id).css('border', '1px solid red');
                        return false;
                    }
                    $.ajax({
                        url: '/Form/UpdateProjectInfo',
                        data: {
                            scId: scId,
                            projectType: projectType,
                            qty: qty,
                            id: id,
                            batchno: batchno,
                            remark: remark,
                            additionalBatch: additionalBatch,
                            scientistStatus: scientistStatus,
                            sciremark: sciremark,
                            purchaseStatus: purchaseStatus,
                            tabname: 'purchase',
                            estDate: estDate,
                            reason: reason
                        },
                        type: 'POST',
                        success: function (data) {
                        },
                        complete: function (data) {
                            successAlert(count, ids.length);
                            count += 1;
                        }
                    });
                }
            });
        }
        else if (menulink === 'instock') {
            $('#tblinstock').find('.clsSaverow').each(function () {
                var divid = $(this).val();
                $('#tblinstock').find("#qty_" + divid).css('border', '');
                if ($(this).is(':checked')) {
                    var qty = $('#tblinstock').find("#qty_" + divid).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblinstock').find("#qty_" + divid).css('border', '1px solid red');
                        qtyerror += 1;
                    }
                    ids.push($(this).val());
                }
            });

            if (ids.length === 0) {
                toastr.error("Please select atleast one Product");
                return false;
            }
            if (qtyerror !== 0) {
                toastr.error("Please add qty.");
                return false;
            }
            var count = 1;
            $('#tblinstock').find('.clsSaverow').each(function () {
                var id = $(this).val();
                $('#tblinstock').find("#qty_" + id).css('border', '');
                if ($(this).is(':checked')) {
                    var scId = $('#tblinstock').find("#ScientistId_" + id).val();
                    var scientistStatus = $('#tblinstock').find("#scientistStatus_" + id).val();
                    var projectType = $('#tblinstock').find("#projecttype_" + id).val();
                    var qty = $('#tblinstock').find("#qty_" + id).val();
                    var batchno = $('#tblinstock').find("#batchno_" + id).val();
                    var additionalBatch = $('#tblinstock').find("#additionalBatch_" + id).val();
                    var remark = $('#tblinstock').find("#remark_" + id).val();
                    var sciremark = $('#tblinstock').find("#sciremark_" + id).val();
                    var estDate = $('#tblinstock').find("#esticompleteDate_" + id).val();
                    var reason = $('#tblinstock').find("#reason_" + id).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblinstock').find("#qty_" + id).css('border', '1px solid red');
                        return false;
                    }
                    $.ajax({
                        url: '/Form/UpdateProjectInfo',
                        data: {
                            scId: scId,
                            projectType: projectType,
                            qty: qty,
                            id: id,
                            batchno: batchno,
                            remark: remark,
                            additionalBatch: additionalBatch,
                            scientistStatus: scientistStatus,
                            sciremark: sciremark,
                            estDate: estDate,
                            reason: reason
                        },
                        type: 'POST',
                        success: function (data) {
                        },
                        complete: function (data) {
                            successAlert(count, ids.length);
                            count += 1;
                        }
                    });
                }
            });
        }
        else if (menulink === 'inhouse') {
            $('#exampleinhouse').find('.clsSaverow').each(function () {
                var divid = $(this).val();
                $('#exampleinhouse').find("#qty_" + divid).css('border', '');
                if ($(this).is(':checked')) {
                    var qty = $('#exampleinhouse').find("#qty_" + divid).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#exampleinhouse').find("#qty_" + divid).css('border', '1px solid red');
                        qtyerror += 1;
                    }
                    ids.push($(this).val());
                }
            });

            if (ids.length === 0) {
                toastr.error("Please select atleast one Product");
                return false;
            }
            if (qtyerror !== 0) {
                toastr.error("Please add qty.");
                return false;
            }
            var count = 1;
            $('#exampleinhouse').find('.clsSaverow').each(function () {
                var id = $(this).val();
                $('#exampleinhouse').find("#qty_" + id).css('border', '');
                if ($(this).is(':checked')) {
                    var scId = $('#exampleinhouse').find("#ScientistId_" + id).val();
                    var scientistStatus = $('#exampleinhouse').find("#scientistStatus_" + id).val();
                    var projectType = $('#exampleinhouse').find("#projecttype_" + id).val();
                    var qty = $('#exampleinhouse').find("#qty_" + id).val();
                    var batchno = $('#exampleinhouse').find("#batchno_" + id).val();
                    var additionalBatch = $('#exampleinhouse').find("#additionalBatch_" + id).val();
                    var remark = $('#exampleinhouse').find("#remark_" + id).val();
                    var sciremark = $('#exampleinhouse').find("#sciremark_" + id).val();
                    var estDate = $('#exampleinhouse').find("#esticompleteDate_" + id).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#exampleinhouse').find("#qty_" + id).css('border', '1px solid red');
                        return false;
                    }
                    $.ajax({
                        url: '/Form/UpdateProjectInfo',
                        data: {
                            scId: scId,
                            projectType: projectType,
                            qty: qty,
                            id: id,
                            batchno: batchno,
                            remark: remark,
                            additionalBatch: additionalBatch,
                            scientistStatus: scientistStatus,
                            sciremark: sciremark,
                            estDate: estDate
                        },
                        type: 'POST',
                        success: function (data) {
                        },
                        complete: function (data) {
                            successAlert(count, ids.length);
                            count += 1;
                        }
                    });
                }
            });
        }
        else if (menulink === 'export') {
            $('#tblexport').find('.clsSaverow').each(function () {
                var divid = $(this).val();
                $('#tblexport').find("#qty_" + divid).css('border', '');
                if ($(this).is(':checked')) {
                    var qty = $('#tblexport').find("#qty_" + divid).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblexport').find("#qty_" + divid).css('border', '1px solid red');
                        qtyerror += 1;
                    }
                    ids.push($(this).val());
                }
            });

            if (ids.length === 0) {
                toastr.error("Please select atleast one Product");
                return false;
            }
            if (qtyerror !== 0) {
                toastr.error("Please add qty.");
                return false;
            }
            var count = 1;
            $('#tblexport').find('.clsSaverow').each(function () {
                var id = $(this).val();
                $('#tblexport').find("#qty_" + id).css('border', '');
                if ($(this).is(':checked')) {
                    var scId = $('#tblexport').find("#ScientistId_" + id).val();
                    var scientistStatus = $('#tblexport').find("#scientistStatus_" + id).val();
                    var projectType = $('#tblexport').find("#projecttype_" + id).val();
                    var qty = $('#tblexport').find("#qty_" + id).val();
                    var batchno = $('#tblexport').find("#batchno_" + id).val();
                    var additionalBatch = $('#tblexport').find("#additionalBatch_" + id).val();
                    var remark = $('#tblexport').find("#remark_" + id).val();
                    var sciremark = $('#tblexport').find("#sciremark_" + id).val();
                    var estDate = $('#tblexport').find("#esticompleteDate_" + id).val();
                    var invoiceDate = $('#tblexport').find("#reportinvoiceDate_" + id).val();
                    var orderremark = $('#tblexport').find("#orderremark_" + id).val();
                    var reason = $('#tblexport').find("#reason_" + id).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#tblexport').find("#qty_" + id).css('border', '1px solid red');
                        return false;
                    }
                    $.ajax({
                        url: '/Form/UpdateProjectInfo',
                        data: {
                            scId: scId,
                            projectType: projectType,
                            qty: qty,
                            id: id,
                            batchno: batchno,
                            remark: remark,
                            additionalBatch: additionalBatch,
                            scientistStatus: scientistStatus,
                            sciremark: sciremark,
                            estDate: estDate,
                            reportinvoiceDate: invoiceDate,
                            orderremark: orderremark,
                            reason: reason,
                            tabname: "export"
                        },
                        type: 'POST',
                        success: function (data) {
                        },
                        complete: function (data) {
                            successAlert(count, ids.length);
                            count += 1;
                        }
                    });
                }
            });

        }
        else {

            var errorcnt = 0;
            $('#example1').find('.clsSaverow').each(function () {
                var divid = $(this).val();
                $('#example1').find("#qty_" + divid).css('border', '');
                $('#example1').find("#prostatus_" + divid).css('border', '');
                if ($(this).is(':checked')) {
                    var qty = $('#example1').find("#qty_" + divid).val();
                    if (qty === "" || qty == "0" || qty.trim() == "") {
                        $('#example1').find("#qty_" + divid).css('border', '1px solid red');
                        qtyerror += 1;
                    }

                    var prostat = $('#example1').find("#prostatus_" + divid).val();
                    if (prostat !== "46") {
                        $('#example1').find("#prostatus_" + divid).css('border', '1px solid red');
                        qtyerror += 1;
                    }
                    ids.push($(this).val());
                }
            });

            if (qtyerror > 0) {
                toastr.error("Status should be 'HOLD/CANCELLED'.");
                return false;
            }

            if (ids.length === 0) {
                toastr.error("Please select atleast one Product");
                return false;
            }

            var count = 1;
            $('#example1').find('.clsSaverow').each(function () {
                var id = $(this).val();
                $('#example1').find("#qty_" + id).css('border', '');
                if ($(this).is(':checked')) {
                    $.ajax({
                        url: '/Form/SetProjectOnHold?id=' + id,
                        data: {},
                        type: 'POST',
                        success: function (data) {

                        },
                        complete: function (data) {
                            successAlert(count, ids.length);
                            count += 1;
                        }
                    });
                }
            });

        }
    }

    function successPurchaseRFQAlert(count, forloopcount) {
        if (count === forloopcount) {
            toastr.success('You have updated purchase rfq information.');
        }
    }

    function successAlert(count, forloopcount) {
        if (count === forloopcount) {
            toastr.success('You have updated product information.');

            var menulink = '';
            $('.nav').find('li').each(function () {
                if ($(this).hasClass('active')) {
                    menulink = $(this).find('a').attr('data-tabname');
                }
            });

            var tablename = '';
            if (menulink === "noaction") {
                tablename = 'tblnoaction';
            }
            else if (menulink === "domestic") {
                tablename = 'tbldomestic';
            }
            else if (menulink === "synthesis") {
                tablename = 'tblsynthesis';
            }
            else if (menulink === "purchase") {
                tablename = 'tblpurchase';
            }
            else if (menulink === "instock") {
                tablename = 'tblinstock';
            } else if (menulink === "inhouse") {
                tablename = 'exampleinhouse';
            }
            else if (menulink === "export") {
                tablename = 'tblexport';
            }
            else if (menulink === "controlledsubstance") {
                tablename = 'tblcontrolledsubstance';
            }
            else {
                tablename = 'example1';
            }
            $('#' + tablename).DataTable().ajax.reload(null, false);

            //setTimeout(function () {
            //    window.location.reload(true);
            //}, 2000);
        }
    }

    function SaveNoActionProjectDetails(id) {
        $('#tblnoaction').find("#qty_" + id).css('border', '');
        var scId = $('#tblnoaction').find("#ScientistId_" + id).val();
        var scientistStatus = $('#tblnoaction').find("#scientistStatus_" + id).val();
        var projectType = $('#tblnoaction').find("#projecttype_" + id).val();
        var qty = $('#tblnoaction').find("#qty_" + id).val();
        var batchno = $('#tblnoaction').find("#batchno_" + id).val();
        var additionalBatch = $('#tblnoaction').find("#additionalBatch_" + id).val();
        var remark = $('#tblnoaction').find("#remark_" + id).val();
        var difflevel = $('#tblnoaction').find("#difflevel_" + id).val();
        var reason = $('#tblnoaction').find("#reason_" + id).val();
        if (qty === "" || qty == "0" || qty.trim() == "") {
            $('#tblnoaction').find("#qty_" + id).css('border', '1px solid red');
            return false;
        }
        $.ajax({
            url: '/Form/UpdateProjectInfo',
            data: {
                scId: scId,
                projectType: projectType,
                id: id,
                qty: qty,
                batchno: batchno,
                remark: remark,
                additionalBatch: additionalBatch,
                scientistStatus: scientistStatus,
                difflevel: difflevel,
                reason: reason,
                tabname: 'noaction',
            },
            type: 'POST',
            success: function (data) {

                toastr.success("You have updated product information.");
                window.location.reload(true);
            }
        });
    }

    function SaveSynthesisProjectDetails(id) {
        $('#tblsynthesis').find("#qty_" + id).css('border', '');
        var scId = $('#tblsynthesis').find("#ScientistId_" + id).val();
        var scientistStatus = $('#tblsynthesis').find("#scientistStatus_" + id).val();
        var projectType = $('#tblsynthesis').find("#projecttype_" + id).val();
        var qty = $('#tblsynthesis').find("#qty_" + id).val();
        var batchno = $('#tblsynthesis').find("#batchno_" + id).val();
        var additionalBatch = $('#tblsynthesis').find("#additionalBatch_" + id).val();
        var remark = $('#tblsynthesis').find("#remark_" + id).val();
        var orderremark = $('#tblsynthesis').find("#orderremark_" + id).val();
        var reason = $('#tblsynthesis').find("#reason_" + id).val();
        var prostatus = $('#tblsynthesis').find("#prostatus_" + id).val();
        if (qty === "" || qty == "0" || qty.trim() == "") {
            $('#tblsynthesis').find("#qty_" + id).css('border', '1px solid red');
            return false;
        }
        $.ajax({
            url: '/Form/UpdateProjectInfo',
            data: {
                scId: scId,
                projectType: projectType,
                id: id,
                qty: qty,
                batchno: batchno,
                remark: remark,
                additionalBatch: additionalBatch,
                scientistStatus: scientistStatus,
                orderremark: orderremark,
                reason: reason,
                tabname: "synthesis",
                prostatus: prostatus
            },
            type: 'POST',
            success: function (data) {
                toastr.success("You have updated product information.");
                window.location.reload(true);
            }
        });
    }

    function SaveProjectDetails(id) {
        $("#qty_" + id).css('border', '');
        var scId = $("#ScientistId_" + id).val();
        var scientistStatus = $("#scientistStatus_" + id).val();
        var projectType = $("#projecttype_" + id).val();
        var qty = $("#qty_" + id).val();
        var batchno = $("#batchno_" + id).val();
        var additionalBatch = $("#additionalBatch_" + id).val();
        var remark = $("#remark_" + id).val();
        var sciremark = $("#sciremark_" + id).val();
        var orderremark = $("#orderremark_" + id).val();
        var reason = $("#reason_" + id).val();
        var difflevel = $("#difflevel_" + id).val();
        if (qty === "" || qty == "0" || qty.trim() == "") {
            $("#qty_" + id).css('border', '1px solid red');
            return false;
        }
        $.ajax({
            url: '/Form/UpdateProjectInfo',
            data: {
                scId: scId,
                projectType: projectType,
                id: id,
                qty: qty,
                batchno: batchno,
                remark: remark,
                additionalBatch: additionalBatch,
                scientistStatus: scientistStatus,
                sciremark: sciremark,
                orderremark: orderremark,
                tabname: 'all',
                reason: reason,
                difflevel: difflevel
            },
            type: 'POST',
            success: function (data) {
                toastr.success("You have updated product information.");
                window.location.reload(true);
            }
        });
    }

    function SaveProjectDetailsexport(id) {
        $('#tblexport').find("#qty_" + id).css('border', '');
        var scId = $('#tblexport').find("#ScientistId_" + id).val();
        var scientistStatus = $('#tblexport').find("#scientistStatus_" + id).val();
        var projectType = $('#tblexport').find("#projecttype_" + id).val();
        var qty = $('#tblexport').find("#qty_" + id).val();
        var batchno = $('#tblexport').find("#batchno_" + id).val();
        var additionalBatch = $('#tblexport').find("#additionalBatch_" + id).val();
        var remark = $('#tblexport').find("#remark_" + id).val();
        var sciremark = $('#tblexport').find("#sciremark_" + id).val();
        var orderremark = $('#tblexport').find("#orderremark_" + id).val();
        var reason = $('#tblexport').find("#reason_" + id).val();
        if (qty === "" || qty == "0" || qty.trim() == "") {
            $("#inhqty_" + id).css('border', '1px solid red');
            return false;
        }
        $.ajax({
            url: '/Form/UpdateProjectInfo',
            data: {
                scId: scId,
                projectType: projectType,
                id: id,
                qty: qty,
                batchno: batchno,
                remark: remark,
                additionalBatch: additionalBatch,
                scientistStatus: scientistStatus,
                sciremark: sciremark,
                orderremark: orderremark,
                reason: reason,
                tabname: "export"
            },
            type: 'POST',
            success: function (data) {
                toastr.success("You have updated product information.");
                window.location.reload(true);
            }
        });
    }

    function SaveProjectDetailsInhouse(id) {
        $('#exampleinhouse').find("#qty_" + id).css('border', '');
        var scId = $('#exampleinhouse').find("#ScientistId_" + id).val();
        var scientistStatus = $('#exampleinhouse').find("#scientistStatus_" + id).val();
        var projectType = $('#exampleinhouse').find("#projecttype_" + id).val();
        var qty = $('#exampleinhouse').find("#qty_" + id).val();
        var batchno = $('#exampleinhouse').find("#batchno_" + id).val();
        var additionalBatch = $('#exampleinhouse').find("#additionalBatch_" + id).val();
        var remark = $('#exampleinhouse').find("#remark_" + id).val();
        var sciremark = $('#exampleinhouse').find("#sciremark_" + id).val();
        if (qty === "" || qty == "0" || qty.trim() == "") {
            $("#inhqty_" + id).css('border', '1px solid red');
            return false;
        }
        $.ajax({
            url: '/Form/UpdateProjectInfo',
            data: {
                scId: scId,
                projectType: projectType,
                id: id,
                qty: qty,
                batchno: batchno,
                remark: remark,
                additionalBatch: additionalBatch,
                scientistStatus: scientistStatus,
                sciremark: sciremark
            },
            type: 'POST',
            success: function (data) {
                toastr.success("You have updated product information.");
                window.location.reload(true);
            }
        });
    }

    function ResumeCancelledProduct() {
        var ids = [];

        $('.clsSaverow').each(function () {
            if ($(this).is(':checked')) {
                ids.push($(this).val());
            }
        });

        if (ids.length === 0) {
            toastr.error("Please select atleast one Product");
            return false;
        }

        swal({
            title: "Are you sure want to resume cancel this product?",
            text: "",
            type: "warning",
            showCancelButton: true,
            html: true,
            customClass: 'swalwide',
            confirmButtonClass: "btn-danger",
            confirmButtonText: "Yes, cancel it!",
            cancelButtonText: "No",
            closeOnConfirm: true,
            closeOnCancel: true
        },
            function (isConfirm) {
                if (isConfirm) {
                    $.ajax({
                        url: '/Form/ResumeCancelledProductList',
                        data: { id: ids },
                        type: 'POST',
                        traditional: true, // add this
                        dataType: 'json',
                        success: function (data) {
                            if (data.success) {
                                $('#tblcancelledproduct').DataTable().ajax.reload(null, false);

                            }
                        }
                    });

                }
            });
    }

    function CancelledProduct() {
        var ids = [];

        $('.clsSaverow').each(function () {
            if ($(this).is(':checked')) {
                ids.push($(this).val());
            }
        });

        if (ids.length === 0) {
            toastr.error("Please select atleast one Product");
            return false;
        }

        swal({
            title: "Are you sure want to cancel this product?",
            text: "",
            type: "warning",
            showCancelButton: true,
            html: true,
            customClass: 'swalwide',
            confirmButtonClass: "btn-danger",
            confirmButtonText: "Yes, cancel it!",
            cancelButtonText: "No",
            closeOnConfirm: true,
            closeOnCancel: true
        },
            function (isConfirm) {
                if (isConfirm) {
                    $.ajax({
                        url: '/Form/CancelledProductList',
                        data: { id: ids },
                        type: 'POST',
                        traditional: true, // add this
                        dataType: 'json',
                        success: function (data) {

                            if (data.success) {
                                window.location.href = "/Form/Project";
                            }
                        }
                    });

                }
            });



    }

    function MoveToDispatchList() {
        var ids = [];

        $('.clsMoveDispatch').each(function () {
            if ($(this).is(':checked')) {
                ids.push($(this).val());
            }
        });

        if (ids.length === 0) {
            toastr.error("Please select atleast one Product");
            return false;
        }

        var str = "<table><tr><th>PO No</th><th>Company Name</th><th>Product Name</th><th>CAS No</th><th>CAT No</th></tr>";
        var errorCount = 0;
        var readyfordispatchedId = 15;
        var instockId = 4;
        $(ids).each(function (i, v) {
            var poNo = $("#tr_" + v).attr('data-pono');
            var compName = $("#tr_" + v).attr('data-company');
            var productName = $("#tr_" + v + " td:nth-child(14)").text();
            var casNo = $("#tr_" + v + " td:nth-child(15)").text();
            var catNo = $("#tr_" + v + " td:nth-child(16)").text();

            var protype = $("#projecttype_" + v).val();
            var actistatus = $("#activitystatus_" + v).val();
            var prostatus = $("#prostatus_" + v).val();

            if (prostatus == null || prostatus == undefined) {
                prostatus = $("#otherprostatus_" + v).val();
            }

            if (protype !== instockId.toString()) {
                errorCount += 1;
            }
            if (actistatus == "Approval First" && prostatus != "41") {
                errorCount += 1;
            }
            if (actistatus == "Immediate Dispatch" && (prostatus != "41" && prostatus != "38")) {
                errorCount += 1;
            }
            if (actistatus == "Repeat Order - Dispatch" && (prostatus != "41" && prostatus != "38")) {
                errorCount += 1;
            }
            if (actistatus == "Repeat Order - Approval First" && prostatus != "41") {
                errorCount += 1;
            }
            if (actistatus == "Short Qty Dispatch" && (prostatus != "41" && prostatus != "38")) {
                errorCount += 1;
            }
            if (actistatus == "Short Qty Dispatched" && (prostatus != "41" && prostatus != "38")) {
                errorCount += 1;
            }
            if (actistatus == "Sample Sent" && (prostatus != "19" && prostatus != "38")) {
                errorCount += 1;
            }
            if (actistatus == "Sample Approved" && (prostatus != "19" && prostatus != "38")) {
                errorCount += 1;
            }
            if (actistatus == "Quotation - Data Sent" && prostatus != "41") {
                errorCount += 1;
            }
            if (actistatus == "Quotation - Data Approved" && prostatus != "41") {
                errorCount += 1;
            }
            str += "<tr><td>" + poNo + "</td><td>" + compName + "</td><td>" + productName + "</td><td>" + casNo + "</td><td>" + catNo + "</td></tr>";
        });
        str += "</table>";

        if (errorCount > 0) {
            toastr.error("You can not move this product into dispatch. Please check status and activity.");
            return false;
        }

        swal({
            title: "Are you sure want to move this product to dispatch screen?",
            text: str,
            type: "warning",
            showCancelButton: true,
            html: true,
            customClass: 'swalwide',
            confirmButtonClass: "btn-danger",
            confirmButtonText: "Yes, move it!",
            cancelButtonText: "No, cancel!",
            closeOnConfirm: true,
            closeOnCancel: true
        },
            function (isConfirm) {
                if (isConfirm) {
                    $.ajax({
                        url: '/Form/MoveToDispatchList',
                        data: { id: ids },
                        type: 'POST',
                        traditional: true, // add this
                        dataType: 'json',
                        success: function (data) {
                            if (data.success) {
                                window.location.href = "/Form/Project";
                            }
                        }
                    });

                }
            });
    }

    function MovetoDispatch(quoteDetailsId) {
        swal({
            title: "Are you sure?",
            text: "You want to move this file to dispatch team!",
            type: "warning",
            showCancelButton: true,
            confirmButtonClass: "btn-danger",
            confirmButtonText: "Yes, move it!",
            cancelButtonText: "No",
            closeOnConfirm: true,
            closeOnCancel: true
        },
            function (isConfirm) {
                if (isConfirm) {
                    $.ajax({
                        url: '/Form/MovetoDispatch?id=' + quoteDetailsId,
                        data: {},
                        type: 'POST',
                        success: function (data) {
                            if (data.success) {
                                toastr.success("Your product is moved to dispatch team.");
                                $("#spanmovedispatch_" + quoteDetailsId).hide();
                            }
                            else {
                                toastr.error(data.message);
                            }
                        }
                    });
                } else {
                    toastr.error("Your product is safe :)");
                }
            });
    }

    function SaveInstockProjectDetails(id) {
        $('#tblinstock').find("#qty_" + id).css('border', '');
        var scId = $('#tblinstock').find("#ScientistId_" + id).val();
        var scientistStatus = $('#tblinstock').find("#scientistStatus_" + id).val();
        var projectType = $('#tblinstock').find("#projecttype_" + id).val();
        var qty = $('#tblinstock').find("#qty_" + id).val();
        var batchno = $('#tblinstock').find("#batchno_" + id).val();
        var additionalBatch = $('#tblinstock').find("#additionalBatch_" + id).val();
        var remark = $('#tblinstock').find("#remark_" + id).val();
        var sciremark = $('#tblinstock').find("#sciremark_" + id).val();
        var reason = $('#tblinstock').find("#reason_" + id).val();
        var reason = $('#tblinstock').find("#reason_" + id).val();
        var orderremark = $('#tblinstock').find("#orderremark_" + id).val();
        var activity = $('#tblinstock').find("#activitystatus_" + id).val();
        if (qty === "" || qty == "0" || qty.trim() == "") {
            $('#tblinstock').find("#qty_" + id).css('border', '1px solid red');
            return false;
        }
        $.ajax({
            url: '/Form/UpdateProjectInfo',
            data: {
                scId: scId,
                projectType: projectType,
                id: id,
                qty: qty,
                batchno: batchno,
                remark: remark,
                additionalBatch: additionalBatch,
                scientistStatus: scientistStatus,
                sciremark: sciremark,
                reason: reason,
                tabname: "instock",
                orderremark: orderremark,
                activity: activity
            },
            type: 'POST',
            success: function (data) {
                toastr.success("You have updated product information.");
                window.location.reload(true);
            }
        });
    }

    function SavePurchaseProjectDetails(id) {
        $('#tblpurchase').find("#qty_" + id).css('border', '');
        var scId = $('#tblpurchase').find("#ScientistId_" + id).val();
        var scientistStatus = $('#tblpurchase').find("#scientistStatus_" + id).val();
        var projectType = $('#tblpurchase').find("#projecttype_" + id).val();
        var qty = $('#tblpurchase').find("#qty_" + id).val();
        var batchno = $('#tblpurchase').find("#batchno_" + id).val();
        var additionalBatch = $('#tblpurchase').find("#additionalBatch_" + id).val();
        var remark = $('#tblpurchase').find("#remark_" + id).val();
        var sciremark = $('#tblpurchase').find("#sciremark_" + id).val();
        var reason = $('#tblpurchase').find("#reason_" + id).val();
        if (qty === "" || qty == "0" || qty.trim() == "") {
            $('#tblpurchase').find("#qty_" + id).css('border', '1px solid red');
            return false;
        }
        $.ajax({
            url: '/Form/UpdateProjectInfo',
            data: {
                scId: scId,
                projectType: projectType,
                id: id,
                qty: qty,
                batchno: batchno,
                remark: remark,
                additionalBatch: additionalBatch,
                scientistStatus: scientistStatus,
                sciremark: sciremark,
                reason: reason,
                tabname: "purchase"
            },
            type: 'POST',
            success: function (data) {
                toastr.success("You have updated product information.");
                window.location.reload(true);
            }
        });
    }

    function SaveProjectDetailsInhouse(id) {
        $('#exampleinhouse').find("#qty_" + id).css('border', '');
        var scId = $('#exampleinhouse').find("#ScientistId_" + id).val();
        var scientistStatus = $('#exampleinhouse').find("#scientistStatus_" + id).val();
        var projectType = $('#exampleinhouse').find("#projecttype_" + id).val();
        var qty = $('#exampleinhouse').find("#qty_" + id).val();
        var batchno = $('#exampleinhouse').find("#batchno_" + id).val();
        var additionalBatch = $('#exampleinhouse').find("#additionalBatch_" + id).val();
        var remark = $('#exampleinhouse').find("#remark_" + id).val();
        var sciremark = $('#exampleinhouse').find("#sciremark_" + id).val();
        if (qty === "" || qty == "0" || qty.trim() == "") {
            $('#exampleinhouse').find("#qty_" + id).css('border', '1px solid red');
            return false;
        }
        $.ajax({
            url: '/Form/UpdateProjectInfo',
            data: {
                scId: scId,
                projectType: projectType,
                id: id,
                qty: qty,
                batchno: batchno,
                remark: remark,
                additionalBatch: additionalBatch,
                scientistStatus: scientistStatus,
                sciremark: sciremark
            },
            type: 'POST',
            success: function (data) {
                toastr.success("You have updated product information.");
                window.location.reload(true);
            }
        });
    }


    function Addnewpurchaserfq() {
        $.ajax({
            url: '/Form/AddNewRfq',
            data: {},
            type: 'GET',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $('#invoiceQueryModal .modal-body').html(data.html);
                $('#invoiceQueryModal').modal({ show: true });
                // $("#invoiceQueryModal .modal-content").css("width", "1080px");
            }
        });
    }

    function showreactionmatrix(quotedetailsid) {
        $.ajax({
            url: '/Form/ShowReactionMatrix?quotedetailsid=' + quotedetailsid,
            data: {},
            type: 'GET',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $('#invoiceQueryModal .modal-body').html(data.html);
                $('#invoiceQueryModal').modal({ show: true });
                // $("#invoiceQueryModal .modal-content").css("width", "1080px");
            }
        });
    }

    function explainationGenerate(id) {
        $.ajax({
            url: '/Form/Addexplaination?id=' + id,
            data: {},
            type: 'GET',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $('#invoiceQueryModal .modal-body').html(data.html);
                $('#invoiceQueryModal').modal({ show: true });
                // $("#invoiceQueryModal .modal-content").css("width", "1080px");
            }
        });
    }

    function GLPRemarkGenerate(id) {
        $.ajax({
            url: '/Form/AddGLPRemark?id=' + id,
            data: {},
            type: 'GET',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $('#invoiceQueryModal .modal-body').html(data.html);
                $('#invoiceQueryModal').modal({ show: true });
                // $("#invoiceQueryModal .modal-content").css("width", "1080px");
            }
        });
    }

    function InhouseRemarkGenerate(id) {
        $.ajax({
            url: '/Form/AddInhouseRemark?id=' + id,
            data: {},
            type: 'GET',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $('#invoiceQueryModal .modal-body').html(data.html);
                $('#invoiceQueryModal').modal({ show: true });
                // $("#invoiceQueryModal .modal-content").css("width", "1080px");
            }
        });
    }
    function JourneyCommentGenerate(id) {
        $.ajax({
            url: '/Form/AddJourneyComment?id=' + id,
            data: {},
            type: 'GET',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $('#invoiceQueryModal .modal-body').html(data.html);
                $('#invoiceQueryModal').modal({ show: true });
            }
        });
    }

    $("#ddlexport").change(function () {
        var value = $(this).val();
        if (value === "All") {
            value = "";
        }
        $('#tblexport').DataTable().draw();
    });

    function Resolvequery(id) {
        $.ajax({
            url: '/Form/Resolvequery?id=' + id,
            data: {},
            type: 'GET',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                window.location.reload();
            }
        });
    }

    function Resumequery(id) {
        $.ajax({
            url: '/Form/Resumequery?id=' + id,
            data: {},
            type: 'GET',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                window.location.reload();
            }
        });
    }

    function ExportAllTab() {
        var menulink = '';
        $('.nav').find('li').each(function () {
            if ($(this).hasClass('active')) {
                menulink = $(this).find('a').attr('data-tabname');
            }
        });

        var tableId = '';
        if (menulink === 'all') {
            var str = "/Form/ExportProjectList?";
                str += "parameter=" + $("#home").find('#allsearchbox').val();
                str += "parameterradio=" +  $("#home").find('input[name="filterAll"]:checked').val();;
                str += "&ScientistListItem=" + $("#home").find('#ScientistListItem').val();
                str += "&SubScientistListItem=" + $("#home").find('#SubScientistListItem').val();
                str += "&fltactivity=" + $("#home").find('#fltactivity').val();
                str += "&fltprostatusItem=" + $("#home").find('#fltprostatusItem').val();
                str += "&fltprotypeItem=" + $("#home").find('#fltprotypeItem').val();
                str += "&fltgeographicallocation=" + $("#home").find('#fltgeographicallocation').val();
                str += "&fltestdate=" + $("#home").find('#fltestdate').val();
                str += "&fltglp=" + $("#home").find('#fltglp').val();
                str += "&chkpriority=" + $("#home").find('#chkpriority').is(":checked");
                str += "&ProjectTeam=" + $("#home").find('#ProjectTeam').val();

            window.location.href = str;
        }
        else if (menulink === 'watchlist') {
            var str = "/Form/ExportProjectWatchListTab?";
                str += "parameter=" + $("#watchlist").find('#allsearchbox').val();
                str += "parameterradio=" +  $("#watchlist").find('input[name="filterAll"]:checked').val();;
                str += "&ScientistListItem=" + $("#watchlist").find('#ScientistListItem').val();
                str += "&SubScientistListItem=" + $("#watchlist").find('#SubScientistListItem').val();
                str += "&fltactivity=" + $("#watchlist").find('#fltactivity').val();
                str += "&fltprostatusItem=" + $("#watchlist").find('#fltprostatusItem').val();
                str += "&fltprotypeItem=" + $("#watchlist").find('#fltprotypeItem').val();
                str += "&fltgeographicallocation=" + $("#watchlist").find('#fltgeographicallocation').val();
                str += "&fltestdate=" + $("#watchlist").find('#fltestdate').val();
                str += "&fltglp=" + $("#watchlist").find('#fltglp').val();
                str += "&chkpriority=" + $("#watchlist").find('#chkpriority').is(":checked");
                str += "&ProjectTeam=" + $("#watchlist").find('#ProjectTeam').val();
                

            window.location.href = str;
        } 
        else if (menulink === 'domestic') {
            window.location.href = "/Form/ExportProjectDomesticinstockList?parameter=" + $("#tabdomestic").find('#allsearchbox').val();
        }
        else if (menulink === 'purchase') {
            window.location.href = "/Form/ExportProjectPurchaseList?parameter=" + $("#tabpurchase").find('#allsearchbox').val();
        }
        else if (menulink === 'purchaserfq') {
            window.location.href = "/Form/ExportProjectPurchaseRFQList?parameter=" + $("#tabpurchaserfq").find('#allsearchbox').val();
        }
        else if (menulink === 'controlledsubstance') {
            window.location.href = "/Form/ExportProjectcontrolledsubstance";
        }
        else if (menulink === 'export') {

            swal({
                title: "Are you sure want to Export it?",
                //text: str,
                //html: true,
                type: "warning", customClass: 'swalwide',
                showCancelButton: true,
                confirmButtonClass: "btn-danger",
                confirmButtonText: "Invoice Data",
                cancelButtonText: "Project Data",
                closeOnConfirm: true,
                closeOnCancel: true
            },
                function (isConfirm) {
                    if (isConfirm) {
                        window.location.href = "/Form/ExportProjectInvoiceExportList?parameter=" + $("#tabexport").find('#allsearchbox').val() + "&fltactivity=" + $("#tabexport").find("#fltactivity").val() + "&fltexportprostatusItem=" + $("#tabexport").find("#fltexportprostatusItem").val();
                    } else {
                        window.location.href = "/Form/ExportProjectExportList?parameter=" + $("#tabexport").find('#allsearchbox').val() + "&fltactivity=" + $("#tabexport").find("#fltactivity").val() + "&fltexportprostatusItem=" + $("#tabexport").find("#fltexportprostatusItem").val();
                    }
                });

        }
    }

    $(document).on("change", ".clsApprovedForClient", function () {
        var value = $(this).val();
        var status = $(this).is(':checked');
        $.ajax({
            url: '/Form/UpdateClientApproved?id=' + value + '&status=' + status,
            data: {},
            type: 'GET',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                if (status === true) {
                    toastr.success('Done!!! Client approval status.');
                }
                else {
                    toastr.success('Removed client approval status.');
                }
            }
        });
    });

    $(document).on("change", ".ddladditionalbatch", function () {
        var quotedetailsid = $(this).attr("id").replace("additionalBatch_", "");
        var inventoryId = $(this).val();
        $.ajax({
            url: '/Form/GetCOADetailsFromBatchId?batchId=' + inventoryId,
            data: {},
            type: 'GET',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $("#coa_" + quotedetailsid).html(data);
            }
        });
    });

    function opensendemailpopup(quoteId) {
        if ('@SessionCookieManagement.IsAdmin' === 'False') {
            toastr.error("You have no access for use this feature.");
            return false;
        }
        $.ajax({
            url: '/Form/GetAllQuoteDetailsIdOfPoNumberByQuoteId?id=' + quoteId,
            data: {},
            type: 'GET',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                if (!data.success) {
                    toastr.error(data.message);
                    return false;
                }
                if (data.ids.length === 0) {
                    toastr.error("Please select atleast one Product");
                    return false;
                }
                orderConfirmationPupop(data.ids);
            }
        });
    }

    $(document).on("change", ".clsProjStatus", function () {
        var quotedetailsid = $(this).attr('data-quotedetailsid');
        var status = $(this).val();

        var explaination = Projects.GetExplaination(status);
        $("#explainationsecond_" + quotedetailsid).val(explaination);

    });


    function DispatchedSummaryDetail(quoteDetailsId) {

        $.ajax({
            url: '/Form/GetDispatchedSummaryByBatchId',
            data: { batchId: $("#additionalBatch_" + quoteDetailsId).val() },
            type: 'POST',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $('.modal-body').html(data.html);
                $('#myModal').modal({ show: true });
                $(".modal-dialog").css("width", "1080px");
            }
        });
    }

    function SearchDefault(searchBy, searchValue) {
        $("#home").find("input[name='filterAll'][value='" + searchBy + "']").prop("checked", true);
        $("#home").find("#allsearchbox").val(searchValue);
        $('#example1').DataTable().draw();
    }

    function ViewProductScheme(productid) {

        $.ajax({
            url: '/Form/ViewProductScheme?productid=' + productid,
            data: {},
            type: 'GET',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                var str = "";
                $('#divimgcontainar').empty();
                $(data).each(function (i, v) {
                    var img = document.createElement("IMG");
                    img.src = "http://spms.synzeal.com/" + v.replace('..', '');
                    $('#divimgcontainar').prepend(img);
                });
                $(".img-container").popupLightbox({
                    width: 1280,
                    height: 650
                });
                $(".img-container").find('img:first').click();
            }
        });
    }

    $(".img-container").popupLightbox({
        width: 600,
        height: 450
    });

    function GetAuditLogForProject() {
        var arr = [];
        var id = 0;
        $(".clsSaverow").each(function () {
            if ($(this).is(":checked")) {
                arr.push($(this).val());
            }
        });

        if (arr.length > 1) {
            toastr.error("Please select only one Product");
            return false;
        }
        id = arr[0];
        $.ajax({
            url: '/Form/GetAuditLogForProject?id=' + id,
            data: {},
            type: 'GET',
            traditional: true,
            dataType: 'json',
            success: function (data) {
                $('#invoiceQueryModal .modal-body').html(data.html);
                $('#invoiceQueryModal').modal({ show: true });
            }
        });
    }

    function InvoiceGenerate(tblname, classname) {
        var ids = [];
        $('#' + tblname).find('.' + classname).each(function () {
            if ($(this).is(':checked')) {
                ids.push($(this).val());
            }
        });

        if (ids.length === 0) {
            toastr.error("Please select atleast one Product");
            return false;
        }
        $.ajax({
            url: '/Form/GenerateInvoice',
            data: { id: ids },
            type: 'POST',
            traditional: true, // add this
            dataType: 'json',
            success: function (data) {
                $('.modal-body').html(data.html);
                $('#myModal').modal({ show: true });
                $(".modal-dialog").css("width", "1200px");
            }
        });
    }

    function viewcontrolledsubstancedata(quotedetailsid) {
        $.ajax({
            url: '/Form/ViewQuoteDetailsId?id=' + quotedetailsid,
            data: {},
            type: 'GET',
            traditional: true,
            dataType: 'json',
            success: function (data) {
                $('#invoiceQueryModal .modal-body').html(data);
                $('#invoiceQueryModal').modal({ show: true });
            }
        });
    }
    function UploadDocumentOfProduct(id) {
        $("#myModal").modal('show');
        $("#myModal").find(".modal-body").load("../Form/UploadControlledSubstanceDocument?id=" + id);
    }
 
</script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css" rel="stylesheet" />
<!--Popup Lightbox Js-->
<script src="/js/jquery.popup.lightbox.js"></script>
<!--Popup Lightbox CSS-->
<link href="/css/popup-lightbox.css" rel="stylesheet" />
<div class="img-container" id="divimgcontainar" style="display:none">
</div>
<style type="text/css">
    .lightbox {
        z-index: 99999 !important;
        border-radius: 5px;
        box-shadow: 5px 5px 15px rgb(0 0 0);
    }

    .img-caption {
        display: none;
    }

    .showSweetAlert {
        margin-top: -20% !important;
        overflow-y: auto;
        max-height: 80%;
    }

    .fontbold {
        font-weight: bold;
    }

    .img-show img {
        position: unset;
        max-height: 100%;
    }
</style>


@if (SessionCookieManagement.IsControlledSubstance)
{
    <text>
        <script type="text/javascript">
            $("#tabcontrolledsubstance").addClass('active');
            controlledsubstancetab();
        </script>
    </text>
}
else if (SessionCookieManagement.IsGLP)
{
    <text>
        <script type="text/javascript">
            $("#tabglp").addClass('active');
            glptab();
        </script>
    </text>
}
else
{
    <text>
        <script type="text/javascript">
            $("#home").addClass('active');
            alldataload();
        </script>
    </text>
}